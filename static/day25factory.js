class R{withFields(Z){let Q=Object.keys(this).map((W)=>(W in Z)?Z[W]:this[W]);return new this.constructor(...Q)}}class OZ{static fromArray(Z,Q){let W=Q||new I;for(let J=Z.length-1;J>=0;--J)W=new bZ(Z[J],W);return W}[Symbol.iterator](){return new J6(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof I}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function F(Z,Q){return new bZ(Z,Q)}function q(Z,Q){return OZ.fromArray(Z,Q)}class J6{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof I)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class I extends OZ{}class bZ extends OZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class aQ{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,W){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=W??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return lQ(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let W=this.bitSize%8;if(W){let J=8-W;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=lQ(this.rawBuffer,this.bitOffset,J),K=lQ(Z.rawBuffer,Z.bitOffset,J);if(X!==K)return!1}let W=this.bitSize%8;if(W){let J=lQ(this.rawBuffer,this.bitOffset,Q),X=lQ(Z.rawBuffer,Z.bitOffset,Q),K=8-W;if(J>>K!==X>>K)return!1}}return!0}get buffer(){if(Q6("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Q6("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function lQ(Z,Q,W){if(Q===0)return Z[W]??0;else{let J=Z[W]<<Q&255,X=Z[W+1]>>8-Q;return J|X}}class qJ{constructor(Z){this.value=Z}}var Z6={};function Q6(Z,Q){if(Z6[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),Z6[Z]=!0}class EQ extends R{static isResult(Z){return Z instanceof EQ}}class j extends EQ{constructor(Z){super();this[0]=Z}isOk(){return!0}}class E extends EQ{constructor(Z){super();this[0]=Z}isOk(){return!1}}function WZ(Z,Q){let W=[Z,Q];while(W.length){let J=W.pop(),X=W.pop();if(J===X)continue;if(!W6(J)||!W6(X))return!1;if(!m0(J,X)||g0(J,X)||b0(J,X)||f0(J,X)||h0(J,X)||_0(J,X)||v0(J,X))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[V,Y]=y0(J),H=V(J),M=V(X);if(H.length!==M.length)return!1;for(let U of H)W.push(Y(J,U),Y(X,U))}return!0}function y0(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,W)=>Q.get(W)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(W)=>[...Q,...Object.keys(W)],(W,J)=>W[J]]}}function g0(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function b0(Z,Q){return!(Z instanceof aQ)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((W,J)=>W===Q[J]))}function f0(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function h0(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function _0(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((W)=>!Q.has(W)))}function v0(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function W6(Z){return typeof Z==="object"&&Z!==null}function m0(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function oQ(Z,Q){return Math.trunc(RJ(Z,Q))}function RJ(Z,Q){if(Q===0)return 0;else return Z/Q}function KZ(Z,Q,W,J,X,K,G){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=Q,V.module=W,V.line=J,V.function=X,V.fn=X;for(let Y in G)V[Y]=G[Y];return V}class HZ extends R{constructor(Z){super();this[0]=Z}}class jZ extends R{}var X6=new WeakMap,zJ=new DataView(new ArrayBuffer(8)),IJ=0;function NJ(Z){let Q=X6.get(Z);if(Q!==void 0)return Q;let W=IJ++;if(IJ===2147483647)IJ=0;return X6.set(Z,W),W}function OJ(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function DJ(Z){let Q=0,W=Z.length;for(let J=0;J<W;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function G6(Z){zJ.setFloat64(0,Z);let Q=zJ.getInt32(0),W=zJ.getInt32(4);return Math.imul(73244475,Q>>16^Q)^W}function $0(Z){return DJ(Z.toString())}function u0(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return NJ(Z);if(Z instanceof Date)return G6(Z.getTime());let W=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)W=Math.imul(31,W)+CZ(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{W=W+CZ(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{W=W+OJ(CZ(J),CZ(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let K=J[X],G=Z[K];W=W+OJ(CZ(G),DJ(K))|0}}return W}function CZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return G6(Z);case"string":return DJ(Z);case"bigint":return $0(Z);case"object":return u0(Z);case"symbol":return NJ(Z);case"function":return NJ(Z);default:return 0}}var dZ=5,BJ=Math.pow(2,dZ),c0=BJ-1,p0=BJ/2,d0=BJ/4,RZ=0,pZ=1,TZ=2,zQ=3,AJ={type:TZ,bitmap:0,array:[]};function tQ(Z,Q){return Z>>>Q&c0}function CW(Z,Q){return 1<<tQ(Z,Q)}function s0(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function TJ(Z,Q){return s0(Z&Q-1)}function wZ(Z,Q,W){let J=Z.length,X=Array(J);for(let K=0;K<J;++K)X[K]=Z[K];return X[Q]=W,X}function r0(Z,Q,W){let J=Z.length,X=Array(J+1),K=0,G=0;while(K<Q)X[G++]=Z[K++];X[G++]=W;while(K<J)X[G++]=Z[K++];return X}function jJ(Z,Q){let W=Z.length,J=Array(W-1),X=0,K=0;while(X<Q)J[K++]=Z[X++];++X;while(X<W)J[K++]=Z[X++];return J}function V6(Z,Q,W,J,X,K){let G=CZ(Q);if(G===J)return{type:zQ,hash:G,array:[{type:RZ,k:Q,v:W},{type:RZ,k:X,v:K}]};let V={val:!1};return eQ(PJ(AJ,Z,G,Q,W,V),Z,J,X,K,V)}function eQ(Z,Q,W,J,X,K){switch(Z.type){case pZ:return i0(Z,Q,W,J,X,K);case TZ:return PJ(Z,Q,W,J,X,K);case zQ:return n0(Z,Q,W,J,X,K)}}function i0(Z,Q,W,J,X,K){let G=tQ(W,Q),V=Z.array[G];if(V===void 0)return K.val=!0,{type:pZ,size:Z.size+1,array:wZ(Z.array,G,{type:RZ,k:J,v:X})};if(V.type===RZ){if(WZ(J,V.k)){if(X===V.v)return Z;return{type:pZ,size:Z.size,array:wZ(Z.array,G,{type:RZ,k:J,v:X})}}return K.val=!0,{type:pZ,size:Z.size,array:wZ(Z.array,G,V6(Q+dZ,V.k,V.v,W,J,X))}}let Y=eQ(V,Q+dZ,W,J,X,K);if(Y===V)return Z;return{type:pZ,size:Z.size,array:wZ(Z.array,G,Y)}}function PJ(Z,Q,W,J,X,K){let G=CW(W,Q),V=TJ(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[V];if(Y.type!==RZ){let M=eQ(Y,Q+dZ,W,J,X,K);if(M===Y)return Z;return{type:TZ,bitmap:Z.bitmap,array:wZ(Z.array,V,M)}}let H=Y.k;if(WZ(J,H)){if(X===Y.v)return Z;return{type:TZ,bitmap:Z.bitmap,array:wZ(Z.array,V,{type:RZ,k:J,v:X})}}return K.val=!0,{type:TZ,bitmap:Z.bitmap,array:wZ(Z.array,V,V6(Q+dZ,H,Y.v,W,J,X))}}else{let Y=Z.array.length;if(Y>=p0){let H=Array(32),M=tQ(W,Q);H[M]=PJ(AJ,Q+dZ,W,J,X,K);let U=0,N=Z.bitmap;for(let O=0;O<32;O++){if((N&1)!==0){let A=Z.array[U++];H[O]=A}N=N>>>1}return{type:pZ,size:Y+1,array:H}}else{let H=r0(Z.array,V,{type:RZ,k:J,v:X});return K.val=!0,{type:TZ,bitmap:Z.bitmap|G,array:H}}}}function n0(Z,Q,W,J,X,K){if(W===Z.hash){let G=LJ(Z,J);if(G!==-1){if(Z.array[G].v===X)return Z;return{type:zQ,hash:W,array:wZ(Z.array,G,{type:RZ,k:J,v:X})}}let V=Z.array.length;return K.val=!0,{type:zQ,hash:W,array:wZ(Z.array,V,{type:RZ,k:J,v:X})}}return eQ({type:TZ,bitmap:CW(Z.hash,Q),array:[Z]},Q,W,J,X,K)}function LJ(Z,Q){let W=Z.array.length;for(let J=0;J<W;J++)if(WZ(Q,Z.array[J].k))return J;return-1}function SW(Z,Q,W,J){switch(Z.type){case pZ:return l0(Z,Q,W,J);case TZ:return a0(Z,Q,W,J);case zQ:return o0(Z,J)}}function l0(Z,Q,W,J){let X=tQ(W,Q),K=Z.array[X];if(K===void 0)return;if(K.type!==RZ)return SW(K,Q+dZ,W,J);if(WZ(J,K.k))return K;return}function a0(Z,Q,W,J){let X=CW(W,Q);if((Z.bitmap&X)===0)return;let K=TJ(Z.bitmap,X),G=Z.array[K];if(G.type!==RZ)return SW(G,Q+dZ,W,J);if(WZ(J,G.k))return G;return}function o0(Z,Q){let W=LJ(Z,Q);if(W<0)return;return Z.array[W]}function SJ(Z,Q,W,J){switch(Z.type){case pZ:return t0(Z,Q,W,J);case TZ:return e0(Z,Q,W,J);case zQ:return ZX(Z,J)}}function t0(Z,Q,W,J){let X=tQ(W,Q),K=Z.array[X];if(K===void 0)return Z;let G=void 0;if(K.type===RZ){if(!WZ(K.k,J))return Z}else if(G=SJ(K,Q+dZ,W,J),G===K)return Z;if(G===void 0){if(Z.size<=d0){let V=Z.array,Y=Array(Z.size-1),H=0,M=0,U=0;while(H<X){let N=V[H];if(N!==void 0)Y[M]=N,U|=1<<H,++M;++H}++H;while(H<V.length){let N=V[H];if(N!==void 0)Y[M]=N,U|=1<<H,++M;++H}return{type:TZ,bitmap:U,array:Y}}return{type:pZ,size:Z.size-1,array:wZ(Z.array,X,G)}}return{type:pZ,size:Z.size,array:wZ(Z.array,X,G)}}function e0(Z,Q,W,J){let X=CW(W,Q);if((Z.bitmap&X)===0)return Z;let K=TJ(Z.bitmap,X),G=Z.array[K];if(G.type!==RZ){let V=SJ(G,Q+dZ,W,J);if(V===G)return Z;if(V!==void 0)return{type:TZ,bitmap:Z.bitmap,array:wZ(Z.array,K,V)};if(Z.bitmap===X)return;return{type:TZ,bitmap:Z.bitmap^X,array:jJ(Z.array,K)}}if(WZ(J,G.k)){if(Z.bitmap===X)return;return{type:TZ,bitmap:Z.bitmap^X,array:jJ(Z.array,K)}}return Z}function ZX(Z,Q){let W=LJ(Z,Q);if(W<0)return Z;if(Z.array.length===1)return;return{type:zQ,hash:Z.hash,array:jJ(Z.array,W)}}function Y6(Z,Q){if(Z===void 0)return;let W=Z.array,J=W.length;for(let X=0;X<J;X++){let K=W[X];if(K===void 0)continue;if(K.type===RZ){Q(K.v,K.k);continue}Y6(K,Q)}}class qZ{static fromObject(Z){let Q=Object.keys(Z),W=qZ.new();for(let J=0;J<Q.length;J++){let X=Q[J];W=W.set(X,Z[X])}return W}static fromMap(Z){let Q=qZ.new();return Z.forEach((W,J)=>{Q=Q.set(J,W)}),Q}static new(){return new qZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let W=SW(this.root,0,CZ(Z),Z);if(W===void 0)return Q;return W.v}set(Z,Q){let W={val:!1},J=this.root===void 0?AJ:this.root,X=eQ(J,0,CZ(Z),Z,Q,W);if(X===this.root)return this;return new qZ(X,W.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=SJ(this.root,0,CZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return qZ.new();return new qZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return SW(this.root,0,CZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,W)=>Z.push([W,Q])),Z}forEach(Z){Y6(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,W)=>{Z=Z+OJ(CZ(Q),CZ(W))|0}),Z}equals(Z){if(!(Z instanceof qZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,W)=>{if(!WZ(Z.get(W,!Q),Q))throw K6}),!0}catch(Q){if(Q===K6)return!1;throw Q}}}var K6=Symbol();class t extends R{}class e extends R{}class ZQ extends R{}function wW(Z,Q){if(Z===Q)return new e;else if(Z<Q)return new t;else return new ZQ}function EW(Z,Q){if(Z<Q)return Z;else return Q}class VZ extends R{}class kQ extends R{}function KX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return J;else Z=W.tail,Q=J+1}}function WW(Z){return KX(Z,0)}function QW(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return J;else{let X=W.head;Z=W.tail,Q=F(X,J)}}}function r(Z){return QW(Z,q([]))}function q6(Z){if(Z instanceof I)return new E(void 0);else{let Q=Z.head;return new j(Q)}}function GX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return r(K);else{let{head:G,tail:V}=J,Y;if(X(G))Y=F(G,K);else Y=K;let M=Y;Z=V,Q=X,W=M}}}function R6(Z,Q){return GX(Z,Q,q([]))}function VX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return r(K);else{let G=J.head;Z=J.tail,Q=X,W=F(X(G),K)}}}function XZ(Z,Q){return VX(Z,Q,q([]))}function YX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return new j(r(K));else{let{head:G,tail:V}=J,Y=X(G);if(Y instanceof j){let H=Y[0];Z=V,Q=X,W=F(H,K)}else return Y}}}function JW(Z,Q){return YX(Z,Q,q([]))}function z6(Z,Q){while(!0){let W=Z,J=Q;if(J<=0)return W;else if(W instanceof I)return W;else Z=W.tail,Q=J-1}}function HX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return J;else{let X=W.head;Z=W.tail,Q=F(X,J)}}}function QQ(Z,Q){return HX(r(Z),Q)}function bW(Z,Q){return F(Q,Z)}function p(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return X;else{let G=J.head;Z=J.tail,Q=K(X,G),W=K}}}function MX(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof I)return K;else{let Y=X.head;Z=X.tail,Q=G(K,Y,V),W=G,J=V+1}}}function I6(Z,Q,W){return MX(Z,Q,W,0)}function yQ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return new E(void 0);else{let{head:X,tail:K}=W;if(J(X))return new j(X);else Z=K,Q=J}}}function UX(Z,Q,W,J,X,K){while(!0){let G=Z,V=Q,Y=W,H=J,M=X,U=K,N=F(M,Y);if(G instanceof I)if(H instanceof VZ)return F(r(N),U);else return F(N,U);else{let{head:O,tail:A}=G,T=V(M,O);if(H instanceof VZ)if(T instanceof t)Z=A,Q=V,W=N,J=H,X=O,K=U;else if(T instanceof e)Z=A,Q=V,W=N,J=H,X=O,K=U;else{let D;if(H instanceof VZ)D=F(r(N),U);else D=F(N,U);let P=D;if(A instanceof I)return F(q([O]),P);else{let{head:B,tail:L}=A,w,z=V(O,B);if(z instanceof t)w=new VZ;else if(z instanceof e)w=new VZ;else w=new kQ;let S=w;Z=L,Q=V,W=q([O]),J=S,X=B,K=P}}else if(T instanceof t){let D;if(H instanceof VZ)D=F(r(N),U);else D=F(N,U);let P=D;if(A instanceof I)return F(q([O]),P);else{let{head:B,tail:L}=A,w,z=V(O,B);if(z instanceof t)w=new VZ;else if(z instanceof e)w=new VZ;else w=new kQ;let S=w;Z=L,Q=V,W=q([O]),J=S,X=B,K=P}}else if(T instanceof e){let D;if(H instanceof VZ)D=F(r(N),U);else D=F(N,U);let P=D;if(A instanceof I)return F(q([O]),P);else{let{head:B,tail:L}=A,w,z=V(O,B);if(z instanceof t)w=new VZ;else if(z instanceof e)w=new VZ;else w=new kQ;let S=w;Z=L,Q=V,W=q([O]),J=S,X=B,K=P}}else Z=A,Q=V,W=N,J=H,X=O,K=U}}}function FX(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof I)return QW(K,V);else if(K instanceof I)return QW(X,V);else{let{head:Y,tail:H}=X,M=K.head,U=K.tail,N=G(Y,M);if(N instanceof t)Z=H,Q=K,W=G,J=F(Y,V);else if(N instanceof e)Z=X,Q=U,W=G,J=F(M,V);else Z=X,Q=U,W=G,J=F(M,V)}}}function qX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return r(K);else{let G=J.tail;if(G instanceof I){let V=J.head;return r(F(r(V),K))}else{let V=J.head,Y=G.head,H=G.tail,M=FX(V,Y,X,q([]));Z=H,Q=X,W=F(M,K)}}}}function RX(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof I)return QW(K,V);else if(K instanceof I)return QW(X,V);else{let{head:Y,tail:H}=X,M=K.head,U=K.tail,N=G(Y,M);if(N instanceof t)Z=X,Q=U,W=G,J=F(M,V);else if(N instanceof e)Z=H,Q=K,W=G,J=F(Y,V);else Z=H,Q=K,W=G,J=F(Y,V)}}}function zX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return r(K);else{let G=J.tail;if(G instanceof I){let V=J.head;return r(F(r(V),K))}else{let V=J.head,Y=G.head,H=G.tail,M=RX(V,Y,X,q([]));Z=H,Q=X,W=F(M,K)}}}}function IX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return J;else if(X instanceof VZ)if(J.tail instanceof I)return J.head;else Z=qX(J,K,q([])),Q=new kQ,W=K;else if(J.tail instanceof I){let V=J.head;return r(V)}else Z=zX(J,K,q([])),Q=new VZ,W=K}}function fW(Z,Q){if(Z instanceof I)return Z;else{let W=Z.tail;if(W instanceof I)return Z;else{let J=Z.head,X=W.head,K=W.tail,G,V=Q(J,X);if(V instanceof t)G=new VZ;else if(V instanceof e)G=new VZ;else G=new kQ;let Y=G,H=UX(K,Q,q([J]),Y,X,q([]));return IX(H,new VZ,Q)}}}function NX(Z,Q,W){while(!0){let J=Z,X=Q,K=W,G=wW(J,X);if(G instanceof t)Z=J,Q=X-1,W=F(X,K);else if(G instanceof e)return F(X,K);else Z=J,Q=X+1,W=F(X,K)}}function CJ(Z,Q){return NX(Z,Q,q([]))}function N6(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return;else{let{head:X,tail:K}=W;J(X),Z=K,Q=J}}}function gW(Z,Q){if(Q===0)return q([q([])]);else if(Z instanceof I)return Z;else{let{head:W,tail:J}=Z,K=gW(J,Q-1),G=XZ(K,(Y)=>{return F(W,Y)}),V=r(G);return p(V,gW(J,Q),(Y,H)=>{return F(H,Y)})}}function _W(Z,Q,W){let X=a(Z),K=wJ(X,Q,W);return a(K)}function BX(Z,Q,W){if(W<=0)return"";else if(Q<0){let K=kJ(Z)+Q;if(K<0)return"";else return xJ(Z,K,W)}else return xJ(Z,Q,W)}function j6(Z,Q){if(Q<=0)return Z;else return BX(Z,0,kJ(Z)-Q)}function AX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return J;else{let X=W.head;Z=W.tail,Q=J+X}}}function sZ(Z){return AX(Z,"")}function TX(Z,Q,W){while(!0){let J=Z,X=Q,K=W,G;if(J%2===0)G=K;else G=K+X;let Y=G,H=globalThis.Math.trunc(J/2);if(H<=0)return Y;else Z=H,Q=X+X,W=Y}}function vW(Z,Q){if(Q<=0)return"";else return TX(Q,Z,"")}function PX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return K;else{let G=J.head;Z=J.tail,Q=X,W=K+X+G}}}function GW(Z,Q){if(Z instanceof I)return"";else{let{head:W,tail:J}=Z;return PX(J,Q,W)}}function D6(Z){let W=B6(Z);return A6(W)}function OQ(Z,Q){if(Q==="")return KW(Z);else{let J=a(Z),X=EJ(J,Q);return XZ(X,a)}}class gQ extends R{constructor(Z,Q,W){super();this.expected=Z,this.found=Q,this.path=W}}class jQ extends R{constructor(Z){super();this.function=Z}}var P6=new jQ(EX);var mW=new jQ(xX);function MQ(Z,Q){let W=Q.function(Z),J,X;if(J=W[0],X=W[1],X instanceof I)return new j(J);else return new E(X)}function $W(Z){return new jQ((Q)=>{return[Z,q([])]})}function VW(Z,Q){return new jQ((W)=>{let J=Z.function(W),X,K;return X=J[0],K=J[1],[Q(X),K]})}function wX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(K instanceof I)return X;else{let{head:G,tail:V}=K,Y=G.function(J),H,M;if(H=Y,M=Y[1],M instanceof I)return H;else Z=J,Q=X,W=V}}}function L6(Z,Q){return new jQ((W)=>{let J=Z.function(W),X,K;if(X=J,K=J[1],K instanceof I)return X;else return wX(W,X,Q)})}function S6(Z,Q,W){let J=W(Z);if(J instanceof j)return[J[0],q([])];else return[J[0],q([new gQ(Q,xQ(Z),q([]))])]}function EX(Z){return S6(Z,"Int",E6)}function xX(Z){return S6(Z,"String",x6)}function gJ(Z,Q){let W=L6(mW,q([(()=>{return VW(P6,GZ)})()])),J=XZ(Q,(K)=>{let G=a(K),V=MQ(G,W);if(V instanceof j)return V[0];else return"<"+xQ(G)+">"}),X=XZ(Z[1],(K)=>{return new gQ(K.expected,K.found,QQ(J,K.path))});return[Z[0],X]}function kX(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(K instanceof I){let U=V(Y);return gJ(U,r(G))}else{let{head:M,tail:U}=K,N=w6(Y,M);if(N instanceof j){let O=N[0];if(O instanceof HZ){let A=O[0];Z=U,Q=F(M,G),W=V,J=A,X=H}else return H(Y,F(M,G))}else{let O=N[0],A=V(Y),T;T=A[0];let D=[T,q([new gQ(O,xQ(Y),q([]))])];return gJ(D,r(G))}}}}function C6(Z,Q,W){return new jQ((J)=>{let X=kX(Z,q([]),Q.function,J,(M,U)=>{let N=Q.function(M),O;O=N[0];let A=[O,q([new gQ("Field","Nothing",q([]))])];return gJ(A,r(U))}),K,G;K=X[0],G=X[1];let V=W(K).function(J),Y,H;return Y=V[0],H=V[1],[Y,QQ(G,H)]})}var g6=void 0,k6={};function a(Z){return Z}function xW(Z){if(/^[-+]?(\d+)$/.test(Z))return new j(parseInt(Z));else return new E(g6)}function GZ(Z){return Z.toString()}function wJ(Z,Q,W){return Z.replaceAll(Q,W)}function kJ(Z){if(Z==="")return 0;let Q=bJ(Z);if(Q){let W=0;for(let J of Q)W++;return W}else return Z.match(/./gsu).length}function KW(Z){let Q=bJ(Z);if(Q)return OZ.fromArray(Array.from(Q).map((W)=>W.segment));else return OZ.fromArray(Z.match(/./gsu))}var y6=void 0;function bJ(Z){if(globalThis.Intl&&Intl.Segmenter)return y6||=new Intl.Segmenter,y6.segment(Z)[Symbol.iterator]()}function EJ(Z,Q){return OZ.fromArray(Z.split(Q))}function xJ(Z,Q,W){if(W<=0||Q>=Z.length)return"";let J=bJ(Z);if(J){while(Q-- >0)J.next();let X="";while(W-- >0){let K=J.next().value;if(K===void 0)break;X+=K.segment}return X}else return Z.match(/./gsu).slice(Q,Q+W).join("")}function yJ(Z,Q){return Z.startsWith(Q)}var b6=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),yX=new RegExp(`^[${b6}]*`),gX=new RegExp(`[${b6}]*$`);function B6(Z){return Z.replace(yX,"")}function A6(Z){return Z.replace(gX,"")}function DZ(){return qZ.new()}function hW(Z){return Z.size}function UQ(Z){return OZ.fromArray(Z.entries())}function MZ(Z,Q){let W=Z.get(Q,k6);if(W===k6)return new E(g6);return new j(W)}function f6(Z,Q,W){return W.set(Z,Q)}function xQ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof EQ)return"Result";else if(Z instanceof OZ)return"List";else if(Z instanceof aQ)return"BitArray";else if(Z instanceof qZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function ZW(Z,Q){return Number(BigInt(Z)&BigInt(Q))}function kW(Z,Q){return Number(BigInt(Z)|BigInt(Q))}function yW(Z,Q){return Number(BigInt(Z)^BigInt(Q))}function F6(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let W=Q.indexOf("e");if(W>=0)return Q.slice(0,W)+".0"+Q.slice(W);else return Q+".0"}}class bX{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#K(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return F6(Z);if(Z instanceof qJ)return this.#G(Z);if(Z instanceof aQ)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let W;if(Array.isArray(Z))W=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof OZ)W=this.#Q(Z);else if(Z instanceof R)W=this.#J(Z);else if(Z instanceof qZ)W=this.#W(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else W=this.#X(Z);return this.#Z.delete(Z),W}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",W=[];for(let K of Object.keys(Z))W.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let J=W.length?" "+W.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#W(Z){let Q="dict.from_list([",W=!0;return Z.forEach((J,X)=>{if(!W)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",W=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((W)=>{let J=this.inspect(Z[W]);return isNaN(parseInt(W))?`${W}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof I)return"[]";let Q='charlist.from_string("',W="[",J=Z;while(J instanceof bZ){let X=J.head;if(J=J.tail,W!=="[")W+=", ";if(W+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return W+"]"}#K(Z){let Q='"';for(let W=0;W<Z.length;W++){let J=Z[W];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let W=0;W<Z.byteSize-1;W++)Q+=Z.byteAt(W).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let W=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-W,Q+=`:size(${W})`}return Q+=">>",Q}}function w6(Z,Q){if(Z instanceof qZ||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new j(new jZ);return new j(new HZ(X))}let W=Number.isInteger(Q);if(W&&Q>=0&&Q<8&&Z instanceof OZ){let J=0;for(let X of Z){if(J===Q)return new j(new HZ(X));J++}return new E("Indexable")}if(W&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new j(new HZ(Z[Q]));return new j(new jZ)}return new E(W?"Indexable":"Dict")}function E6(Z){if(Number.isInteger(Z))return new j(Z);return new E(0)}function x6(Z){if(typeof Z==="string")return new j(Z);return new E("")}function IZ(Z,Q,W){return f6(Q,W,Z)}function fX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return J;else{let X=W.head;Z=W.tail,Q=F(X,J)}}}function hX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return fX(J,q([]));else{let X=W.tail,K=W.head[0];Z=X,Q=F(K,J)}}}function YW(Z){return hX(UQ(Z),q([]))}function _X(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return X;else{let G=J.tail,V=J.head[0],Y=J.head[1];Z=G,Q=K(X,V,Y),W=K}}}function DQ(Z,Q,W){return _X(UQ(Z),Q,W)}function vX(Z,Q){let W=(J,X,K)=>{return IZ(J,X,Z(X,K))};return DQ(Q,DZ(),W)}function h6(Z,Q){return vX(Q,Z)}function _6(Z){if(Z instanceof j)return!0;else return!1}class fJ extends R{constructor(Z){super();this.dict=Z}}var mX=void 0;function hJ(){return new fJ(DZ())}function _J(Z){return hW(Z.dict)}function v6(Z,Q){let W=Z.dict,J=MZ(W,Q);return _6(J)}function m6(Z,Q,W){return DQ(Z.dict,Q,(J,X,K)=>{return W(J,X)})}function $6(Z){let Q=p(Z,DZ(),(W,J)=>{return IZ(W,J,mX)});return new fJ(Q)}function p6(Z,Q,W){if(Z)return Q;else return W()}function ZZ(Z){return Z}function hQ(Z){return Z}function HW(Z){return hQ(Z)}function mJ(Z){return hQ(Z)}var xZ=()=>globalThis?.document,cW="http://www.w3.org/1999/xhtml",pW=1,$J=3;var s6=!!globalThis.HTMLElement?.prototype?.moveBefore;var g=q([]),dW=new jZ;var nX=new ZQ,lX=new t,aX=new e;function sW(Z,Q){if(Z.name===Q.name)return aX;else if(Z.name<Q.name)return lX;else return nX}class nZ extends R{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class MW extends R{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class BZ extends R{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.name=Q,this.handler=W,this.include=J,this.prevent_default=X,this.stop_propagation=K,this.debounce=G,this.throttle=V}}class UW extends R{constructor(Z,Q,W){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=W}}class a6 extends R{constructor(Z){super();this.kind=Z}}var cJ=0,pJ=1,dJ=2,sJ=0,rJ=new a6(sJ);var iJ=2;function WK(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof I)return J;else{let X=W.head;if(X instanceof nZ){let K=X.name;if(K==="")Z=W.tail,Q=J;else if(K==="class"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof I){let Y=X;Z=V,Q=F(Y,J)}else{let Y=V.head;if(Y instanceof nZ)if(Y.name==="class"){let M=X.kind,U=G,N=V.tail,O=Y.value,A=U+" "+O,T=new nZ(M,"class",A);Z=F(T,N),Q=J}else{let M=X;Z=V,Q=F(M,J)}else{let H=X;Z=V,Q=F(H,J)}}}}else if(K==="style"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof I){let Y=X;Z=V,Q=F(Y,J)}else{let Y=V.head;if(Y instanceof nZ)if(Y.name==="style"){let M=X.kind,U=G,N=V.tail,O=Y.value,A=U+";"+O,T=new nZ(M,"style",A);Z=F(T,N),Q=J}else{let M=X;Z=V,Q=F(M,J)}else{let H=X;Z=V,Q=F(H,J)}}}}else{let G=X;Z=W.tail,Q=F(G,J)}}else{let K=X;Z=W.tail,Q=F(K,J)}}}}function o6(Z){if(Z instanceof I)return Z;else if(Z.tail instanceof I)return Z;else{let J=fW(Z,(X,K)=>{return sW(K,X)});return WK(J,g)}}function t6(Z,Q){return new nZ(cJ,Z,Q)}function e6(Z,Q){return new MW(pJ,Z,Q)}function Z9(Z,Q,W,J,X,K,G){return new BZ(dJ,Z,Q,W,J,X,K,G)}function lZ(Z,Q){return t6(Z,Q)}function nJ(Z,Q){return e6(Z,Q)}function XK(Z,Q){if(Q)return lZ(Z,"");else return nJ(Z,mJ(!1))}function Q9(Z){return lZ("class",Z)}function rW(Z){return lZ("id",Z)}function s(Z,Q){if(Z==="")return Q9("");else if(Q==="")return Q9("");else return lZ("style",Z+":"+Q+";")}function FW(Z){return lZ("href",Z)}function lJ(Z){return XK("checked",Z)}function aJ(Z){return lZ("for",Z)}function oJ(Z){return lZ("type",Z)}class nW extends R{constructor(Z,Q,W){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=W}}class W9 extends R{constructor(Z,Q,W,J,X){super();this.dispatch=Z,this.emit=Q,this.select=W,this.root=J,this.provide=X}}var iW=new nW(q([]),q([]),q([]));function J9(Z,Q,W,J,X,K){let G=new W9(Q,W,J,X,K);return N6(Z.synchronous,(V)=>{return V(G)})}function JQ(){return iW}function tJ(Z){return new nW(q([(W)=>{let J=W.dispatch;return Z(J)}]),iW.before_paint,iW.after_paint)}function X9(Z){return p(Z,iW,(Q,W)=>{return new nW(p(W.synchronous,Q.synchronous,bW),p(W.before_paint,Q.before_paint,bW),p(W.after_paint,Q.after_paint,bW))})}function PZ(){return null}function qW(Z,Q){let W=Z?.get(Q);if(W!=null)return new j(W);else return new E(void 0)}function RW(Z,Q){return Z&&Z.has(Q)}function BQ(Z,Q,W){return Z??=new Map,Z.set(Q,W),Z}function eJ(Z,Q){return Z?.delete(Q),Z}class Z8 extends R{}class Q8 extends R{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class K9 extends R{constructor(Z,Q){super();this.index=Z,this.parent=Q}}var lW=new Z8,IW="\t",W8=`
`;function KK(Z,Q){while(!0){let W=Z,J=Q;if(J instanceof I)return!1;else{let{head:X,tail:K}=J,G=yJ(W,X);if(G)return G;else Z=W,Q=K}}}function _Z(Z,Q,W){if(W==="")return new K9(Q,Z);else return new Q8(W,Z)}function G9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof Z8)if(J instanceof I)return"";else{let X=J.tail;return sZ(X)}else if(W instanceof Q8){let X=W.key;Z=W.parent,Q=F(IW,F(X,J))}else{let X=W.index;Z=W.parent,Q=F(IW,F(GZ(X),J))}}}function GK(Z){return G9(Z,q([]))}function V9(Z,Q){if(Q instanceof I)return!1;else return KK(GK(Z),Q)}function J8(Z,Q){return G9(Z,q([W8,Q]))}class vZ extends R{constructor(Z,Q,W,J,X){super();this.kind=Z,this.key=Q,this.mapper=W,this.children=J,this.keyed_children=X}}class mZ extends R{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.children=G,this.keyed_children=V,this.self_closing=Y,this.void=H}}class $Z extends R{constructor(Z,Q,W,J){super();this.kind=Z,this.key=Q,this.mapper=W,this.content=J}}class $Q extends R{constructor(Z,Q,W,J,X,K,G){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.inner_html=G}}var uZ=0,AQ=1,uQ=2,H9=3;function NW(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function M9(Z,Q){if(Q instanceof vZ)return new vZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof mZ)return new mZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof $Z)return new $Z(Q.kind,Z,Q.mapper,Q.content);else return new $Q(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}function X8(Z,Q,W,J){return new vZ(uZ,Z,Q,W,J)}function OW(Z,Q,W,J,X,K,G,V,Y){return new mZ(AQ,Z,Q,W,J,o6(X),K,G,V,Y)}function K8(Z,Q,W){return new $Z(uQ,Z,Q,W)}var G8=(Z,Q)=>Z===Q,cZ=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let W=typeof Z;if(W!==typeof Q)return!1;if(W!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return HK(Z,Q);return MK(Z,Q)},HK=(Z,Q)=>{let W=Z.length;if(W!==Q.length)return!1;while(W--)if(!cZ(Z[W],Q[W]))return!1;return!0},MK=(Z,Q)=>{let W=Object.keys(Z),J=W.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=W[J];if(!Object.hasOwn(Q,X))return!1;if(!cZ(Z[X],Q[X]))return!1}return!0};class XQ extends R{constructor(Z,Q,W){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=W}}class H8 extends R{constructor(Z,Q){super();this.path=Z,this.handler=Q}}class V8 extends R{constructor(Z){super();this.path=Z}}function M8(){return new XQ(PZ(),g,g)}function R9(Z){return new XQ(Z.handlers,Z.next_dispatched_paths,g)}function z9(Z,Q,W){return eJ(Z,J8(Q,W))}function aW(Z,Q,W){let J=z9(Z.handlers,Q,W);return new XQ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function U9(Z,Q,W){return p(W,Z,(J,X)=>{if(X instanceof BZ){let K=X.name;return z9(J,Q,K)}else return J})}function U8(Z,Q,W,J){let X=qW(Z.handlers,Q+W8+W);if(X instanceof j){let K=X[0],G=MQ(J,K);if(G instanceof j){let V=G[0];return new H8(Q,V)}else return new V8(Q)}else return new V8(Q)}function F8(Z,Q){let W=F(Q.path,Z.next_dispatched_paths),J=new XQ(Z.handlers,Z.dispatched_paths,W);if(Q instanceof H8){let X=Q.handler;return[J,new j(X)]}else return[J,new E(void 0)]}function q8(Z,Q,W,J){let X=U8(Z,Q,W,J);return((K)=>{return F8(Z,K)})(X)}function oW(Z,Q){return V9(Q,Z.dispatched_paths)}function I9(Z,Q,W,J,X){return BQ(Z,J8(W,J),VW(X,(K)=>{return new UW(K.prevent_default,K.stop_propagation,ZZ(Q)(K.message))}))}function cQ(Z,Q,W,J,X){let K=I9(Z.handlers,Q,W,J,X);return new XQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function F9(Z,Q,W,J){return p(J,Z,(X,K)=>{if(K instanceof BZ){let{name:G,handler:V}=K;return I9(X,Q,W,G,V)}else return X})}function FQ(Z,Q){let W=G8(Z,ZZ);if(G8(Q,ZZ))return Z;else if(W)return Q;else return(X)=>{return Z(Q(X))}}function q9(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(V instanceof I)return X;else{let{head:Y,tail:H}=V;Z=N9(X,K,G,Y),Q=K,W=G+1,J=H}}}function N9(Z,Q,W,J){if(J instanceof vZ){let X=J.children,K=_Z(Q,W,J.key);return q9(Z,K,0,X)}else if(J instanceof mZ){let{attributes:X,children:K}=J,G=_Z(Q,W,J.key),Y=U9(Z,G,X);return q9(Y,G,0,K)}else if(J instanceof $Z)return Z;else{let X=J.attributes,K=_Z(Q,W,J.key);return U9(Z,K,X)}}function KQ(Z,Q,W,J){let X=N9(Z.handlers,Q,W,J);return new XQ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function Y8(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(H instanceof I)return K;else{let{head:M,tail:U}=H;Z=O9(K,G,V,Y,M),Q=G,W=V,J=Y+1,X=U}}}function O9(Z,Q,W,J,X){if(X instanceof vZ){let K=X.children,G=_Z(W,J,X.key),V=FQ(Q,X.mapper);return Y8(Z,V,G,0,K)}else if(X instanceof mZ){let{attributes:K,children:G}=X,V=_Z(W,J,X.key),Y=FQ(Q,X.mapper),M=F9(Z,Y,V,K);return Y8(M,Y,V,0,G)}else if(X instanceof $Z)return Z;else{let K=X.attributes,G=_Z(W,J,X.key),V=FQ(Q,X.mapper);return F9(Z,V,G,K)}}function GQ(Z,Q,W,J,X){let K=O9(Z.handlers,Q,W,J,X);return new XQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function j9(Z){return GQ(M8(),ZZ,lW,0,Z)}function D9(Z,Q,W,J,X){let K=Y8(Z.handlers,Q,W,J,X);return new XQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function LZ(Z,Q,W){return OW("",ZZ,"",Z,Q,W,PZ(),!1,NW(Z,""))}function jW(Z){return K8("",ZZ,Z)}function B9(){return K8("",ZZ,"")}function i(Z){return jW(Z)}function A9(Z,Q){return LZ("article",Z,Q)}function T9(Z,Q){return LZ("h1",Z,Q)}function BW(Z,Q){return LZ("div",Z,Q)}function R8(Z,Q){return LZ("p",Z,Q)}function z8(Z,Q){return LZ("pre",Z,Q)}function AW(Z,Q){return LZ("a",Z,Q)}function tW(Z,Q){return LZ("span",Z,Q)}function P9(Z,Q){return LZ("button",Z,Q)}function I8(Z){return LZ("input",Z,g)}function N8(Z,Q){return LZ("label",Z,Q)}function L9(Z,Q){return LZ("textarea",F(nJ("value",HW(Q)),Z),q([jW(Q)]))}class TW extends R{constructor(Z,Q,W,J){super();this.index=Z,this.removed=Q,this.changes=W,this.children=J}}class C9 extends R{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class w9 extends R{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class E9 extends R{constructor(Z,Q,W){super();this.kind=Z,this.added=Q,this.removed=W}}class x9 extends R{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.before=W}}class k9 extends R{constructor(Z,Q,W){super();this.kind=Z,this.index=Q,this.with=W}}class y9 extends R{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class g9 extends R{constructor(Z,Q,W){super();this.kind=Z,this.children=Q,this.before=W}}var O8=0,j8=1,D8=2,B8=3,A8=4,T8=5,P8=6;function L8(Z,Q,W,J){return new TW(Z,Q,W,J)}function b9(Z){return new C9(O8,Z)}function f9(Z){return new w9(j8,Z)}function S8(Z,Q){return new E9(D8,Z,Q)}function h9(Z,Q){return new x9(B8,Z,Q)}function _9(Z){return new y9(A8,Z)}function PQ(Z,Q){return new k9(T8,Z,Q)}function C8(Z,Q){return new g9(P8,Z,Q)}class m9 extends R{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=W,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=K,this.provided_contexts=G,this.vdom=V}}class $9 extends R{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class u9 extends R{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.data=W}}class c9 extends R{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}class eW extends R{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class ZJ extends R{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class QJ extends R{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class WJ extends R{constructor(Z,Q,W,J){super();this.kind=Z,this.path=Q,this.name=W,this.event=J}}class w8 extends R{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}var RK=0,zK=1,IK=2,NK=3;function p9(Z,Q,W,J,X,K,G){return new m9(RK,Z,Q,W,J,X,K,G)}function E8(Z){return new $9(zK,Z)}function d9(Z,Q){return new u9(IK,Z,Q)}function s9(Z,Q){return new c9(NK,Z,Q)}class JJ extends R{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class n9 extends R{constructor(Z,Q,W){super();this.added=Z,this.removed=Q,this.events=W}}function OK(Z,Q,W,J){if(W==="input"&&Q==="")return oW(Z,J);else if(W==="select"&&Q==="")return oW(Z,J);else if(W==="textarea"&&Q==="")return oW(Z,J);else return!1}function i9(Z,Q,W,J,X,K,G,V){while(!0){let Y=Z,H=Q,M=W,U=J,N=X,O=K,A=G,T=V;if(N instanceof I)if(O instanceof I)return new n9(A,T,U);else{let D=O.head;if(D instanceof BZ){let P=D,B=O.tail,L=D.name,w=D.handler,z=F(P,A),S=cQ(U,M,H,L,w);Z=Y,Q=H,W=M,J=S,X=N,K=B,G=z,V=T}else{let P=D,B=O.tail,L=F(P,A);Z=Y,Q=H,W=M,J=U,X=N,K=B,G=L,V=T}}else if(O instanceof I){let D=N.head;if(D instanceof BZ){let P=D,B=N.tail,L=D.name,w=F(P,T),z=aW(U,H,L);Z=Y,Q=H,W=M,J=z,X=B,K=O,G=A,V=w}else{let P=D,B=N.tail,L=F(P,T);Z=Y,Q=H,W=M,J=U,X=B,K=O,G=A,V=L}}else{let{head:D,tail:P}=N,B=O.head,L=O.tail,w=sW(D,B);if(w instanceof t)if(D instanceof BZ){let z=D.name,S=F(D,T),C=aW(U,H,z);Z=Y,Q=H,W=M,J=C,X=P,K=O,G=A,V=S}else{let z=F(D,T);Z=Y,Q=H,W=M,J=U,X=P,K=O,G=A,V=z}else if(w instanceof e)if(D instanceof nZ)if(B instanceof nZ){let z,S=B.name;if(S==="value")z=Y||D.value!==B.value;else if(S==="checked")z=Y||D.value!==B.value;else if(S==="selected")z=Y||D.value!==B.value;else z=D.value!==B.value;let C=z,k;if(C)k=F(B,A);else k=A;let y=k;Z=Y,Q=H,W=M,J=U,X=P,K=L,G=y,V=T}else if(B instanceof BZ){let{name:z,handler:S}=B,C=F(B,A),k=F(D,T),y=cQ(U,M,H,z,S);Z=Y,Q=H,W=M,J=y,X=P,K=L,G=C,V=k}else{let z=F(B,A),S=F(D,T);Z=Y,Q=H,W=M,J=U,X=P,K=L,G=z,V=S}else if(D instanceof MW)if(B instanceof MW){let z,S=B.name;if(S==="scrollLeft")z=!0;else if(S==="scrollRight")z=!0;else if(S==="value")z=Y||!cZ(D.value,B.value);else if(S==="checked")z=Y||!cZ(D.value,B.value);else if(S==="selected")z=Y||!cZ(D.value,B.value);else z=!cZ(D.value,B.value);let C=z,k;if(C)k=F(B,A);else k=A;let y=k;Z=Y,Q=H,W=M,J=U,X=P,K=L,G=y,V=T}else if(B instanceof BZ){let{name:z,handler:S}=B,C=F(B,A),k=F(D,T),y=cQ(U,M,H,z,S);Z=Y,Q=H,W=M,J=y,X=P,K=L,G=C,V=k}else{let z=F(B,A),S=F(D,T);Z=Y,Q=H,W=M,J=U,X=P,K=L,G=z,V=S}else if(B instanceof BZ){let{name:z,handler:S}=B,C=D.prevent_default.kind!==B.prevent_default.kind||D.stop_propagation.kind!==B.stop_propagation.kind||D.debounce!==B.debounce||D.throttle!==B.throttle,k;if(C)k=F(B,A);else k=A;let y=k,v=cQ(U,M,H,z,S);Z=Y,Q=H,W=M,J=v,X=P,K=L,G=y,V=T}else{let z=D.name,S=F(B,A),C=F(D,T),k=aW(U,H,z);Z=Y,Q=H,W=M,J=k,X=P,K=L,G=S,V=C}else if(B instanceof BZ){let{name:z,handler:S}=B,C=F(B,A),k=cQ(U,M,H,z,S);Z=Y,Q=H,W=M,J=k,X=N,K=L,G=C,V=T}else{let z=F(B,A);Z=Y,Q=H,W=M,J=U,X=N,K=L,G=z,V=T}}}}function x8(Z,Q,W,J,X,K,G,V,Y,H,M,U,N,O){while(!0){let A=Z,T=Q,D=W,P=J,B=X,L=K,w=G,z=V,S=Y,C=H,k=M,y=U,v=N,l=O;if(A instanceof I)if(D instanceof I)return new JJ(new TW(S,w,k,y),l);else{let UZ=D9(l,v,C,z,D),FZ=C8(D,z-L),d=F(FZ,k);return new JJ(new TW(S,w,d,y),UZ)}else if(D instanceof I){let{head:UZ,tail:FZ}=A,d;if(UZ.key===""||!RW(B,UZ.key))d=w+1;else d=w;let b=d,f=KQ(l,C,z,UZ);Z=FZ,Q=T,W=D,J=P,X=B,K=L,G=b,V=z,Y=S,H=C,M=k,U=y,N=v,O=f}else{let UZ=A.head,FZ=D.head;if(UZ.key!==FZ.key){let d=A.tail,$=D.tail,b=qW(T,FZ.key);if(RW(P,UZ.key))if(b instanceof j){let x=b[0];if(RW(B,UZ.key))Z=d,Q=T,W=D,J=P,X=B,K=L-1,G=w,V=z,Y=S,H=C,M=k,U=y,N=v,O=l;else{let u=z-L,_=F(h9(FZ.key,u),k),n=BQ(B,FZ.key,void 0),c=L+1;Z=F(x,A),Q=T,W=D,J=P,X=n,K=c,G=w,V=z,Y=S,H=C,M=_,U=y,N=v,O=l}}else{let x=z-L,h=GQ(l,v,C,z,FZ),u=C8(q([FZ]),x),_=F(u,k);Z=A,Q=T,W=$,J=P,X=B,K=L+1,G=w,V=z+1,Y=S,H=C,M=_,U=y,N=v,O=h}else if(b instanceof j){let x=z-L,h=F(_9(x),k),u=KQ(l,C,z,UZ),_=L-1;Z=d,Q=T,W=D,J=P,X=B,K=_,G=w,V=z,Y=S,H=C,M=h,U=y,N=v,O=u}else{let x=PQ(z-L,FZ),h,_=KQ(l,C,z,UZ);h=GQ(_,v,C,z,FZ);let n=h;Z=d,Q=T,W=$,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=F(x,k),U=y,N=v,O=n}}else{let d=A.head;if(d instanceof vZ){let $=D.head;if($ instanceof vZ){let b=d,f=A.tail,x=$,h=D.tail,u=FQ(v,x.mapper),_=_Z(C,z,x.key),n=x8(b.children,b.keyed_children,x.children,x.keyed_children,PZ(),0,0,0,z,_,g,g,u,l),c,m=n.patch;if(m.changes instanceof I)if(m.children instanceof I)if(m.removed===0)c=y;else c=F(n.patch,y);else c=F(n.patch,y);else c=F(n.patch,y);let o=c;Z=f,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=k,U=o,N=v,O=n.events}else{let b=d,f=A.tail,x=$,h=D.tail,u=PQ(z-L,x),_,c=KQ(l,C,z,b);_=GQ(c,v,C,z,x);let m=_;Z=f,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=F(u,k),U=y,N=v,O=m}}else if(d instanceof mZ){let $=D.head;if($ instanceof mZ){let b=d,f=$;if(b.namespace===f.namespace&&b.tag===f.tag){let x=A.tail,h=D.tail,u=FQ(v,f.mapper),_=_Z(C,z,f.key),n=OK(l,f.namespace,f.tag,_),c=i9(n,_,u,l,b.attributes,f.attributes,g,g),m,YZ,o;m=c.added,YZ=c.removed,o=c.events;let SZ;if(m instanceof I&&YZ instanceof I)SZ=g;else SZ=q([S8(m,YZ)]);let QZ=SZ,gZ=x8(b.children,b.keyed_children,f.children,f.keyed_children,PZ(),0,0,0,z,_,QZ,g,u,o),JZ,AZ=gZ.patch;if(AZ.changes instanceof I)if(AZ.children instanceof I)if(AZ.removed===0)JZ=y;else JZ=F(gZ.patch,y);else JZ=F(gZ.patch,y);else JZ=F(gZ.patch,y);let e8=JZ;Z=x,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=k,U=e8,N=v,O=gZ.events}else{let x=d,h=A.tail,u=$,_=D.tail,n=PQ(z-L,u),c,YZ=KQ(l,C,z,x);c=GQ(YZ,v,C,z,u);let o=c;Z=h,Q=T,W=_,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=F(n,k),U=y,N=v,O=o}}else{let b=d,f=A.tail,x=$,h=D.tail,u=PQ(z-L,x),_,c=KQ(l,C,z,b);_=GQ(c,v,C,z,x);let m=_;Z=f,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=F(u,k),U=y,N=v,O=m}}else if(d instanceof $Z){let $=D.head;if($ instanceof $Z){let b=d,f=$;if(b.content===f.content){let x=A.tail,h=D.tail;Z=x,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=k,U=y,N=v,O=l}else{let x=A.tail,h=$,u=D.tail,_=L8(z,0,q([b9(h.content)]),g);Z=x,Q=T,W=u,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=k,U=F(_,y),N=v,O=l}}else{let b=d,f=A.tail,x=$,h=D.tail,u=PQ(z-L,x),_,c=KQ(l,C,z,b);_=GQ(c,v,C,z,x);let m=_;Z=f,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=F(u,k),U=y,N=v,O=m}}else{let $=D.head;if($ instanceof $Q){let b=d,f=A.tail,x=$,h=D.tail,u=FQ(v,x.mapper),_=_Z(C,z,x.key),n=i9(!1,_,u,l,b.attributes,x.attributes,g,g),c,m,YZ;c=n.added,m=n.removed,YZ=n.events;let o;if(c instanceof I&&m instanceof I)o=g;else o=q([S8(c,m)]);let SZ=o,QZ;if(b.inner_html===x.inner_html)QZ=SZ;else QZ=F(f9(x.inner_html),SZ);let JZ=QZ,AZ;if(JZ instanceof I)AZ=y;else AZ=F(L8(z,0,JZ,q([])),y);let nQ=AZ;Z=f,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=k,U=nQ,N=v,O=YZ}else{let b=d,f=A.tail,x=$,h=D.tail,u=PQ(z-L,x),_,c=KQ(l,C,z,b);_=GQ(c,v,C,z,x);let m=_;Z=f,Q=T,W=h,J=P,X=B,K=L,G=w,V=z+1,Y=S,H=C,M=F(u,k),U=y,N=v,O=m}}}}}}function dQ(Z,Q,W){return x8(q([Q]),PZ(),q([W]),PZ(),PZ(),0,0,0,0,lW,g,g,ZZ,R9(Z))}var{setTimeout:jK,clearTimeout:k8}=globalThis,DK=(Z,Q)=>xZ().createElementNS(Z,Q),BK=(Z)=>xZ().createTextNode(Z),AK=()=>xZ().createDocumentFragment(),sQ=(Z,Q,W)=>Z.insertBefore(Q,W),a9=s6?(Z,Q,W)=>Z.moveBefore(Q,W):sQ,TK=(Z,Q)=>Z.removeChild(Q),PK=(Z,Q)=>Z.getAttribute(Q),o9=(Z,Q,W)=>Z.setAttribute(Q,W),LK=(Z,Q)=>Z.removeAttribute(Q),SK=(Z,Q,W,J)=>Z.addEventListener(Q,W,J),t9=(Z,Q,W)=>Z.removeEventListener(Q,W),CK=(Z,Q)=>Z.innerHTML=Q,wK=(Z,Q)=>Z.data=Q,VQ=Symbol("lustre");class Q0{constructor(Z,Q,W,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=W,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===uZ?this.node.parentNode:this.node}}var YQ=(Z,Q,W,J,X)=>{let K=new Q0(Z,Q,W,X);return W[VQ]=K,Q?.children.splice(J,0,K),K},EK=(Z)=>{let Q="";for(let W=Z[VQ];W.parent;W=W.parent)if(W.key)Q=`${IW}${W.key}${Q}`;else{let J=W.parent.children.indexOf(W);Q=`${IW}${J}${Q}`}return Q.slice(1)};class g8{#Z=null;#X;#W;#J=!1;constructor(Z,Q,W,{exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#W=W,this.#J=J}mount(Z){YQ(AQ,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[VQ],0,Z)}push(Z){this.#Q.push({node:this.#Z[VQ],patch:Z}),this.#K()}#Q=[];#K(){let Z=this.#Q;while(Z.length){let{node:Q,patch:W}=Z.pop(),{children:J}=Q,{changes:X,removed:K,children:G}=W;if(LQ(X,(V)=>this.#G(Q,V)),K)this.#F(Q,J.length-K,K);LQ(G,(V)=>{let Y=J[V.index|0];this.#Q.push({node:Y,patch:V})})}}#G(Z,Q){switch(Q.kind){case O8:this.#T(Z,Q);break;case j8:this.#j(Z,Q);break;case D8:this.#R(Z,Q);break;case B8:this.#M(Z,Q);break;case A8:this.#I(Z,Q);break;case T8:this.#U(Z,Q);break;case P8:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:W}){let J=AK(),X=this.#H(Z,W);this.#N(J,null,Z,W|0,Q),sQ(Z.parentNode,J,X)}#U(Z,{index:Q,with:W}){this.#F(Z,Q|0,1);let J=this.#H(Z,Q);this.#O(Z.parentNode,J,Z,Q|0,W)}#H(Z,Q){Q=Q|0;let{children:W}=Z,J=W.length;if(Q<J)return W[Q].node;let X=W[J-1];if(!X&&Z.kind!==uZ)return null;if(!X)X=Z;while(X.kind===uZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#M(Z,{key:Q,before:W}){W=W|0;let{children:J,parentNode:X}=Z,K=J[W].node,G=J[W];for(let M=W+1;M<J.length;++M){let U=J[M];if(J[M]=G,G=U,U.key===Q){J[W]=U;break}}let{kind:V,node:Y,children:H}=G;if(a9(X,Y,K),V===uZ)this.#V(X,H,K)}#V(Z,Q,W){for(let J=0;J<Q.length;++J){let{kind:X,node:K,children:G}=Q[J];if(a9(Z,K,W),X===uZ)this.#V(Z,G,W)}}#I(Z,{index:Q}){this.#F(Z,Q,1)}#F(Z,Q,W){let{children:J,parentNode:X}=Z,K=J.splice(Q,W);for(let G=0;G<K.length;++G){let{kind:V,node:Y,children:H}=K[G];if(TK(X,Y),this.#q(K[G]),V===uZ)K.push(...H)}}#q(Z){let{debouncers:Q,children:W}=Z;for(let{timeout:J}of Q.values())if(J)k8(J);Q.clear(),LQ(W,(J)=>this.#q(J))}#R({node:Z,handlers:Q,throttles:W,debouncers:J},{added:X,removed:K}){LQ(K,({name:G})=>{if(Q.delete(G))t9(Z,G,y8),this.#z(W,G,0),this.#z(J,G,0);else LK(Z,G),Z0[G]?.removed?.(Z,G)}),LQ(X,(G)=>this.#A(Z,G))}#T({node:Z},{content:Q}){wK(Z,Q??"")}#j({node:Z},{inner_html:Q}){CK(Z,Q??"")}#N(Z,Q,W,J,X){LQ(X,(K)=>this.#O(Z,Q,W,J++,K))}#O(Z,Q,W,J,X){switch(X.kind){case AQ:{let K=this.#D(W,J,X);this.#N(K,null,K[VQ],0,X.children),sQ(Z,K,Q);break}case uQ:{let K=this.#B(W,J,X);sQ(Z,K,Q);break}case uZ:{let K=this.#B(W,J,X);sQ(Z,K,Q),this.#N(Z,Q,K[VQ],0,X.children);break}case H9:{let K=this.#D(W,J,X);this.#j({node:K},X),sQ(Z,K,Q);break}}}#D(Z,Q,{kind:W,key:J,tag:X,namespace:K,attributes:G}){let V=DK(K||cW,X);if(YQ(W,Z,V,Q,J),this.#J&&J)o9(V,"data-lustre-key",J);return LQ(G,(Y)=>this.#A(V,Y)),V}#B(Z,Q,{kind:W,key:J,content:X}){let K=BK(X??"");return YQ(W,Z,K,Q,J),K}#A(Z,Q){let{debouncers:W,handlers:J,throttles:X}=Z[VQ],{kind:K,name:G,value:V,prevent_default:Y,debounce:H,throttle:M}=Q;switch(K){case cJ:{let U=V??"";if(G==="virtual:defaultValue"){Z.defaultValue=U;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(U!==PK(Z,G))o9(Z,G,U);Z0[G]?.added?.(Z,U);break}case pJ:Z[G]=V;break;case dJ:{if(J.has(G))t9(Z,G,y8);let U=Y.kind===sJ;SK(Z,G,y8,{passive:U}),this.#z(X,G,M),this.#z(W,G,H),J.set(G,(N)=>this.#P(Q,N));break}}}#z(Z,Q,W){let J=Z.get(Q);if(W>0)if(J)J.delay=W;else Z.set(Q,{delay:W});else if(J){let{timeout:X}=J;if(X)k8(X);Z.delete(Q)}}#P(Z,Q){let{currentTarget:W,type:J}=Q,{debouncers:X,throttles:K}=W[VQ],G=EK(W),{prevent_default:V,stop_propagation:Y,include:H}=Z;if(V.kind===iJ)Q.preventDefault();if(Y.kind===iJ)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let M=this.#X(Q,G,J,H),U=K.get(J);if(U){let O=Date.now(),A=U.last||0;if(O>A+U.delay)U.last=O,U.lastEvent=Q,this.#W(Q,M)}let N=X.get(J);if(N)k8(N.timeout),N.timeout=jK(()=>{if(Q===K.get(J)?.lastEvent)return;this.#W(Q,M)},N.delay);if(!U&&!N)this.#W(Q,M)}}var LQ=(Z,Q)=>{if(Array.isArray(Z))for(let W=0;W<Z.length;W++)Q(Z[W]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},y8=(Z)=>{let{currentTarget:Q,type:W}=Z;Q[VQ].handlers.get(W)(Z)},e9=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},xK=(Z)=>{return{added(Q,W){Q[Z]=W}}},Z0={checked:e9("checked"),selected:e9("selected"),value:xK("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function kK(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof I)return[X,r(K)];else{let G=J.tail,V=J.head[0],Y=J.head[1],H=M9(V,Y),M;if(V==="")M=X;else M=BQ(X,V,H);let U=M,N=F(H,K);Z=G,Q=U,W=N}}}function b8(Z){return kK(Z,PZ(),g)}function W0(Z,Q,W){let J=b8(W),X,K;return X=J[0],K=J[1],OW("",ZZ,"",Z,Q,K,X,!1,NW(Z,""))}function J0(Z,Q,W,J){let X=b8(J),K,G;return K=X[0],G=X[1],OW("",ZZ,Z,Q,W,G,K,!1,NW(Q,Z))}function X0(Z){let Q=b8(Z),W,J;return W=Q[0],J=Q[1],X8("",ZZ,J,W)}var K0=(Z)=>{let Q=YQ(AQ,null,Z,0,null),W=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(G0(G))W+=1;if(W===0){let G=xZ().createTextNode("");return YQ(uQ,Q,G,0,null),Z.replaceChildren(G),B9()}if(W===1)return f8(Q,Z).head[1];let J=xZ().createTextNode(""),X=YQ(uZ,Q,J,0,null),K=f8(X,Z);return Z.insertBefore(J,Z.firstChild),X0(K)},G0=(Z)=>{switch(Z.nodeType){case pW:return!0;case $J:return!!Z.data;default:return!1}},yK=(Z,Q,W,J)=>{if(!G0(Q))return null;switch(Q.nodeType){case pW:{let X=YQ(AQ,Z,Q,J,W),K=Q.localName,G=Q.namespaceURI,V=!G||G===cW;if(V&&gK.includes(K))bK(K,Q);let Y=fK(Q),H=f8(X,Q);return V?W0(K,Y,H):J0(G,K,Y,H)}case $J:return YQ(uQ,Z,Q,J,null),jW(Q.data);default:return null}},gK=["input","select","textarea"],bK=(Z,Q)=>{let{value:W,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!W)return;queueMicrotask(()=>{if(Q.value=W,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),xZ().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},f8=(Z,Q)=>{let W=null,J=Q.firstChild,X=null,K=0;while(J){let G=J.nodeType===pW?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let V=yK(Z,J,G,K),Y=J.nextSibling;if(V){let H=new bZ([G??"",V],null);if(X)X=X.tail=H;else X=W=H;K+=1}else Q.removeChild(J);J=Y}if(!X)return g;return X.tail=g,W},fK=(Z)=>{let Q=Z.attributes.length,W=g;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;W=new bZ(hK(J),W)}return W},hK=(Z)=>{let{localName:Q,value:W}=Z;return lZ(Q,W)};var PW=()=>!!xZ();class XJ{constructor(Z,[Q,W],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#W=X,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#G.has(V.context))return;V.stopImmediatePropagation();let Y=this.#G.get(V.context);if(V.subscribe){let H=()=>{Y.subscribers=Y.subscribers.filter((M)=>M!==V.callback)};Y.subscribers.push([V.callback,H]),V.callback(Y.value,H)}else V.callback(Y.value)});let K=(V,Y,H)=>U8(this.#Q,Y,H,V),G=(V,Y)=>{let[H,M]=F8(this.#Q,Y);if(this.#Q=H,M.isOk()){let U=M[0];if(U.stop_propagation)V.stopPropagation();if(U.prevent_default)V.preventDefault();this.dispatch(U.message,!1)}};this.#K=new g8(this.root,K,G),this.#J=K0(this.root),this.#Q=M8(),this.#q(W),this.#R()}root=null;dispatch(Z,Q=!1){if(this.#Y)this.#U.push(Z);else{let[W,J]=this.#W(this.#Z,Z);this.#Z=W,this.#F(J,Q)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#G.has(Z))this.#G.set(Z,{value:Q,subscribers:[]});else{let W=this.#G.get(Z);if(cZ(W.value,Q))return;W.value=Q;for(let J=W.subscribers.length-1;J>=0;J--){let[X,K]=W.subscribers[J];if(!X){W.subscribers.splice(J,1);continue}X(Q,K)}}}#Z;#X;#W;#J;#Q;#K;#G=new Map;#Y=!1;#U=[];#H=g;#M=g;#V=null;#I={dispatch:(Z)=>this.dispatch(Z),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#F(Z,Q=!1){if(this.#q(Z),!this.#V)if(Q)this.#V="sync",queueMicrotask(()=>this.#R());else this.#V=requestAnimationFrame(()=>this.#R())}#q(Z){this.#Y=!0;while(!0){for(let W=Z.synchronous;W.tail;W=W.tail)W.head(this.#I);if(this.#H=Y0(this.#H,Z.before_paint),this.#M=Y0(this.#M,Z.after_paint),!this.#U.length)break;let Q=this.#U.shift();[this.#Z,Z]=this.#W(this.#Z,Q)}this.#Y=!1}#R(){this.#V=null;let Z=this.#X(this.#Z),{patch:Q,events:W}=dQ(this.#Q,this.#J,Z);if(this.#Q=W,this.#J=Z,this.#K.push(Q),this.#H instanceof bZ){let J=V0(this.#H);this.#H=g,queueMicrotask(()=>{this.#F(J,!0)})}if(this.#M instanceof bZ){let J=V0(this.#M);this.#M=g,requestAnimationFrame(()=>{this.#F(J,!0)})}}}function V0(Z){return{synchronous:Z,after_paint:g,before_paint:g}}function Y0(Z,Q){if(Z instanceof I)return Q;else if(Q instanceof I)return Z;else return QQ(Z,Q)}class _8 extends R{constructor(Z){super();this.message=Z}}class v8 extends R{constructor(Z){super();this.callback=Z}}class m8 extends R{constructor(Z){super();this.callback=Z}}class qQ extends R{constructor(Z){super();this.message=Z}}class SQ extends R{constructor(Z,Q){super();this.name=Z,this.data=Q}}class KJ extends R{constructor(Z,Q){super();this.key=Z,this.value=Q}}class CQ extends R{}class M0 extends R{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=W,this.attributes=J,this.properties=X,this.contexts=K,this.is_form_associated=G,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function U0(Z){let Q=new M0(!0,!0,!1,g,g,g,!1,dW,dW,dW);return p(Z,Q,(W,J)=>{return J.apply(W)})}class q0{#Z;constructor(Z,[Q,W],J,X){this.#Z=new XJ(Z,[Q,W],X,J)}send(Z){switch(Z.constructor){case qQ:{this.dispatch(Z.message,!1);break}case SQ:{this.emit(Z.name,Z.data);break}case CQ:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,Q){this.#Z.emit(Z,Q)}}var R0=({init:Z,update:Q,view:W},J,X)=>{if(!PW())return new E(new LW);let K=J instanceof HTMLElement?J:xZ().querySelector(J);if(!K)return new E(new $8(J));return new j(new q0(K,Z(X),Q,W))};class _K{#Z;#X;#W;#J;#Q;#K;#G=DZ();#Y=new Set;constructor([Z,Q],W,J,X){this.#Z=Z,this.#X=W,this.#W=J,this.#J=X,this.#Q=this.#W(this.#Z),this.#K=j9(this.#Q),this.#V(Q)}send(Z){switch(Z.constructor){case _8:{let{message:Q}=Z,W=this.#U(Q),J=dQ(this.#K,this.#Q,W);this.#Q=W,this.#K=J.events,this.broadcast(E8(J.patch));return}case v8:{let{callback:Q}=Z;this.#Y.add(Q),Q(p9(this.#J.open_shadow_root,this.#J.adopt_styles,YW(this.#J.attributes),YW(this.#J.properties),YW(this.#J.contexts),this.#G,this.#Q));return}case m8:{let{callback:Q}=Z;this.#Y.delete(Q);return}case qQ:{let{message:Q}=Z,[W,J]=this.#X(this.#Z,Q),X=this.#W(W),K=dQ(this.#K,this.#Q,X);this.#V(J),this.#Z=W,this.#Q=X,this.#K=K.events,this.broadcast(E8(K.patch));return}case SQ:{let{name:Q,data:W}=Z;this.broadcast(d9(Q,W));return}case KJ:{let{key:Q,value:W}=Z,J=MZ(this.#G,Q);if(J.isOk()&&cZ(J[0],W))return;this.#G=IZ(this.#G,Q,W),this.broadcast(s9(Q,W));return}case CQ:{this.#Z=null,this.#X=null,this.#W=null,this.#J=null,this.#Q=null,this.#K=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#U(Z){switch(Z.constructor){case eW:{let{messages:Q}=Z,W=this.#Z,J=JQ();for(let X=Q;X.head;X=X.tail){let K=this.#U(X.head);if(K instanceof j){W=K[0][0],J=X9(OZ.fromArray([J,K[0][1]]));break}}return this.#V(J),this.#Z=W,this.#W(this.#Z)}case ZJ:{let{name:Q,value:W}=Z,J=this.#H(Q,W);if(J instanceof E)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case QJ:{let{name:Q,value:W}=Z,J=this.#M(Q,W);if(J instanceof E)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case WJ:{let{path:Q,name:W,event:J}=Z,[X,K]=q8(this.#K,Q,W,J);if(this.#K=X,K instanceof E)return this.#Q;else{let[G,V]=this.#X(this.#Z,K[0].message);return this.#V(V),this.#Z=G,this.#W(this.#Z)}}case w8:{let{key:Q,value:W}=Z,J=MZ(this.#J.contexts,Q);if(J instanceof E)return this.#Q;if(J=MQ(W,J[0]),J instanceof E)return this.#Q;let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}}#H(Z,Q){let W=MZ(this.#J.attributes,Z);switch(W.constructor){case j:return W[0](Q);case E:return new E(void 0)}}#M(Z,Q){let W=MZ(this.#J.properties,Z);switch(W.constructor){case j:return W[0](Q);case E:return new E(void 0)}}#V(Z){let Q=(G)=>this.send(new qQ(G)),W=(G,V)=>this.send(new SQ(G,V)),J=()=>{return},X=()=>{return},K=(G,V)=>this.send(new KJ(G,V));globalThis.queueMicrotask(()=>{J9(Z,Q,W,J,X,K)})}}class z0 extends R{constructor(Z,Q,W,J){super();this.init=Z,this.update=Q,this.view=W,this.config=J}}class $8 extends R{constructor(Z){super();this.selector=Z}}class LW extends R{}function I0(Z,Q,W){return new z0(Z,Q,W,U0(g))}function N0(Z,Q,W){return p6(!PW(),new E(new LW),()=>{return R0(Z,Q,W)})}function O0(Z,Q){return Z9(Z,VW(Q,(W)=>{return new UW(!1,!1,W)}),g,rJ,rJ,0,0)}function GJ(Z){return O0("click",$W(Z))}function j0(Z){return O0("input",C6(q(["target","value"]),mW,(Q)=>{return $W(Z(Q))}))}function u8(Z,Q){window.setTimeout(Q,Z)}var NZ="src\\day25factory.gleam";class p8 extends R{constructor(Z){super();this.bits=Z}}class A0 extends R{constructor(Z){super();this.num_amts=Z}}class d8 extends R{constructor(Z){super();this.buttons_used=Z}}class T0 extends R{constructor(Z){super();this.combo=Z}}class s8 extends R{constructor(Z){super();this.cfp=Z}}class tZ extends R{}class eZ extends R{}class YJ extends R{constructor(Z){super();this[0]=Z}}class HJ extends R{constructor(Z){super();this.num_ctrs=Z}}class r8 extends R{constructor(Z,Q){super();this.child_tree=Z,this.to_child=Q}}class RQ extends R{constructor(Z,Q,W){super();this.levels=Z,this.cost=Q,this.children=W}}class kZ extends R{constructor(Z,Q,W,J,X,K){super();this.btns=Z,this.goal_bits_parity=Q,this.num_bits=W,this.combos=J,this.check_combo=X,this.check_combo_parity=K}}class n8 extends R{constructor(Z,Q){super();this.combos=Z,this.tree=Q}}class aZ extends R{constructor(Z,Q,W){super();this.curr_problem=Z,this.problems=Q,this.count=W}}class yZ extends R{}class iQ extends R{}class oZ extends R{constructor(Z,Q,W,J){super();this.on_index=Z,this.onoff_or_level_input=Q,this.in=W,this.out=J}}class l8 extends R{constructor(Z,Q){super();this.millisec=Z,this.index=Q}}class a8 extends R{constructor(Z){super();this[0]=Z}}class o8 extends R{constructor(Z){super();this[0]=Z}}class t8 extends R{constructor(Z){super();this[0]=Z}}class MJ extends R{constructor(Z){super();this[0]=Z}}class P0 extends R{}class i8 extends R{constructor(Z){super();this[0]=Z}}class L0 extends R{constructor(Z){super();this[0]=Z}}var uK=`[.##.] (3) (1,3) (2) (2,3) (0,2) (0,1) {3,5,4,7}
[...#.] (0,2,3,4) (2,3) (0,4) (0,1,2) (1,2,3,4) {7,5,12,7,2}
[.###.#] (0,1,2,3,4) (0,3,4) (0,1,2,4,5) (1,2) {10,11,11,5,10,5}`;function wQ(Z){if(Z===0)return 1;else return 2*wQ(Z-1)}function S0(Z){return m6(Z,0,(Q,W)=>{return yW(Q,W.bits)})}function C0(Z){return DQ(Z.num_ctrs,0,(Q,W,J)=>{if(J%2===0)return Q;else return yW(Q,wQ(W))})}function cK(Z){let Q,W=Z.levels.num_ctrs,J=UQ(W);Q=XZ(J,(Y)=>{return Y[1]});let X=Q,K;if(K=yQ(X,(Y)=>{return Y!==0}),K instanceof j){let Y;if(Y=yQ(X,(U)=>{return U<0}),Y instanceof j)return new RQ(Z.levels,new eZ,Z.children);else return Z}else return new RQ(Z.levels,new YJ(0),Z.children)}function D0(Z,Q){return new HJ((()=>{let W=Z.num_ctrs;return h6(W,(J,X)=>{let K,G=(()=>{let Y=Q.num_amts;return MZ(Y,J)})();if(G instanceof j){let Y=G[0];K=X-Y}else K=X;let V=K;return globalThis.Math.trunc(V/2)})})())}function w0(Z,Q){let W=(()=>{let J=Z.cfp;return MZ(J,(()=>{let X=Q.levels;return C0(X)})())})();if(W instanceof j){let J=W[0],X,K=J.combo,G=UQ(K);X=yQ(G,(Y)=>{let H=Y[0],M,U=Q.levels;M=D0(U,H);let N=M,O,A=Q.children;O=yQ(A,(D)=>{return WZ(D.child_tree.levels,N)});let T=O;if(T instanceof j)return T[0].child_tree.cost instanceof tZ;else return!0});let V=X;if(V instanceof j){let Y=V[0],H,M=Q.levels;H=D0(M,Y[0]);let U=H,N,O=Q.children;N=yQ(O,(P)=>{return WZ(P.child_tree.levels,U)});let A=N,T;if(A instanceof j){let P=A[0],B=new r8(w0(Z,P.child_tree),P.to_child),L=Q.children;T=XZ(L,(w)=>{if(WZ(w.child_tree.levels,U))return B;else return w})}else{let P=new RQ(U,new tZ,q([])),B=cK(P);T=F(new r8(B,Y[1]),Q.children)}let D=T;return new RQ(Q.levels,Q.cost,D)}else{let Y=p(Q.children,new eZ,(H,M)=>{let U=M.child_tree.cost;if(U instanceof tZ)throw KZ("panic",NZ,"day25factory",460,"lt_one_step","should not be any children left with cost unknown",{});else if(U instanceof eZ)return H;else{let N=U[0],O=M.to_child.buttons_used+N*2;if(H instanceof tZ)throw KZ("panic",NZ,"day25factory",453,"lt_one_step","we never set acc to cost unknown",{});else if(H instanceof eZ)return new YJ(O);else{let A=H[0];return new YJ(EW(A,O))}}});return new RQ(Q.levels,Y,Q.children)}}else return new RQ(Q.levels,new eZ,Q.children)}function c8(Z,Q){return tJ((W)=>{return u8(Z.millisec+Q,()=>{return W(new o8(Z))})})}function VJ(Z){return tJ((Q)=>{return u8(Z.millisec,()=>{return Q(new a8(Z))})})}function E0(Z){if(Z instanceof kZ){let{btns:Q,goal_bits_parity:W,num_bits:J,combos:X,check_combo:K,check_combo_parity:G}=Z,V=WW(J);if(V<8)return oQ(3000,(()=>{return wQ(V)})());else return 1}else{let{combos:Q,tree:W}=Z,J=p((()=>{let X=W.levels.num_ctrs;return UQ(X)})(),0,(X,K)=>{return X+K[1]});return oQ(3000,J)}}function B0(Z){return p(CJ(0,(()=>{return WW(Z)})()),q([]),(Q,W)=>{return QQ(Q,(()=>{return gW(Z,W)})())})}function pK(Z,Q,W){let J,K=OQ(Z,`
`);J=JW(K,(V)=>{let Y=(()=>{return OQ(V,"]")})();if(Y instanceof I)return new E("err 1");else{let{head:H,tail:M}=Y,U=(()=>{let O=sZ(M);return OQ(O,"{")})();if(U instanceof I)return new E("err 2");else{let{head:N,tail:O}=U;return new j((()=>{let A,D=_W(N,"(",""),P=_W(D,")",""),B=D6(P),L=OQ(B," ");A=JW(L,(z)=>{let C=OQ(z,",");return JW(C,(k)=>{let y=xW(k);if(y instanceof j)return y;else return new E("err 3")})});let w=A;if(w instanceof j){let z=w[0];if(W instanceof yZ){let S;S=XZ(z,(m)=>{return p(m,new p8(0),(YZ,o)=>{return new p8((()=>{let SZ=YZ.bits;return kW(SZ,wQ(o))})())})});let k=S,y,v=B0(k);y=XZ(v,$6);let l=y,UZ;UZ=q6(l);let d=UZ,$;if(d instanceof j)$=d[0];else throw KZ("let_assert",NZ,"day25factory",619,"new_model","ass4",{value:d,start:18606,end:18657,pattern_start:18617,pattern_end:18632});let b,x=KW(H),h=z6(x,1);b=XZ(h,(m)=>{if(m==="#")return!0;else if(m===".")return!1;else throw KZ("panic",NZ,"day25factory",629,"new_model","`panic` expression evaluated.",{})});let u=b,n=p(u,[0,1],(m,YZ)=>{let o;if(YZ){let QZ=m[0];o=kW(QZ,m[1])}else o=m[0];return[o,m[1]*2]})[0],c=CJ(0,WW(u)-1);return new kZ(k,n,c,l,$,(()=>{return S0($)})())}else{let S=p(B0(z),new s8(DZ()),($,b)=>{let f=p(b,DZ(),(QZ,gZ)=>{return p(gZ,QZ,(JZ,AZ)=>{let nQ;nQ=MZ(JZ,AZ);let UJ=nQ;if(UJ instanceof j){let FJ=UJ[0];return IZ(JZ,AZ,FJ+1)}else return IZ(JZ,AZ,1)})}),x=new d8((()=>{return WW(b)})()),h=new A0(f),u,_=new HJ(f);u=C0(_);let n=u,c,m=$.cfp;c=MZ(m,n);let YZ=c,o;if(YZ instanceof j){let QZ=YZ[0],gZ=(()=>{let JZ=QZ.combo;return MZ(JZ,h)})();if(gZ instanceof j){let JZ=gZ[0],AZ=QZ.combo;o=IZ(AZ,h,new d8(EW(JZ.buttons_used,x.buttons_used)))}else{let JZ=QZ.combo;o=IZ(JZ,h,x)}}else{let QZ=DZ();o=IZ(QZ,h,x)}let SZ=o;return new s8((()=>{let QZ=$.cfp;return IZ(QZ,n,new T0(SZ))})())}),C,y=sZ(O),v=j6(y,1),l=OQ(v,",");C=XZ(l,($)=>{let b=xW($),f;if(b instanceof j)f=b[0];else throw KZ("let_assert",NZ,"day25factory",720,"new_model","ass5",{value:b,start:23605,end:23636,pattern_start:23616,pattern_end:23621});return f});let FZ=I6(C,DZ(),($,b,f)=>{return IZ($,f,b)}),d=new RQ(new HJ(FZ),new tZ,q([]));return new n8(S,d)}}else throw KZ("todo",NZ,"day25factory",600,"new_model","`todo` expression evaluated. This code has not yet been implemented.",{})})())}}});let G=J;if(G instanceof j){let V=G[0];if(V instanceof I)return new oZ(Q,W,Z,new j(new aZ(new kZ(q([]),0,q([]),q([]),hJ(),0),q([]),new E("empty input (need at least 1 line)"))));else{let{head:Y,tail:H}=V;return new oZ(Q,W,Z,new j(new aZ(Y,H,new j(0))))}}else throw KZ("todo",NZ,"day25factory",750,"new_model","`todo` expression evaluated. This code has not yet been implemented.",{})}function rQ(Z,Q,W){let J=pK(Z,Q,W),X=J.out;if(X instanceof j){let K=X[0];return[J,VJ(new l8(E0(K.curr_problem),Q))]}else throw KZ("todo",NZ,"day25factory",535,"next_model","`todo` expression evaluated. This code has not yet been implemented.",{})}function dK(Z){return rQ(Z,0,new yZ)}function sK(Z,Q){if(Q instanceof a8){let W=Q[0],J=Z.out;if(J instanceof j){let X=J[0];if(W.index===Z.on_index){let G=X.curr_problem;if(G instanceof kZ){let{btns:V,goal_bits_parity:Y,num_bits:H,combos:M,check_combo:U}=G;if(G.check_combo_parity===Y)if(X.problems instanceof I)return[new oZ(Z.on_index,Z.onoff_or_level_input,Z.in,new j(new aZ(X.curr_problem,X.problems,(()=>{let T=X.count;if(T instanceof j){let D=T[0];return new j(D+_J(U))}else return X.count})()))),JQ()];else return[new oZ(Z.on_index,Z.onoff_or_level_input,Z.in,new j(new aZ(X.curr_problem,X.problems,(()=>{let T=X.count;if(T instanceof j){let D=T[0];return new j(D+_J(U))}else return X.count})()))),c8(W,1000)];else if(M instanceof I)throw KZ("panic",NZ,"day25factory",234,"update","no combos left should say count impossible",{});else{let{head:A,tail:T}=M,D=new kZ(V,Y,H,T,A,(()=>{return S0(A)})());return[new oZ(Z.on_index,Z.onoff_or_level_input,Z.in,new j(new aZ(D,X.problems,X.count))),VJ(W)]}}else{let{combos:V,tree:Y}=G,H=Y.cost;if(H instanceof tZ){let M=w0(V,Y),U=new n8(V,M);return[new oZ(Z.on_index,Z.onoff_or_level_input,Z.in,new j(new aZ(U,X.problems,X.count))),VJ(W)]}else if(H instanceof eZ)return[new oZ(Z.on_index,Z.onoff_or_level_input,Z.in,new j(new aZ(X.curr_problem,X.problems,new E("impossible input: "+Z.in)))),c8(W,1000)];else{let M=H[0];return[new oZ(Z.on_index,Z.onoff_or_level_input,Z.in,new j(new aZ(X.curr_problem,X.problems,(()=>{let U=X.count;if(U instanceof j){let N=U[0];return new j(N+M)}else return X.count})()))),c8(W,1000)]}}}else return[Z,JQ()]}else{let X=J[0];throw KZ("todo",NZ,"day25factory",159,"update","`todo` expression evaluated. This code has not yet been implemented.",{})}}else if(Q instanceof o8){let W=Q[0],J=Z.out;if(J instanceof j){let X=J[0],K=X.problems;if(K instanceof I)return[Z,JQ()];else{let{head:G,tail:V}=K,Y=E0(G);return[new oZ(Z.on_index,Z.onoff_or_level_input,Z.in,new j(new aZ(G,V,X.count))),VJ(new l8(Y,W.index))]}}else throw KZ("todo",NZ,"day25factory",339,"update","`todo` expression evaluated. This code has not yet been implemented.",{})}else if(Q instanceof t8){let W=Q[0],J=Z.out;if(J instanceof j){let X=J[0];return rQ(W,Z.on_index+1,(()=>{if(X.curr_problem instanceof kZ)return new yZ;else return new iQ})())}else throw KZ("todo",NZ,"day25factory",328,"update","`todo` expression evaluated. This code has not yet been implemented.",{})}else if(Q instanceof MJ){let W=Q[0],J=Z.out;if(J instanceof j){let X=J[0],K=X.curr_problem;if(W instanceof yZ)if(K instanceof kZ)JQ();else rQ(Z.in,Z.on_index+1,new yZ);else if(K instanceof kZ)rQ(Z.in,Z.on_index+1,new iQ);else JQ();return rQ(Z.in,Z.on_index+1,(()=>{if(X.curr_problem instanceof kZ)return new iQ;else return new yZ})())}else throw KZ("todo",NZ,"day25factory",288,"update","`todo` expression evaluated. This code has not yet been implemented.",{})}else{let W=Z.out;if(W instanceof j){let J=W[0];return rQ(Z.in,Z.on_index+1,(()=>{if(J.curr_problem instanceof kZ)return new yZ;else return new iQ})())}else throw KZ("todo",NZ,"day25factory",314,"update","`todo` expression evaluated. This code has not yet been implemented.",{})}}function x0(Z,Q){let W;if(Z instanceof i8){let H=Z[0];W=[H.child_tree,(()=>{let M=H.to_child.buttons_used;return GZ(M)})()+" + 2 * "]}else W=[Z[0],""];let J=W,X,K;X=J[0],K=J[1];let G=i(sZ(q([vW("           ",Q),K]))),V=tW(q([s("color",(()=>{let H=X.cost;if(H instanceof tZ)return"#FFFF99";else if(H instanceof eZ)return"#FF9999";else return"#99FF99"})())]),q([i(sZ(q(["{",(()=>{let H=X.levels.num_ctrs,M=UQ(H),U=fW(M,(O,A)=>{return wW(O[0],A[0])}),N=XZ(U,(O)=>{let A=O[1];return GZ(A)});return GW(N,",")})(),"}"," = ",(()=>{let H=X.cost;if(H instanceof tZ)return"?";else if(H instanceof eZ)return"∞";else{let U=H[0];return GZ(U)}})()])))])),Y=i(sZ(q([(()=>{let H=X.cost;if(H instanceof tZ)return" = min of";else if(H instanceof eZ)return"";else if(H[0]===0)return"";else return" = min of"})(),`
`])));return F(G,F(V,F(Y,p(X.children,q([]),(H,M)=>{return QQ(x0(new i8(M),Q+1),H)}))))}function rK(Z){return A9(q([s("background","#292d3e"),s("color","#fefefc"),s("font-family","verdana, helvetica, sans-serif"),s("height","#100%"),s("margin","0px"),s("display","flex"),s("flex-direction","column"),s("gap","5px")]),q([T9(q([]),q([AW(q([FW("/")]),q([i("Correct Arity")]))])),R8(q([]),q([AW(q([FW("https://adventofcode.com/2025/day/10")]),q([i("Advent of Code day 10")])),i(" visualization: joltage indicator and level "),AW(q([FW("https://github.com/D-matz/day25factory/blob/main/src/day25factory.gleam")]),q([i("(source)")]))])),R8(q([]),(()=>{if(Z.onoff_or_level_input instanceof yZ)return q([i("Pressing a button twice negates itself and does nothing, so a minimal solution presses each button at most once.")]);else return q([i("From "),AW(q([FW("https://old.reddit.com/r/adventofcode/comments/1pk87hl/2025_day_10_part_2_bifurcate_your_way_to_victory/")]),q([i("u/tenthmascot")])),i(": for all combos of 0 or 1 of each button making all counters even, divide by 2 and recurse.")])})()),BW(q([s("display","flex"),s("gap","15px"),s("align-items","end")]),q([BW(q([s("display","flex"),s("flex-direction","column")]),q([BW(q([]),q([I8(q([oJ("radio"),rW("lights"),lJ((()=>{if(Z.onoff_or_level_input instanceof yZ)return!0;else return!1})()),GJ(new MJ(new yZ))])),N8(q([aJ("lights")]),q([i("indicator lights")]))])),BW(q([]),q([I8(q([oJ("radio"),rW("levels"),lJ((()=>{if(Z.onoff_or_level_input instanceof yZ)return!1;else return!0})()),GJ(new MJ(new iQ))])),N8(q([aJ("levels")]),q([i("joltage levels")]))]))])),P9(q([GJ(new P0),s("width","fit-content"),s("padding","3px")]),q([i("Replay")])),(()=>{let Q=Z.out;if(Q instanceof j){let W=Q[0];return i("min press sum: "+(()=>{let J=W.count;if(J instanceof j){let K=J[0];return GZ(K)}else return J[0]})())}else return i("")})()])),L9(q([rW("input"),s("height","60px"),s("width","480px"),j0((Q)=>{return new t8(Q)})]),Z.in),(()=>{let Q=Z.out;if(Q instanceof j){let J=Q[0].curr_problem;if(J instanceof kZ){let{btns:X,goal_bits_parity:K,num_bits:G,combos:V,check_combo:Y,check_combo_parity:H}=J;return z8(q([s("font-size","3em")]),(()=>{let M=r(p(G,q([]),(U,N)=>{let O;if(O=ZW(H,wQ(N)),O===0)return F(tW(q([s("width","3ch"),s("display","inline-block"),s("text-align","center"),s("opacity","0.35")]),q([i("\uD83D\uDCA1")])),U);else return F(tW(q([s("width","3ch"),s("display","inline-block"),s("text-align","center"),s("filter","drop-shadow(0 0 25px yellow)")]),q([i("\uD83D\uDCA1")])),U)}));return QQ(M,r(F(i((()=>{let N=XZ(G,(O)=>{if(O<10)return" "+GZ(O)+" ";else if(O<100)return GZ(O)+" ";else if(O<1000)return GZ(O);else return GZ(O%1000)});return sZ(N)})()),F(i(`
`),p(X,q([]),(U,N)=>{let O;O=v6(Y,N);let T=O;return F(i(sZ(q(["(",(()=>{let P=R6(G,(L)=>{if((()=>{let z=wQ(L);return ZW(z,N.bits)})()===0)return!1;else return!0}),B=XZ(P,GZ);return GW(B,",")})(),")"]))),p(G,F(i(`
`),U),(D,P)=>{let B;if((()=>{let z=N.bits;return ZW(z,wQ(P))})()===0)B=i("   ");else if(T)B=i("[x]");else B=i("[ ]");return F(B,D)}))})))))})())}else{let X=J.tree;return z8(q([]),(()=>{let K=new L0(X);return x0(K,0)})())}}else{let W=Q[0];return i(W)}})()]))}function k0(){let Z=I0(dK,sK,rK),Q=N0(Z,"#app",uK);if(!(Q instanceof j))throw KZ("let_assert",NZ,"day25factory",42,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:988,end:1044,pattern_start:999,pattern_end:1004});return}k0();
