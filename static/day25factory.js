class z{withFields(Z){let Q=Object.keys(this).map((W)=>(W in Z)?Z[W]:this[W]);return new this.constructor(...Q)}}class jZ{static fromArray(Z,Q){let W=Q||new N;for(let J=Z.length-1;J>=0;--J)W=new xZ(Z[J],W);return W}[Symbol.iterator](){return new j8(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof N}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function R(Z,Q){return new xZ(Z,Q)}function M(Z,Q){return jZ.fromArray(Z,Q)}class j8{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof N)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class N extends jZ{}class xZ extends jZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class HW{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,W){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=W??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return YW(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let W=this.bitSize%8;if(W){let J=8-W;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=YW(this.rawBuffer,this.bitOffset,J),K=YW(Z.rawBuffer,Z.bitOffset,J);if(X!==K)return!1}let W=this.bitSize%8;if(W){let J=YW(this.rawBuffer,this.bitOffset,Q),X=YW(Z.rawBuffer,Z.bitOffset,Q),K=8-W;if(J>>K!==X>>K)return!1}}return!0}get buffer(){if(N8("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(N8("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function YW(Z,Q,W){if(Q===0)return Z[W]??0;else{let J=Z[W]<<Q&255,X=Z[W+1]>>8-Q;return J|X}}class w6{constructor(Z){this.value=Z}}var I8={};function N8(Z,Q){if(I8[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),I8[Z]=!0}class bQ extends z{static isResult(Z){return Z instanceof bQ}}class j extends bQ{constructor(Z){super();this[0]=Z}isOk(){return!0}}class E extends bQ{constructor(Z){super();this[0]=Z}isOk(){return!1}}function QZ(Z,Q){let W=[Z,Q];while(W.length){let J=W.pop(),X=W.pop();if(J===X)continue;if(!O8(J)||!O8(X))return!1;if(!qX(J,X)||VX(J,X)||YX(J,X)||HX(J,X)||MX(J,X)||UX(J,X)||FX(J,X))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[V,Y]=GX(J),H=V(J),U=V(X);if(H.length!==U.length)return!1;for(let F of H)W.push(Y(J,F),Y(X,F))}return!0}function GX(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,W)=>Q.get(W)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(W)=>[...Q,...Object.keys(W)],(W,J)=>W[J]]}}function VX(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function YX(Z,Q){return!(Z instanceof HW)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((W,J)=>W===Q[J]))}function HX(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function MX(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function UX(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((W)=>!Q.has(W)))}function FX(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function O8(Z){return typeof Z==="object"&&Z!==null}function qX(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function MW(Z,Q){return Math.trunc(UW(Z,Q))}function UW(Z,Q){if(Q===0)return 0;else return Z/Q}function OQ(Z,Q,W,J,X,K,G){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=Q,V.module=W,V.line=J,V.function=X,V.fn=X;for(let Y in G)V[Y]=G[Y];return V}class n extends z{constructor(Z){super();this[0]=Z}}class GZ extends z{}var D8=new WeakMap,E6=new DataView(new ArrayBuffer(8)),x6=0;function k6(Z){let Q=D8.get(Z);if(Q!==void 0)return Q;let W=x6++;if(x6===2147483647)x6=0;return D8.set(Z,W),W}function y6(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function f6(Z){let Q=0,W=Z.length;for(let J=0;J<W;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function A8(Z){E6.setFloat64(0,Z);let Q=E6.getInt32(0),W=E6.getInt32(4);return Math.imul(73244475,Q>>16^Q)^W}function RX(Z){return f6(Z.toString())}function zX(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return k6(Z);if(Z instanceof Date)return A8(Z.getTime());let W=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)W=Math.imul(31,W)+LZ(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{W=W+LZ(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{W=W+y6(LZ(J),LZ(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let K=J[X],G=Z[K];W=W+y6(LZ(G),f6(K))|0}}return W}function LZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return A8(Z);case"string":return f6(Z);case"bigint":return RX(Z);case"object":return zX(Z);case"symbol":return k6(Z);case"function":return k6(Z);default:return 0}}var dZ=5,b6=Math.pow(2,dZ),IX=b6-1,NX=b6/2,OX=b6/4,IZ=0,pZ=1,AZ=2,jQ=3,h6={type:AZ,bitmap:0,array:[]};function FW(Z,Q){return Z>>>Q&IX}function rW(Z,Q){return 1<<FW(Z,Q)}function jX(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function _6(Z,Q){return jX(Z&Q-1)}function SZ(Z,Q,W){let J=Z.length,X=Array(J);for(let K=0;K<J;++K)X[K]=Z[K];return X[Q]=W,X}function DX(Z,Q,W){let J=Z.length,X=Array(J+1),K=0,G=0;while(K<Q)X[G++]=Z[K++];X[G++]=W;while(K<J)X[G++]=Z[K++];return X}function g6(Z,Q){let W=Z.length,J=Array(W-1),X=0,K=0;while(X<Q)J[K++]=Z[X++];++X;while(X<W)J[K++]=Z[X++];return J}function T8(Z,Q,W,J,X,K){let G=LZ(Q);if(G===J)return{type:jQ,hash:G,array:[{type:IZ,k:Q,v:W},{type:IZ,k:X,v:K}]};let V={val:!1};return qW(v6(h6,Z,G,Q,W,V),Z,J,X,K,V)}function qW(Z,Q,W,J,X,K){switch(Z.type){case pZ:return BX(Z,Q,W,J,X,K);case AZ:return v6(Z,Q,W,J,X,K);case jQ:return AX(Z,Q,W,J,X,K)}}function BX(Z,Q,W,J,X,K){let G=FW(W,Q),V=Z.array[G];if(V===void 0)return K.val=!0,{type:pZ,size:Z.size+1,array:SZ(Z.array,G,{type:IZ,k:J,v:X})};if(V.type===IZ){if(QZ(J,V.k)){if(X===V.v)return Z;return{type:pZ,size:Z.size,array:SZ(Z.array,G,{type:IZ,k:J,v:X})}}return K.val=!0,{type:pZ,size:Z.size,array:SZ(Z.array,G,T8(Q+dZ,V.k,V.v,W,J,X))}}let Y=qW(V,Q+dZ,W,J,X,K);if(Y===V)return Z;return{type:pZ,size:Z.size,array:SZ(Z.array,G,Y)}}function v6(Z,Q,W,J,X,K){let G=rW(W,Q),V=_6(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[V];if(Y.type!==IZ){let U=qW(Y,Q+dZ,W,J,X,K);if(U===Y)return Z;return{type:AZ,bitmap:Z.bitmap,array:SZ(Z.array,V,U)}}let H=Y.k;if(QZ(J,H)){if(X===Y.v)return Z;return{type:AZ,bitmap:Z.bitmap,array:SZ(Z.array,V,{type:IZ,k:J,v:X})}}return K.val=!0,{type:AZ,bitmap:Z.bitmap,array:SZ(Z.array,V,T8(Q+dZ,H,Y.v,W,J,X))}}else{let Y=Z.array.length;if(Y>=NX){let H=Array(32),U=FW(W,Q);H[U]=v6(h6,Q+dZ,W,J,X,K);let F=0,q=Z.bitmap;for(let B=0;B<32;B++){if((q&1)!==0){let A=Z.array[F++];H[B]=A}q=q>>>1}return{type:pZ,size:Y+1,array:H}}else{let H=DX(Z.array,V,{type:IZ,k:J,v:X});return K.val=!0,{type:AZ,bitmap:Z.bitmap|G,array:H}}}}function AX(Z,Q,W,J,X,K){if(W===Z.hash){let G=$6(Z,J);if(G!==-1){if(Z.array[G].v===X)return Z;return{type:jQ,hash:W,array:SZ(Z.array,G,{type:IZ,k:J,v:X})}}let V=Z.array.length;return K.val=!0,{type:jQ,hash:W,array:SZ(Z.array,V,{type:IZ,k:J,v:X})}}return qW({type:AZ,bitmap:rW(Z.hash,Q),array:[Z]},Q,W,J,X,K)}function $6(Z,Q){let W=Z.array.length;for(let J=0;J<W;J++)if(QZ(Q,Z.array[J].k))return J;return-1}function sW(Z,Q,W,J){switch(Z.type){case pZ:return TX(Z,Q,W,J);case AZ:return PX(Z,Q,W,J);case jQ:return LX(Z,J)}}function TX(Z,Q,W,J){let X=FW(W,Q),K=Z.array[X];if(K===void 0)return;if(K.type!==IZ)return sW(K,Q+dZ,W,J);if(QZ(J,K.k))return K;return}function PX(Z,Q,W,J){let X=rW(W,Q);if((Z.bitmap&X)===0)return;let K=_6(Z.bitmap,X),G=Z.array[K];if(G.type!==IZ)return sW(G,Q+dZ,W,J);if(QZ(J,G.k))return G;return}function LX(Z,Q){let W=$6(Z,Q);if(W<0)return;return Z.array[W]}function m6(Z,Q,W,J){switch(Z.type){case pZ:return SX(Z,Q,W,J);case AZ:return CX(Z,Q,W,J);case jQ:return wX(Z,J)}}function SX(Z,Q,W,J){let X=FW(W,Q),K=Z.array[X];if(K===void 0)return Z;let G=void 0;if(K.type===IZ){if(!QZ(K.k,J))return Z}else if(G=m6(K,Q+dZ,W,J),G===K)return Z;if(G===void 0){if(Z.size<=OX){let V=Z.array,Y=Array(Z.size-1),H=0,U=0,F=0;while(H<X){let q=V[H];if(q!==void 0)Y[U]=q,F|=1<<H,++U;++H}++H;while(H<V.length){let q=V[H];if(q!==void 0)Y[U]=q,F|=1<<H,++U;++H}return{type:AZ,bitmap:F,array:Y}}return{type:pZ,size:Z.size-1,array:SZ(Z.array,X,G)}}return{type:pZ,size:Z.size,array:SZ(Z.array,X,G)}}function CX(Z,Q,W,J){let X=rW(W,Q);if((Z.bitmap&X)===0)return Z;let K=_6(Z.bitmap,X),G=Z.array[K];if(G.type!==IZ){let V=m6(G,Q+dZ,W,J);if(V===G)return Z;if(V!==void 0)return{type:AZ,bitmap:Z.bitmap,array:SZ(Z.array,K,V)};if(Z.bitmap===X)return;return{type:AZ,bitmap:Z.bitmap^X,array:g6(Z.array,K)}}if(QZ(J,G.k)){if(Z.bitmap===X)return;return{type:AZ,bitmap:Z.bitmap^X,array:g6(Z.array,K)}}return Z}function wX(Z,Q){let W=$6(Z,Q);if(W<0)return Z;if(Z.array.length===1)return;return{type:jQ,hash:Z.hash,array:g6(Z.array,W)}}function P8(Z,Q){if(Z===void 0)return;let W=Z.array,J=W.length;for(let X=0;X<J;X++){let K=W[X];if(K===void 0)continue;if(K.type===IZ){Q(K.v,K.k);continue}P8(K,Q)}}class zZ{static fromObject(Z){let Q=Object.keys(Z),W=zZ.new();for(let J=0;J<Q.length;J++){let X=Q[J];W=W.set(X,Z[X])}return W}static fromMap(Z){let Q=zZ.new();return Z.forEach((W,J)=>{Q=Q.set(J,W)}),Q}static new(){return new zZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let W=sW(this.root,0,LZ(Z),Z);if(W===void 0)return Q;return W.v}set(Z,Q){let W={val:!1},J=this.root===void 0?h6:this.root,X=qW(J,0,LZ(Z),Z,Q,W);if(X===this.root)return this;return new zZ(X,W.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=m6(this.root,0,LZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return zZ.new();return new zZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return sW(this.root,0,LZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,W)=>Z.push([W,Q])),Z}forEach(Z){P8(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,W)=>{Z=Z+y6(LZ(Q),LZ(W))|0}),Z}equals(Z){if(!(Z instanceof zZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,W)=>{if(!QZ(Z.get(W,!Q),Q))throw B8}),!0}catch(Q){if(Q===B8)return!1;throw Q}}}var B8=Symbol();class WZ extends z{}class JZ extends z{}class ZQ extends z{}function L8(Z,Q){let W=C8(Q)-Q>0;if(Z<0&&W||Z===0&&Q<0)return new E(void 0);else return new j(nW(Z,Q))}function xX(Z){return-1*Z}function _Q(Z){if(Z>=0)return u6(Z);else return 0-u6(xX(Z))}function S8(Z,Q){if(Q<=0){let J=nW(10,c(-Q));return c(_Q(UW(Z,J)))*J}else{let J=nW(10,c(Q));return UW(c(_Q(Z*J)),J)}}function x8(Z){return y8(Z,2)}function k8(Z,Q){let J=c(Z);return L8(J,Q)}function iW(Z,Q){if(Z===Q)return new JZ;else if(Z<Q)return new WZ;else return new ZQ}function zW(Z,Q){if(Z<Q)return Z;else return Q}class HZ extends z{}class vQ extends z{}function gX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return J;else Z=W.tail,Q=J+1}}function $Q(Z){return gX(Z,0)}function OW(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return J;else{let X=W.head;Z=W.tail,Q=R(X,J)}}}function l(Z){return OW(Z,M([]))}function g8(Z){if(Z instanceof N)return new E(void 0);else{let Q=Z.head;return new j(Q)}}function fX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return l(K);else{let{head:G,tail:V}=J,Y;if(X(G))Y=R(G,K);else Y=K;let U=Y;Z=V,Q=X,W=U}}}function d6(Z,Q){return fX(Z,Q,M([]))}function bX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return l(K);else{let G=J.head;Z=J.tail,Q=X,W=R(X(G),K)}}}function MZ(Z,Q){return bX(Z,Q,M([]))}function hX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return new j(l(K));else{let{head:G,tail:V}=J,Y=X(G);if(Y instanceof j){let H=Y[0];Z=V,Q=X,W=R(H,K)}else return Y}}}function mQ(Z,Q){return hX(Z,Q,M([]))}function f8(Z,Q){while(!0){let W=Z,J=Q;if(J<=0)return W;else if(W instanceof N)return W;else Z=W.tail,Q=J-1}}function _X(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return J;else{let X=W.head;Z=W.tail,Q=R(X,J)}}}function sZ(Z,Q){return _X(l(Z),Q)}function tW(Z,Q){return R(Q,Z)}function i(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return X;else{let G=J.head;Z=J.tail,Q=K(X,G),W=K}}}function vX(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof N)return K;else{let Y=X.head;Z=X.tail,Q=G(K,Y,V),W=G,J=V+1}}}function b8(Z,Q,W){return vX(Z,Q,W,0)}function uQ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return new E(void 0);else{let{head:X,tail:K}=W;if(J(X))return new j(X);else Z=K,Q=J}}}function $X(Z,Q,W,J,X,K){while(!0){let G=Z,V=Q,Y=W,H=J,U=X,F=K,q=R(U,Y);if(G instanceof N)if(H instanceof HZ)return R(l(q),F);else return R(q,F);else{let{head:B,tail:A}=G,T=V(U,B);if(H instanceof HZ)if(T instanceof WZ)Z=A,Q=V,W=q,J=H,X=B,K=F;else if(T instanceof JZ)Z=A,Q=V,W=q,J=H,X=B,K=F;else{let O;if(H instanceof HZ)O=R(l(q),F);else O=R(q,F);let P=O;if(A instanceof N)return R(M([B]),P);else{let{head:D,tail:S}=A,C,I=V(B,D);if(I instanceof WZ)C=new HZ;else if(I instanceof JZ)C=new HZ;else C=new vQ;let L=C;Z=S,Q=V,W=M([B]),J=L,X=D,K=P}}else if(T instanceof WZ){let O;if(H instanceof HZ)O=R(l(q),F);else O=R(q,F);let P=O;if(A instanceof N)return R(M([B]),P);else{let{head:D,tail:S}=A,C,I=V(B,D);if(I instanceof WZ)C=new HZ;else if(I instanceof JZ)C=new HZ;else C=new vQ;let L=C;Z=S,Q=V,W=M([B]),J=L,X=D,K=P}}else if(T instanceof JZ){let O;if(H instanceof HZ)O=R(l(q),F);else O=R(q,F);let P=O;if(A instanceof N)return R(M([B]),P);else{let{head:D,tail:S}=A,C,I=V(B,D);if(I instanceof WZ)C=new HZ;else if(I instanceof JZ)C=new HZ;else C=new vQ;let L=C;Z=S,Q=V,W=M([B]),J=L,X=D,K=P}}else Z=A,Q=V,W=q,J=H,X=B,K=F}}}function mX(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof N)return OW(K,V);else if(K instanceof N)return OW(X,V);else{let{head:Y,tail:H}=X,U=K.head,F=K.tail,q=G(Y,U);if(q instanceof WZ)Z=H,Q=K,W=G,J=R(Y,V);else if(q instanceof JZ)Z=X,Q=F,W=G,J=R(U,V);else Z=X,Q=F,W=G,J=R(U,V)}}}function uX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return l(K);else{let G=J.tail;if(G instanceof N){let V=J.head;return l(R(l(V),K))}else{let V=J.head,Y=G.head,H=G.tail,U=mX(V,Y,X,M([]));Z=H,Q=X,W=R(U,K)}}}}function cX(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof N)return OW(K,V);else if(K instanceof N)return OW(X,V);else{let{head:Y,tail:H}=X,U=K.head,F=K.tail,q=G(Y,U);if(q instanceof WZ)Z=X,Q=F,W=G,J=R(U,V);else if(q instanceof JZ)Z=H,Q=K,W=G,J=R(Y,V);else Z=H,Q=K,W=G,J=R(Y,V)}}}function pX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return l(K);else{let G=J.tail;if(G instanceof N){let V=J.head;return l(R(l(V),K))}else{let V=J.head,Y=G.head,H=G.tail,U=cX(V,Y,X,M([]));Z=H,Q=X,W=R(U,K)}}}}function dX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return J;else if(X instanceof HZ)if(J.tail instanceof N)return J.head;else Z=uX(J,K,M([])),Q=new vQ,W=K;else if(J.tail instanceof N){let V=J.head;return l(V)}else Z=pX(J,K,M([])),Q=new HZ,W=K}}function eW(Z,Q){if(Z instanceof N)return Z;else{let W=Z.tail;if(W instanceof N)return Z;else{let J=Z.head,X=W.head,K=W.tail,G,V=Q(J,X);if(V instanceof WZ)G=new HZ;else if(V instanceof JZ)G=new HZ;else G=new vQ;let Y=G,H=$X(K,Q,M([J]),Y,X,M([]));return dX(H,new HZ,Q)}}}function sX(Z,Q,W){while(!0){let J=Z,X=Q,K=W,G=iW(J,X);if(G instanceof WZ)Z=J,Q=X-1,W=R(X,K);else if(G instanceof JZ)return R(X,K);else Z=J,Q=X+1,W=R(X,K)}}function s6(Z,Q){return sX(Z,Q,M([]))}function h8(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return;else{let{head:X,tail:K}=W;J(X),Z=K,Q=J}}}function oW(Z,Q){if(Q===0)return M([M([])]);else if(Z instanceof N)return Z;else{let{head:W,tail:J}=Z,K=oW(J,Q-1),G=MZ(K,(Y)=>{return R(W,Y)}),V=l(G);return i(V,oW(J,Q),(Y,H)=>{return R(H,Y)})}}function _8(Z){let W=c(Z),J=AQ(W),X=l(J);return Z6(X)}function v8(Z){let W=c(Z),J=_8(W);return c(J)}function Q6(Z,Q,W){let X=c(Z),K=n6(X,Q,W);return c(K)}function lX(Z,Q,W){if(W<=0)return"";else if(Q<0){let K=BW(Z)+Q;if(K<0)return"";else return l6(Z,K,W)}else return l6(Z,Q,W)}function $8(Z,Q){if(Q<=0)return Z;else return lX(Z,0,BW(Z)-Q)}function aX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return J;else{let X=W.head;Z=W.tail,Q=J+X}}}function yZ(Z){return aX(Z,"")}function oX(Z,Q,W){while(!0){let J=Z,X=Q,K=W,G;if(J%2===0)G=K;else G=K+X;let Y=G,H=globalThis.Math.trunc(J/2);if(H<=0)return Y;else Z=H,Q=X+X,W=Y}}function W6(Z,Q){if(Q<=0)return"";else return oX(Q,Z,"")}function tX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return K;else{let G=J.head;Z=J.tail,Q=X,W=K+X+G}}}function DW(Z,Q){if(Z instanceof N)return"";else{let{head:W,tail:J}=Z;return tX(J,Q,W)}}function m8(Z){let W=u8(Z);return c8(W)}function TQ(Z,Q){if(Q==="")return AQ(Z);else{let J=c(Z),X=i6(J,Q);return MZ(X,c)}}class pQ extends z{constructor(Z,Q,W){super();this.expected=Z,this.found=Q,this.path=W}}class PQ extends z{constructor(Z){super();this.function=Z}}var d8=new PQ(J7);var J6=new PQ(X7);function qQ(Z,Q){let W=Q.function(Z),J,X;if(J=W[0],X=W[1],X instanceof N)return new j(J);else return new E(X)}function X6(Z){return new PQ((Q)=>{return[Z,M([])]})}function AW(Z,Q){return new PQ((W)=>{let J=Z.function(W),X,K;return X=J[0],K=J[1],[Q(X),K]})}function W7(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(K instanceof N)return X;else{let{head:G,tail:V}=K,Y=G.function(J),H,U;if(H=Y,U=Y[1],U instanceof N)return H;else Z=J,Q=X,W=V}}}function s8(Z,Q){return new PQ((W)=>{let J=Z.function(W),X,K;if(X=J,K=J[1],K instanceof N)return X;else return W7(W,X,Q)})}function r8(Z,Q,W){let J=W(Z);if(J instanceof j)return[J[0],M([])];else return[J[0],M([new pQ(Q,hQ(Z),M([]))])]}function J7(Z){return r8(Z,"Int",l8)}function X7(Z){return r8(Z,"String",a8)}function o6(Z,Q){let W=s8(J6,M([(()=>{return AW(d8,YZ)})()])),J=MZ(Q,(K)=>{let G=c(K),V=qQ(G,W);if(V instanceof j)return V[0];else return"<"+hQ(G)+">"}),X=MZ(Z[1],(K)=>{return new pQ(K.expected,K.found,sZ(J,K.path))});return[Z[0],X]}function K7(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(K instanceof N){let F=V(Y);return o6(F,l(G))}else{let{head:U,tail:F}=K,q=i8(Y,U);if(q instanceof j){let B=q[0];if(B instanceof n){let A=B[0];Z=F,Q=R(U,G),W=V,J=A,X=H}else return H(Y,R(U,G))}else{let B=q[0],A=V(Y),T;T=A[0];let O=[T,M([new pQ(B,hQ(Y),M([]))])];return o6(O,l(G))}}}}function n8(Z,Q,W){return new PQ((J)=>{let X=K7(Z,M([]),Q.function,J,(U,F)=>{let q=Q.function(U),B;B=q[0];let A=[B,M([new pQ("Field","Nothing",M([]))])];return o6(A,l(F))}),K,G;K=X[0],G=X[1];let V=W(K).function(J),Y,H;return Y=V[0],H=V[1],[Y,sZ(G,H)]})}var t6=void 0,o8={};function c(Z){return Z}function IW(Z){if(/^[-+]?(\d+)$/.test(Z))return new j(parseInt(Z));else return new E(t6)}function p6(Z){if(/^[-+]?(\d+)\.(\d+)([eE][-+]?\d+)?$/.test(Z))return new j(parseFloat(Z));else return new E(t6)}function YZ(Z){return Z.toString()}function y8(Z,Q){return Z.toString(Q).toUpperCase()}function n6(Z,Q,W){return Z.replaceAll(Q,W)}function BW(Z){if(Z==="")return 0;let Q=e6(Z);if(Q){let W=0;for(let J of Q)W++;return W}else return Z.match(/./gsu).length}function AQ(Z){let Q=e6(Z);if(Q)return jZ.fromArray(Array.from(Q).map((W)=>W.segment));else return jZ.fromArray(Z.match(/./gsu))}var t8=void 0;function e6(Z){if(globalThis.Intl&&Intl.Segmenter)return t8||=new Intl.Segmenter,t8.segment(Z)[Symbol.iterator]()}function i6(Z,Q){return jZ.fromArray(Z.split(Q))}function Z6(Z){let Q="";for(let W of Z)Q=Q+W;return Q}function l6(Z,Q,W){if(W<=0||Q>=Z.length)return"";let J=e6(Z);if(J){while(Q-- >0)J.next();let X="";while(W-- >0){let K=J.next().value;if(K===void 0)break;X+=K.segment}return X}else return Z.match(/./gsu).slice(Q,Q+W).join("")}function a6(Z,Q){return Z.startsWith(Q)}var e8=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),G7=new RegExp(`^[${e8}]*`),V7=new RegExp(`[${e8}]*$`);function u8(Z){return Z.replace(G7,"")}function c8(Z){return Z.replace(V7,"")}function C8(Z){return Math.ceil(Z)}function u6(Z){return Math.round(Z)}function nW(Z,Q){return Math.pow(Z,Q)}function DZ(){return zZ.new()}function cQ(Z){return Z.size}function RQ(Z){return jZ.fromArray(Z.entries())}function UZ(Z,Q){let W=Z.get(Q,o8);if(W===o8)return new E(t6);return new j(W)}function Z9(Z,Q,W){return W.set(Z,Q)}function hQ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof bQ)return"Result";else if(Z instanceof jZ)return"List";else if(Z instanceof HW)return"BitArray";else if(Z instanceof zZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function NW(Z,Q){return Number(BigInt(Z)&BigInt(Q))}function lW(Z,Q){return Number(BigInt(Z)|BigInt(Q))}function aW(Z,Q){return Number(BigInt(Z)^BigInt(Q))}function RW(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let W=Q.indexOf("e");if(W>=0)return Q.slice(0,W)+".0"+Q.slice(W);else return Q+".0"}}class Y7{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#K(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return RW(Z);if(Z instanceof w6)return this.#G(Z);if(Z instanceof HW)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let W;if(Array.isArray(Z))W=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof jZ)W=this.#Q(Z);else if(Z instanceof z)W=this.#J(Z);else if(Z instanceof zZ)W=this.#W(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else W=this.#X(Z);return this.#Z.delete(Z),W}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",W=[];for(let K of Object.keys(Z))W.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let J=W.length?" "+W.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#W(Z){let Q="dict.from_list([",W=!0;return Z.forEach((J,X)=>{if(!W)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",W=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((W)=>{let J=this.inspect(Z[W]);return isNaN(parseInt(W))?`${W}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof N)return"[]";let Q='charlist.from_string("',W="[",J=Z;while(J instanceof xZ){let X=J.head;if(J=J.tail,W!=="[")W+=", ";if(W+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return W+"]"}#K(Z){let Q='"';for(let W=0;W<Z.length;W++){let J=Z[W];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let W=0;W<Z.byteSize-1;W++)Q+=Z.byteAt(W).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let W=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-W,Q+=`:size(${W})`}return Q+=">>",Q}}function i8(Z,Q){if(Z instanceof zZ||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new j(new GZ);return new j(new n(X))}let W=Number.isInteger(Q);if(W&&Q>=0&&Q<8&&Z instanceof jZ){let J=0;for(let X of Z){if(J===Q)return new j(new n(X));J++}return new E("Indexable")}if(W&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new j(new n(Z[Q]));return new j(new GZ)}return new E(W?"Indexable":"Dict")}function l8(Z){if(Number.isInteger(Z))return new j(Z);return new E(0)}function a8(Z){if(typeof Z==="string")return new j(Z);return new E("")}function RZ(Z,Q,W){return Z9(Q,W,Z)}function Q9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return J;else{let X=W.head;Z=W.tail,Q=R(X,J)}}}function H7(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return Q9(J,M([]));else{let X=W.tail,K=W.head[0];Z=X,Q=R(K,J)}}}function TW(Z){return H7(RQ(Z),M([]))}function M7(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return Q9(J,M([]));else{let X=W.tail,K=W.head[1];Z=X,Q=R(K,J)}}}function r6(Z){let Q=RQ(Z);return M7(Q,M([]))}function U7(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return X;else{let G=J.tail,V=J.head[0],Y=J.head[1];Z=G,Q=K(X,V,Y),W=K}}}function LQ(Z,Q,W){return U7(RQ(Z),Q,W)}function F7(Z,Q){let W=(J,X,K)=>{return RZ(J,X,Z(X,K))};return LQ(Q,DZ(),W)}function W9(Z,Q){return F7(Q,Z)}function J9(Z){if(Z instanceof j)return!0;else return!1}class X9 extends z{constructor(Z){super();this.dict=Z}}var q7=void 0;function K9(Z){return cQ(Z.dict)}function G9(Z,Q){let W=Z.dict,J=UZ(W,Q);return J9(J)}function V9(Z,Q,W){return LQ(Z.dict,Q,(J,X,K)=>{return W(J,X)})}function Y9(Z){let Q=i(Z,DZ(),(W,J)=>{return RZ(W,J,q7)});return new X9(Q)}function U9(Z,Q,W){if(Z)return Q;else return W()}function XZ(Z){return Z}function rQ(Z){return Z}function PW(Z){return rQ(Z)}function QJ(Z){return rQ(Z)}var wZ=()=>globalThis?.document,G6="http://www.w3.org/1999/xhtml",V6=1,WJ=3;var q9=!!globalThis.HTMLElement?.prototype?.moveBefore;var b=M([]),Y6=new GZ;var A7=new ZQ,T7=new WZ,P7=new JZ;function H6(Z,Q){if(Z.name===Q.name)return P7;else if(Z.name<Q.name)return T7;else return A7}class iZ extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class LW extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class BZ extends z{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.name=Q,this.handler=W,this.include=J,this.prevent_default=X,this.stop_propagation=K,this.debounce=G,this.throttle=V}}class SW extends z{constructor(Z,Q,W){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=W}}class O9 extends z{constructor(Z){super();this.kind=Z}}var XJ=0,KJ=1,GJ=2,VJ=0,YJ=new O9(VJ);var HJ=2;function x7(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof N)return J;else{let X=W.head;if(X instanceof iZ){let K=X.name;if(K==="")Z=W.tail,Q=J;else if(K==="class"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof N){let Y=X;Z=V,Q=R(Y,J)}else{let Y=V.head;if(Y instanceof iZ)if(Y.name==="class"){let U=X.kind,F=G,q=V.tail,B=Y.value,A=F+" "+B,T=new iZ(U,"class",A);Z=R(T,q),Q=J}else{let U=X;Z=V,Q=R(U,J)}else{let H=X;Z=V,Q=R(H,J)}}}}else if(K==="style"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof N){let Y=X;Z=V,Q=R(Y,J)}else{let Y=V.head;if(Y instanceof iZ)if(Y.name==="style"){let U=X.kind,F=G,q=V.tail,B=Y.value,A=F+";"+B,T=new iZ(U,"style",A);Z=R(T,q),Q=J}else{let U=X;Z=V,Q=R(U,J)}else{let H=X;Z=V,Q=R(H,J)}}}}else{let G=X;Z=W.tail,Q=R(G,J)}}else{let K=X;Z=W.tail,Q=R(K,J)}}}}function j9(Z){if(Z instanceof N)return Z;else if(Z.tail instanceof N)return Z;else{let J=eW(Z,(X,K)=>{return H6(K,X)});return x7(J,b)}}function D9(Z,Q){return new iZ(XJ,Z,Q)}function B9(Z,Q){return new LW(KJ,Z,Q)}function A9(Z,Q,W,J,X,K,G){return new BZ(GJ,Z,Q,W,J,X,K,G)}function OZ(Z,Q){return D9(Z,Q)}function MJ(Z,Q){return B9(Z,Q)}function P9(Z,Q){if(Q)return OZ(Z,"");else return MJ(Z,QJ(!1))}function T9(Z){return OZ("class",Z)}function lZ(Z){return OZ("id",Z)}function x(Z,Q){if(Z==="")return T9("");else if(Q==="")return T9("");else return OZ("style",Z+":"+Q+";")}function CW(Z){return OZ("title",Z)}function wW(Z){return OZ("href",Z)}function iQ(Z){return P9("checked",Z)}function SQ(Z){return P9("disabled",Z)}function WQ(Z){return OZ("for",Z)}function L9(Z){return OZ("max",Z)}function S9(Z){return OZ("min",Z)}function C9(Z){return OZ("step",Z)}function aZ(Z){return OZ("type",Z)}function EW(Z){return OZ("value",Z)}class U6 extends z{constructor(Z,Q,W){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=W}}class w9 extends z{constructor(Z,Q,W,J,X){super();this.dispatch=Z,this.emit=Q,this.select=W,this.root=J,this.provide=X}}var M6=new U6(M([]),M([]),M([]));function E9(Z,Q,W,J,X,K){let G=new w9(Q,W,J,X,K);return h8(Z.synchronous,(V)=>{return V(G)})}function VZ(){return M6}function x9(Z){return new U6(M([(W)=>{let J=W.dispatch;return Z(J)}]),M6.before_paint,M6.after_paint)}function k9(Z){return i(Z,M6,(Q,W)=>{return new U6(i(W.synchronous,Q.synchronous,tW),i(W.before_paint,Q.before_paint,tW),i(W.after_paint,Q.after_paint,tW))})}function TZ(){return null}function xW(Z,Q){let W=Z?.get(Q);if(W!=null)return new j(W);else return new E(void 0)}function kW(Z,Q){return Z&&Z.has(Q)}function CQ(Z,Q,W){return Z??=new Map,Z.set(Q,W),Z}function UJ(Z,Q){return Z?.delete(Q),Z}class FJ extends z{}class qJ extends z{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class y9 extends z{constructor(Z,Q){super();this.index=Z,this.parent=Q}}var F6=new FJ,gW="\t",RJ=`
`;function y7(Z,Q){while(!0){let W=Z,J=Q;if(J instanceof N)return!1;else{let{head:X,tail:K}=J,G=a6(W,X);if(G)return G;else Z=W,Q=K}}}function fZ(Z,Q,W){if(W==="")return new y9(Q,Z);else return new qJ(W,Z)}function g9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof FJ)if(J instanceof N)return"";else{let X=J.tail;return yZ(X)}else if(W instanceof qJ){let X=W.key;Z=W.parent,Q=R(gW,R(X,J))}else{let X=W.index;Z=W.parent,Q=R(gW,R(YZ(X),J))}}}function g7(Z){return g9(Z,M([]))}function f9(Z,Q){if(Q instanceof N)return!1;else return y7(g7(Z),Q)}function zJ(Z,Q){return g9(Z,M([RJ,Q]))}class bZ extends z{constructor(Z,Q,W,J,X){super();this.kind=Z,this.key=Q,this.mapper=W,this.children=J,this.keyed_children=X}}class hZ extends z{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.children=G,this.keyed_children=V,this.self_closing=Y,this.void=H}}class _Z extends z{constructor(Z,Q,W,J){super();this.kind=Z,this.key=Q,this.mapper=W,this.content=J}}class oQ extends z{constructor(Z,Q,W,J,X,K,G){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.inner_html=G}}var vZ=0,wQ=1,tQ=2,h9=3;function fW(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function _9(Z,Q){if(Q instanceof bZ)return new bZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof hZ)return new hZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof _Z)return new _Z(Q.kind,Z,Q.mapper,Q.content);else return new oQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}function IJ(Z,Q,W,J){return new bZ(vZ,Z,Q,W,J)}function bW(Z,Q,W,J,X,K,G,V,Y){return new hZ(wQ,Z,Q,W,J,j9(X),K,G,V,Y)}function NJ(Z,Q,W){return new _Z(tQ,Z,Q,W)}var OJ=(Z,Q)=>Z===Q,$Z=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let W=typeof Z;if(W!==typeof Q)return!1;if(W!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return h7(Z,Q);return _7(Z,Q)},h7=(Z,Q)=>{let W=Z.length;if(W!==Q.length)return!1;while(W--)if(!$Z(Z[W],Q[W]))return!1;return!0},_7=(Z,Q)=>{let W=Object.keys(Z),J=W.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=W[J];if(!Object.hasOwn(Q,X))return!1;if(!$Z(Z[X],Q[X]))return!1}return!0};class JQ extends z{constructor(Z,Q,W){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=W}}class BJ extends z{constructor(Z,Q){super();this.path=Z,this.handler=Q}}class jJ extends z{constructor(Z){super();this.path=Z}}function AJ(){return new JQ(TZ(),b,b)}function u9(Z){return new JQ(Z.handlers,Z.next_dispatched_paths,b)}function c9(Z,Q,W){return UJ(Z,zJ(Q,W))}function q6(Z,Q,W){let J=c9(Z.handlers,Q,W);return new JQ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function v9(Z,Q,W){return i(W,Z,(J,X)=>{if(X instanceof BZ){let K=X.name;return c9(J,Q,K)}else return J})}function TJ(Z,Q,W,J){let X=xW(Z.handlers,Q+RJ+W);if(X instanceof j){let K=X[0],G=qQ(J,K);if(G instanceof j){let V=G[0];return new BJ(Q,V)}else return new jJ(Q)}else return new jJ(Q)}function PJ(Z,Q){let W=R(Q.path,Z.next_dispatched_paths),J=new JQ(Z.handlers,Z.dispatched_paths,W);if(Q instanceof BJ){let X=Q.handler;return[J,new j(X)]}else return[J,new E(void 0)]}function LJ(Z,Q,W,J){let X=TJ(Z,Q,W,J);return((K)=>{return PJ(Z,K)})(X)}function R6(Z,Q){return f9(Q,Z.dispatched_paths)}function p9(Z,Q,W,J,X){return CQ(Z,zJ(W,J),AW(X,(K)=>{return new SW(K.prevent_default,K.stop_propagation,XZ(Q)(K.message))}))}function eQ(Z,Q,W,J,X){let K=p9(Z.handlers,Q,W,J,X);return new JQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function $9(Z,Q,W,J){return i(J,Z,(X,K)=>{if(K instanceof BZ){let{name:G,handler:V}=K;return p9(X,Q,W,G,V)}else return X})}function zQ(Z,Q){let W=OJ(Z,XZ);if(OJ(Q,XZ))return Z;else if(W)return Q;else return(X)=>{return Z(Q(X))}}function m9(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(V instanceof N)return X;else{let{head:Y,tail:H}=V;Z=d9(X,K,G,Y),Q=K,W=G+1,J=H}}}function d9(Z,Q,W,J){if(J instanceof bZ){let X=J.children,K=fZ(Q,W,J.key);return m9(Z,K,0,X)}else if(J instanceof hZ){let{attributes:X,children:K}=J,G=fZ(Q,W,J.key),Y=v9(Z,G,X);return m9(Y,G,0,K)}else if(J instanceof _Z)return Z;else{let X=J.attributes,K=fZ(Q,W,J.key);return v9(Z,K,X)}}function XQ(Z,Q,W,J){let X=d9(Z.handlers,Q,W,J);return new JQ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function DJ(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(H instanceof N)return K;else{let{head:U,tail:F}=H;Z=s9(K,G,V,Y,U),Q=G,W=V,J=Y+1,X=F}}}function s9(Z,Q,W,J,X){if(X instanceof bZ){let K=X.children,G=fZ(W,J,X.key),V=zQ(Q,X.mapper);return DJ(Z,V,G,0,K)}else if(X instanceof hZ){let{attributes:K,children:G}=X,V=fZ(W,J,X.key),Y=zQ(Q,X.mapper),U=$9(Z,Y,V,K);return DJ(U,Y,V,0,G)}else if(X instanceof _Z)return Z;else{let K=X.attributes,G=fZ(W,J,X.key),V=zQ(Q,X.mapper);return $9(Z,V,G,K)}}function KQ(Z,Q,W,J,X){let K=s9(Z.handlers,Q,W,J,X);return new JQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function r9(Z){return KQ(AJ(),XZ,F6,0,Z)}function n9(Z,Q,W,J,X){let K=DJ(Z.handlers,Q,W,J,X);return new JQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function PZ(Z,Q,W){return bW("",XZ,"",Z,Q,W,TZ(),!1,fW(Z,""))}function hW(Z){return NJ("",XZ,Z)}function i9(){return NJ("",XZ,"")}function h(Z){return hW(Z)}function l9(Z,Q){return PZ("article",Z,Q)}function a9(Z,Q){return PZ("h1",Z,Q)}function xQ(Z,Q){return PZ("div",Z,Q)}function SJ(Z,Q){return PZ("p",Z,Q)}function CJ(Z,Q){return PZ("pre",Z,Q)}function vW(Z,Q){return PZ("a",Z,Q)}function mZ(Z,Q){return PZ("span",Z,Q)}function z6(Z,Q){return PZ("button",Z,Q)}function oZ(Z){return PZ("input",Z,b)}function GQ(Z,Q){return PZ("label",Z,Q)}function o9(Z,Q){return PZ("textarea",R(MJ("value",PW(Q)),Z),M([hW(Q)]))}class $W extends z{constructor(Z,Q,W,J){super();this.index=Z,this.removed=Q,this.changes=W,this.children=J}}class e9 extends z{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class Z0 extends z{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class Q0 extends z{constructor(Z,Q,W){super();this.kind=Z,this.added=Q,this.removed=W}}class W0 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.before=W}}class J0 extends z{constructor(Z,Q,W){super();this.kind=Z,this.index=Q,this.with=W}}class X0 extends z{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class K0 extends z{constructor(Z,Q,W){super();this.kind=Z,this.children=Q,this.before=W}}var wJ=0,EJ=1,xJ=2,kJ=3,yJ=4,gJ=5,fJ=6;function bJ(Z,Q,W,J){return new $W(Z,Q,W,J)}function G0(Z){return new e9(wJ,Z)}function V0(Z){return new Z0(EJ,Z)}function hJ(Z,Q){return new Q0(xJ,Z,Q)}function Y0(Z,Q){return new W0(kJ,Z,Q)}function H0(Z){return new X0(yJ,Z)}function kQ(Z,Q){return new J0(gJ,Z,Q)}function _J(Z,Q){return new K0(fJ,Z,Q)}class U0 extends z{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=W,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=K,this.provided_contexts=G,this.vdom=V}}class F0 extends z{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class q0 extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.data=W}}class R0 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}class I6 extends z{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class N6 extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class O6 extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class j6 extends z{constructor(Z,Q,W,J){super();this.kind=Z,this.path=Q,this.name=W,this.event=J}}class vJ extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}var u7=0,c7=1,p7=2,d7=3;function z0(Z,Q,W,J,X,K,G){return new U0(u7,Z,Q,W,J,X,K,G)}function $J(Z){return new F0(c7,Z)}function I0(Z,Q){return new q0(p7,Z,Q)}function N0(Z,Q){return new R0(d7,Z,Q)}class D6 extends z{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class D0 extends z{constructor(Z,Q,W){super();this.added=Z,this.removed=Q,this.events=W}}function s7(Z,Q,W,J){if(W==="input"&&Q==="")return R6(Z,J);else if(W==="select"&&Q==="")return R6(Z,J);else if(W==="textarea"&&Q==="")return R6(Z,J);else return!1}function j0(Z,Q,W,J,X,K,G,V){while(!0){let Y=Z,H=Q,U=W,F=J,q=X,B=K,A=G,T=V;if(q instanceof N)if(B instanceof N)return new D0(A,T,F);else{let O=B.head;if(O instanceof BZ){let P=O,D=B.tail,S=O.name,C=O.handler,I=R(P,A),L=eQ(F,U,H,S,C);Z=Y,Q=H,W=U,J=L,X=q,K=D,G=I,V=T}else{let P=O,D=B.tail,S=R(P,A);Z=Y,Q=H,W=U,J=F,X=q,K=D,G=S,V=T}}else if(B instanceof N){let O=q.head;if(O instanceof BZ){let P=O,D=q.tail,S=O.name,C=R(P,T),I=q6(F,H,S);Z=Y,Q=H,W=U,J=I,X=D,K=B,G=A,V=C}else{let P=O,D=q.tail,S=R(P,T);Z=Y,Q=H,W=U,J=F,X=D,K=B,G=A,V=S}}else{let{head:O,tail:P}=q,D=B.head,S=B.tail,C=H6(O,D);if(C instanceof WZ)if(O instanceof BZ){let I=O.name,L=R(O,T),w=q6(F,H,I);Z=Y,Q=H,W=U,J=w,X=P,K=B,G=A,V=L}else{let I=R(O,T);Z=Y,Q=H,W=U,J=F,X=P,K=B,G=A,V=I}else if(C instanceof JZ)if(O instanceof iZ)if(D instanceof iZ){let I,L=D.name;if(L==="value")I=Y||O.value!==D.value;else if(L==="checked")I=Y||O.value!==D.value;else if(L==="selected")I=Y||O.value!==D.value;else I=O.value!==D.value;let w=I,k;if(w)k=R(D,A);else k=A;let g=k;Z=Y,Q=H,W=U,J=F,X=P,K=S,G=g,V=T}else if(D instanceof BZ){let{name:I,handler:L}=D,w=R(D,A),k=R(O,T),g=eQ(F,U,H,I,L);Z=Y,Q=H,W=U,J=g,X=P,K=S,G=w,V=k}else{let I=R(D,A),L=R(O,T);Z=Y,Q=H,W=U,J=F,X=P,K=S,G=I,V=L}else if(O instanceof LW)if(D instanceof LW){let I,L=D.name;if(L==="scrollLeft")I=!0;else if(L==="scrollRight")I=!0;else if(L==="value")I=Y||!$Z(O.value,D.value);else if(L==="checked")I=Y||!$Z(O.value,D.value);else if(L==="selected")I=Y||!$Z(O.value,D.value);else I=!$Z(O.value,D.value);let w=I,k;if(w)k=R(D,A);else k=A;let g=k;Z=Y,Q=H,W=U,J=F,X=P,K=S,G=g,V=T}else if(D instanceof BZ){let{name:I,handler:L}=D,w=R(D,A),k=R(O,T),g=eQ(F,U,H,I,L);Z=Y,Q=H,W=U,J=g,X=P,K=S,G=w,V=k}else{let I=R(D,A),L=R(O,T);Z=Y,Q=H,W=U,J=F,X=P,K=S,G=I,V=L}else if(D instanceof BZ){let{name:I,handler:L}=D,w=O.prevent_default.kind!==D.prevent_default.kind||O.stop_propagation.kind!==D.stop_propagation.kind||O.debounce!==D.debounce||O.throttle!==D.throttle,k;if(w)k=R(D,A);else k=A;let g=k,y=eQ(F,U,H,I,L);Z=Y,Q=H,W=U,J=y,X=P,K=S,G=g,V=T}else{let I=O.name,L=R(D,A),w=R(O,T),k=q6(F,H,I);Z=Y,Q=H,W=U,J=k,X=P,K=S,G=L,V=w}else if(D instanceof BZ){let{name:I,handler:L}=D,w=R(D,A),k=eQ(F,U,H,I,L);Z=Y,Q=H,W=U,J=k,X=q,K=S,G=w,V=T}else{let I=R(D,A);Z=Y,Q=H,W=U,J=F,X=q,K=S,G=I,V=T}}}}function mJ(Z,Q,W,J,X,K,G,V,Y,H,U,F,q,B){while(!0){let A=Z,T=Q,O=W,P=J,D=X,S=K,C=G,I=V,L=Y,w=H,k=U,g=F,y=q,u=B;if(A instanceof N)if(O instanceof N)return new D6(new $W(L,C,k,g),u);else{let e=n9(u,y,w,I,O),t=_J(O,I-S),s=R(t,k);return new D6(new $W(L,C,s,g),e)}else if(O instanceof N){let{head:e,tail:t}=A,s;if(e.key===""||!kW(D,e.key))s=C+1;else s=C;let _=s,p=XQ(u,w,I,e);Z=t,Q=T,W=O,J=P,X=D,K=S,G=_,V=I,Y=L,H=w,U=k,F=g,q=y,B=p}else{let e=A.head,t=O.head;if(e.key!==t.key){let s=A.tail,r=O.tail,_=xW(T,t.key);if(kW(P,e.key))if(_ instanceof j){let f=_[0];if(kW(D,e.key))Z=s,Q=T,W=O,J=P,X=D,K=S-1,G=C,V=I,Y=L,H=w,U=k,F=g,q=y,B=u;else{let m=I-S,v=R(Y0(t.key,m),k),a=CQ(D,t.key,void 0),$=S+1;Z=R(f,A),Q=T,W=O,J=P,X=a,K=$,G=C,V=I,Y=L,H=w,U=v,F=g,q=y,B=u}}else{let f=I-S,d=KQ(u,y,w,I,t),m=_J(M([t]),f),v=R(m,k);Z=A,Q=T,W=r,J=P,X=D,K=S+1,G=C,V=I+1,Y=L,H=w,U=v,F=g,q=y,B=d}else if(_ instanceof j){let f=I-S,d=R(H0(f),k),m=XQ(u,w,I,e),v=S-1;Z=s,Q=T,W=O,J=P,X=D,K=v,G=C,V=I,Y=L,H=w,U=d,F=g,q=y,B=m}else{let f=kQ(I-S,t),d,v=XQ(u,w,I,e);d=KQ(v,y,w,I,t);let a=d;Z=s,Q=T,W=r,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=R(f,k),F=g,q=y,B=a}}else{let s=A.head;if(s instanceof bZ){let r=O.head;if(r instanceof bZ){let _=s,p=A.tail,f=r,d=O.tail,m=zQ(y,f.mapper),v=fZ(w,I,f.key),a=mJ(_.children,_.keyed_children,f.children,f.keyed_children,TZ(),0,0,0,I,v,b,b,m,u),$,o=a.patch;if(o.changes instanceof N)if(o.children instanceof N)if(o.removed===0)$=g;else $=R(a.patch,g);else $=R(a.patch,g);else $=R(a.patch,g);let qZ=$;Z=p,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=k,F=qZ,q=y,B=a.events}else{let _=s,p=A.tail,f=r,d=O.tail,m=kQ(I-S,f),v,$=XQ(u,w,I,_);v=KQ($,y,w,I,f);let o=v;Z=p,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=R(m,k),F=g,q=y,B=o}}else if(s instanceof hZ){let r=O.head;if(r instanceof hZ){let _=s,p=r;if(_.namespace===p.namespace&&_.tag===p.tag){let f=A.tail,d=O.tail,m=zQ(y,p.mapper),v=fZ(w,I,p.key),a=s7(u,p.namespace,p.tag,v),$=j0(a,v,m,u,_.attributes,p.attributes,b,b),o,KZ,qZ;o=$.added,KZ=$.removed,qZ=$.events;let cZ;if(o instanceof N&&KZ instanceof N)cZ=b;else cZ=M([hJ(o,KZ)]);let NQ=cZ,eZ=mJ(_.children,_.keyed_children,p.children,p.keyed_children,TZ(),0,0,0,I,v,NQ,b,m,qZ),EZ,UQ=eZ.patch;if(UQ.changes instanceof N)if(UQ.children instanceof N)if(UQ.removed===0)EZ=g;else EZ=R(eZ.patch,g);else EZ=R(eZ.patch,g);else EZ=R(eZ.patch,g);let KX=EZ;Z=f,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=k,F=KX,q=y,B=eZ.events}else{let f=s,d=A.tail,m=r,v=O.tail,a=kQ(I-S,m),$,KZ=XQ(u,w,I,f);$=KQ(KZ,y,w,I,m);let qZ=$;Z=d,Q=T,W=v,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=R(a,k),F=g,q=y,B=qZ}}else{let _=s,p=A.tail,f=r,d=O.tail,m=kQ(I-S,f),v,$=XQ(u,w,I,_);v=KQ($,y,w,I,f);let o=v;Z=p,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=R(m,k),F=g,q=y,B=o}}else if(s instanceof _Z){let r=O.head;if(r instanceof _Z){let _=s,p=r;if(_.content===p.content){let f=A.tail,d=O.tail;Z=f,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=k,F=g,q=y,B=u}else{let f=A.tail,d=r,m=O.tail,v=bJ(I,0,M([G0(d.content)]),b);Z=f,Q=T,W=m,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=k,F=R(v,g),q=y,B=u}}else{let _=s,p=A.tail,f=r,d=O.tail,m=kQ(I-S,f),v,$=XQ(u,w,I,_);v=KQ($,y,w,I,f);let o=v;Z=p,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=R(m,k),F=g,q=y,B=o}}else{let r=O.head;if(r instanceof oQ){let _=s,p=A.tail,f=r,d=O.tail,m=zQ(y,f.mapper),v=fZ(w,I,f.key),a=j0(!1,v,m,u,_.attributes,f.attributes,b,b),$,o,KZ;$=a.added,o=a.removed,KZ=a.events;let qZ;if($ instanceof N&&o instanceof N)qZ=b;else qZ=M([hJ($,o)]);let cZ=qZ,NQ;if(_.inner_html===f.inner_html)NQ=cZ;else NQ=R(V0(f.inner_html),cZ);let EZ=NQ,UQ;if(EZ instanceof N)UQ=g;else UQ=R(bJ(I,0,EZ,M([])),g);let z8=UQ;Z=p,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=k,F=z8,q=y,B=KZ}else{let _=s,p=A.tail,f=r,d=O.tail,m=kQ(I-S,f),v,$=XQ(u,w,I,_);v=KQ($,y,w,I,f);let o=v;Z=p,Q=T,W=d,J=P,X=D,K=S,G=C,V=I+1,Y=L,H=w,U=R(m,k),F=g,q=y,B=o}}}}}}function QW(Z,Q,W){return mJ(M([Q]),TZ(),M([W]),TZ(),TZ(),0,0,0,0,F6,b,b,XZ,u9(Z))}var{setTimeout:r7,clearTimeout:uJ}=globalThis,n7=(Z,Q)=>wZ().createElementNS(Z,Q),i7=(Z)=>wZ().createTextNode(Z),l7=()=>wZ().createDocumentFragment(),WW=(Z,Q,W)=>Z.insertBefore(Q,W),A0=q9?(Z,Q,W)=>Z.moveBefore(Q,W):WW,a7=(Z,Q)=>Z.removeChild(Q),o7=(Z,Q)=>Z.getAttribute(Q),T0=(Z,Q,W)=>Z.setAttribute(Q,W),t7=(Z,Q)=>Z.removeAttribute(Q),e7=(Z,Q,W,J)=>Z.addEventListener(Q,W,J),P0=(Z,Q,W)=>Z.removeEventListener(Q,W),ZK=(Z,Q)=>Z.innerHTML=Q,QK=(Z,Q)=>Z.data=Q,VQ=Symbol("lustre");class C0{constructor(Z,Q,W,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=W,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===vZ?this.node.parentNode:this.node}}var YQ=(Z,Q,W,J,X)=>{let K=new C0(Z,Q,W,X);return W[VQ]=K,Q?.children.splice(J,0,K),K},WK=(Z)=>{let Q="";for(let W=Z[VQ];W.parent;W=W.parent)if(W.key)Q=`${gW}${W.key}${Q}`;else{let J=W.parent.children.indexOf(W);Q=`${gW}${J}${Q}`}return Q.slice(1)};class pJ{#Z=null;#X;#W;#J=!1;constructor(Z,Q,W,{exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#W=W,this.#J=J}mount(Z){YQ(wQ,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[VQ],0,Z)}push(Z){this.#Q.push({node:this.#Z[VQ],patch:Z}),this.#K()}#Q=[];#K(){let Z=this.#Q;while(Z.length){let{node:Q,patch:W}=Z.pop(),{children:J}=Q,{changes:X,removed:K,children:G}=W;if(yQ(X,(V)=>this.#G(Q,V)),K)this.#F(Q,J.length-K,K);yQ(G,(V)=>{let Y=J[V.index|0];this.#Q.push({node:Y,patch:V})})}}#G(Z,Q){switch(Q.kind){case wJ:this.#T(Z,Q);break;case EJ:this.#j(Z,Q);break;case xJ:this.#R(Z,Q);break;case kJ:this.#M(Z,Q);break;case yJ:this.#I(Z,Q);break;case gJ:this.#U(Z,Q);break;case fJ:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:W}){let J=l7(),X=this.#H(Z,W);this.#N(J,null,Z,W|0,Q),WW(Z.parentNode,J,X)}#U(Z,{index:Q,with:W}){this.#F(Z,Q|0,1);let J=this.#H(Z,Q);this.#O(Z.parentNode,J,Z,Q|0,W)}#H(Z,Q){Q=Q|0;let{children:W}=Z,J=W.length;if(Q<J)return W[Q].node;let X=W[J-1];if(!X&&Z.kind!==vZ)return null;if(!X)X=Z;while(X.kind===vZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#M(Z,{key:Q,before:W}){W=W|0;let{children:J,parentNode:X}=Z,K=J[W].node,G=J[W];for(let U=W+1;U<J.length;++U){let F=J[U];if(J[U]=G,G=F,F.key===Q){J[W]=F;break}}let{kind:V,node:Y,children:H}=G;if(A0(X,Y,K),V===vZ)this.#V(X,H,K)}#V(Z,Q,W){for(let J=0;J<Q.length;++J){let{kind:X,node:K,children:G}=Q[J];if(A0(Z,K,W),X===vZ)this.#V(Z,G,W)}}#I(Z,{index:Q}){this.#F(Z,Q,1)}#F(Z,Q,W){let{children:J,parentNode:X}=Z,K=J.splice(Q,W);for(let G=0;G<K.length;++G){let{kind:V,node:Y,children:H}=K[G];if(a7(X,Y),this.#q(K[G]),V===vZ)K.push(...H)}}#q(Z){let{debouncers:Q,children:W}=Z;for(let{timeout:J}of Q.values())if(J)uJ(J);Q.clear(),yQ(W,(J)=>this.#q(J))}#R({node:Z,handlers:Q,throttles:W,debouncers:J},{added:X,removed:K}){yQ(K,({name:G})=>{if(Q.delete(G))P0(Z,G,cJ),this.#z(W,G,0),this.#z(J,G,0);else t7(Z,G),S0[G]?.removed?.(Z,G)}),yQ(X,(G)=>this.#A(Z,G))}#T({node:Z},{content:Q}){QK(Z,Q??"")}#j({node:Z},{inner_html:Q}){ZK(Z,Q??"")}#N(Z,Q,W,J,X){yQ(X,(K)=>this.#O(Z,Q,W,J++,K))}#O(Z,Q,W,J,X){switch(X.kind){case wQ:{let K=this.#D(W,J,X);this.#N(K,null,K[VQ],0,X.children),WW(Z,K,Q);break}case tQ:{let K=this.#B(W,J,X);WW(Z,K,Q);break}case vZ:{let K=this.#B(W,J,X);WW(Z,K,Q),this.#N(Z,Q,K[VQ],0,X.children);break}case h9:{let K=this.#D(W,J,X);this.#j({node:K},X),WW(Z,K,Q);break}}}#D(Z,Q,{kind:W,key:J,tag:X,namespace:K,attributes:G}){let V=n7(K||G6,X);if(YQ(W,Z,V,Q,J),this.#J&&J)T0(V,"data-lustre-key",J);return yQ(G,(Y)=>this.#A(V,Y)),V}#B(Z,Q,{kind:W,key:J,content:X}){let K=i7(X??"");return YQ(W,Z,K,Q,J),K}#A(Z,Q){let{debouncers:W,handlers:J,throttles:X}=Z[VQ],{kind:K,name:G,value:V,prevent_default:Y,debounce:H,throttle:U}=Q;switch(K){case XJ:{let F=V??"";if(G==="virtual:defaultValue"){Z.defaultValue=F;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(F!==o7(Z,G))T0(Z,G,F);S0[G]?.added?.(Z,F);break}case KJ:Z[G]=V;break;case GJ:{if(J.has(G))P0(Z,G,cJ);let F=Y.kind===VJ;e7(Z,G,cJ,{passive:F}),this.#z(X,G,U),this.#z(W,G,H),J.set(G,(q)=>this.#P(Q,q));break}}}#z(Z,Q,W){let J=Z.get(Q);if(W>0)if(J)J.delay=W;else Z.set(Q,{delay:W});else if(J){let{timeout:X}=J;if(X)uJ(X);Z.delete(Q)}}#P(Z,Q){let{currentTarget:W,type:J}=Q,{debouncers:X,throttles:K}=W[VQ],G=WK(W),{prevent_default:V,stop_propagation:Y,include:H}=Z;if(V.kind===HJ)Q.preventDefault();if(Y.kind===HJ)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let U=this.#X(Q,G,J,H),F=K.get(J);if(F){let B=Date.now(),A=F.last||0;if(B>A+F.delay)F.last=B,F.lastEvent=Q,this.#W(Q,U)}let q=X.get(J);if(q)uJ(q.timeout),q.timeout=r7(()=>{if(Q===K.get(J)?.lastEvent)return;this.#W(Q,U)},q.delay);if(!F&&!q)this.#W(Q,U)}}var yQ=(Z,Q)=>{if(Array.isArray(Z))for(let W=0;W<Z.length;W++)Q(Z[W]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},cJ=(Z)=>{let{currentTarget:Q,type:W}=Z;Q[VQ].handlers.get(W)(Z)},L0=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},JK=(Z)=>{return{added(Q,W){Q[Z]=W}}},S0={checked:L0("checked"),selected:L0("selected"),value:JK("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function XK(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof N)return[X,l(K)];else{let G=J.tail,V=J.head[0],Y=J.head[1],H=_9(V,Y),U;if(V==="")U=X;else U=CQ(X,V,H);let F=U,q=R(H,K);Z=G,Q=F,W=q}}}function dJ(Z){return XK(Z,TZ(),b)}function w0(Z,Q,W){let J=dJ(W),X,K;return X=J[0],K=J[1],bW("",XZ,"",Z,Q,K,X,!1,fW(Z,""))}function E0(Z,Q,W,J){let X=dJ(J),K,G;return K=X[0],G=X[1],bW("",XZ,Z,Q,W,G,K,!1,fW(Q,Z))}function x0(Z){let Q=dJ(Z),W,J;return W=Q[0],J=Q[1],IJ("",XZ,J,W)}var k0=(Z)=>{let Q=YQ(wQ,null,Z,0,null),W=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(y0(G))W+=1;if(W===0){let G=wZ().createTextNode("");return YQ(tQ,Q,G,0,null),Z.replaceChildren(G),i9()}if(W===1)return sJ(Q,Z).head[1];let J=wZ().createTextNode(""),X=YQ(vZ,Q,J,0,null),K=sJ(X,Z);return Z.insertBefore(J,Z.firstChild),x0(K)},y0=(Z)=>{switch(Z.nodeType){case V6:return!0;case WJ:return!!Z.data;default:return!1}},KK=(Z,Q,W,J)=>{if(!y0(Q))return null;switch(Q.nodeType){case V6:{let X=YQ(wQ,Z,Q,J,W),K=Q.localName,G=Q.namespaceURI,V=!G||G===G6;if(V&&GK.includes(K))VK(K,Q);let Y=YK(Q),H=sJ(X,Q);return V?w0(K,Y,H):E0(G,K,Y,H)}case WJ:return YQ(tQ,Z,Q,J,null),hW(Q.data);default:return null}},GK=["input","select","textarea"],VK=(Z,Q)=>{let{value:W,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!W)return;queueMicrotask(()=>{if(Q.value=W,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),wZ().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},sJ=(Z,Q)=>{let W=null,J=Q.firstChild,X=null,K=0;while(J){let G=J.nodeType===V6?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let V=KK(Z,J,G,K),Y=J.nextSibling;if(V){let H=new xZ([G??"",V],null);if(X)X=X.tail=H;else X=W=H;K+=1}else Q.removeChild(J);J=Y}if(!X)return b;return X.tail=b,W},YK=(Z)=>{let Q=Z.attributes.length,W=b;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;W=new xZ(HK(J),W)}return W},HK=(Z)=>{let{localName:Q,value:W}=Z;return OZ(Q,W)};var mW=()=>!!wZ();class B6{constructor(Z,[Q,W],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#W=X,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#G.has(V.context))return;V.stopImmediatePropagation();let Y=this.#G.get(V.context);if(V.subscribe){let H=()=>{Y.subscribers=Y.subscribers.filter((U)=>U!==V.callback)};Y.subscribers.push([V.callback,H]),V.callback(Y.value,H)}else V.callback(Y.value)});let K=(V,Y,H)=>TJ(this.#Q,Y,H,V),G=(V,Y)=>{let[H,U]=PJ(this.#Q,Y);if(this.#Q=H,U.isOk()){let F=U[0];if(F.stop_propagation)V.stopPropagation();if(F.prevent_default)V.preventDefault();this.dispatch(F.message,!1)}};this.#K=new pJ(this.root,K,G),this.#J=k0(this.root),this.#Q=AJ(),this.#q(W),this.#R()}root=null;dispatch(Z,Q=!1){if(this.#Y)this.#U.push(Z);else{let[W,J]=this.#W(this.#Z,Z);this.#Z=W,this.#F(J,Q)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#G.has(Z))this.#G.set(Z,{value:Q,subscribers:[]});else{let W=this.#G.get(Z);if($Z(W.value,Q))return;W.value=Q;for(let J=W.subscribers.length-1;J>=0;J--){let[X,K]=W.subscribers[J];if(!X){W.subscribers.splice(J,1);continue}X(Q,K)}}}#Z;#X;#W;#J;#Q;#K;#G=new Map;#Y=!1;#U=[];#H=b;#M=b;#V=null;#I={dispatch:(Z)=>this.dispatch(Z),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#F(Z,Q=!1){if(this.#q(Z),!this.#V)if(Q)this.#V="sync",queueMicrotask(()=>this.#R());else this.#V=requestAnimationFrame(()=>this.#R())}#q(Z){this.#Y=!0;while(!0){for(let W=Z.synchronous;W.tail;W=W.tail)W.head(this.#I);if(this.#H=f0(this.#H,Z.before_paint),this.#M=f0(this.#M,Z.after_paint),!this.#U.length)break;let Q=this.#U.shift();[this.#Z,Z]=this.#W(this.#Z,Q)}this.#Y=!1}#R(){this.#V=null;let Z=this.#X(this.#Z),{patch:Q,events:W}=QW(this.#Q,this.#J,Z);if(this.#Q=W,this.#J=Z,this.#K.push(Q),this.#H instanceof xZ){let J=g0(this.#H);this.#H=b,queueMicrotask(()=>{this.#F(J,!0)})}if(this.#M instanceof xZ){let J=g0(this.#M);this.#M=b,requestAnimationFrame(()=>{this.#F(J,!0)})}}}function g0(Z){return{synchronous:Z,after_paint:b,before_paint:b}}function f0(Z,Q){if(Z instanceof N)return Q;else if(Q instanceof N)return Z;else return sZ(Z,Q)}class nJ extends z{constructor(Z){super();this.message=Z}}class iJ extends z{constructor(Z){super();this.callback=Z}}class lJ extends z{constructor(Z){super();this.callback=Z}}class IQ extends z{constructor(Z){super();this.message=Z}}class gQ extends z{constructor(Z,Q){super();this.name=Z,this.data=Q}}class A6 extends z{constructor(Z,Q){super();this.key=Z,this.value=Q}}class fQ extends z{}class h0 extends z{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=W,this.attributes=J,this.properties=X,this.contexts=K,this.is_form_associated=G,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function _0(Z){let Q=new h0(!0,!0,!1,b,b,b,!1,Y6,Y6,Y6);return i(Z,Q,(W,J)=>{return J.apply(W)})}class $0{#Z;constructor(Z,[Q,W],J,X){this.#Z=new B6(Z,[Q,W],X,J)}send(Z){switch(Z.constructor){case IQ:{this.dispatch(Z.message,!1);break}case gQ:{this.emit(Z.name,Z.data);break}case fQ:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,Q){this.#Z.emit(Z,Q)}}var m0=({init:Z,update:Q,view:W},J,X)=>{if(!mW())return new E(new uW);let K=J instanceof HTMLElement?J:wZ().querySelector(J);if(!K)return new E(new aJ(J));return new j(new $0(K,Z(X),Q,W))};class MK{#Z;#X;#W;#J;#Q;#K;#G=DZ();#Y=new Set;constructor([Z,Q],W,J,X){this.#Z=Z,this.#X=W,this.#W=J,this.#J=X,this.#Q=this.#W(this.#Z),this.#K=r9(this.#Q),this.#V(Q)}send(Z){switch(Z.constructor){case nJ:{let{message:Q}=Z,W=this.#U(Q),J=QW(this.#K,this.#Q,W);this.#Q=W,this.#K=J.events,this.broadcast($J(J.patch));return}case iJ:{let{callback:Q}=Z;this.#Y.add(Q),Q(z0(this.#J.open_shadow_root,this.#J.adopt_styles,TW(this.#J.attributes),TW(this.#J.properties),TW(this.#J.contexts),this.#G,this.#Q));return}case lJ:{let{callback:Q}=Z;this.#Y.delete(Q);return}case IQ:{let{message:Q}=Z,[W,J]=this.#X(this.#Z,Q),X=this.#W(W),K=QW(this.#K,this.#Q,X);this.#V(J),this.#Z=W,this.#Q=X,this.#K=K.events,this.broadcast($J(K.patch));return}case gQ:{let{name:Q,data:W}=Z;this.broadcast(I0(Q,W));return}case A6:{let{key:Q,value:W}=Z,J=UZ(this.#G,Q);if(J.isOk()&&$Z(J[0],W))return;this.#G=RZ(this.#G,Q,W),this.broadcast(N0(Q,W));return}case fQ:{this.#Z=null,this.#X=null,this.#W=null,this.#J=null,this.#Q=null,this.#K=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#U(Z){switch(Z.constructor){case I6:{let{messages:Q}=Z,W=this.#Z,J=VZ();for(let X=Q;X.head;X=X.tail){let K=this.#U(X.head);if(K instanceof j){W=K[0][0],J=k9(jZ.fromArray([J,K[0][1]]));break}}return this.#V(J),this.#Z=W,this.#W(this.#Z)}case N6:{let{name:Q,value:W}=Z,J=this.#H(Q,W);if(J instanceof E)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case O6:{let{name:Q,value:W}=Z,J=this.#M(Q,W);if(J instanceof E)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case j6:{let{path:Q,name:W,event:J}=Z,[X,K]=LJ(this.#K,Q,W,J);if(this.#K=X,K instanceof E)return this.#Q;else{let[G,V]=this.#X(this.#Z,K[0].message);return this.#V(V),this.#Z=G,this.#W(this.#Z)}}case vJ:{let{key:Q,value:W}=Z,J=UZ(this.#J.contexts,Q);if(J instanceof E)return this.#Q;if(J=qQ(W,J[0]),J instanceof E)return this.#Q;let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}}#H(Z,Q){let W=UZ(this.#J.attributes,Z);switch(W.constructor){case j:return W[0](Q);case E:return new E(void 0)}}#M(Z,Q){let W=UZ(this.#J.properties,Z);switch(W.constructor){case j:return W[0](Q);case E:return new E(void 0)}}#V(Z){let Q=(G)=>this.send(new IQ(G)),W=(G,V)=>this.send(new gQ(G,V)),J=()=>{return},X=()=>{return},K=(G,V)=>this.send(new A6(G,V));globalThis.queueMicrotask(()=>{E9(Z,Q,W,J,X,K)})}}class u0 extends z{constructor(Z,Q,W,J){super();this.init=Z,this.update=Q,this.view=W,this.config=J}}class aJ extends z{constructor(Z){super();this.selector=Z}}class uW extends z{}function c0(Z,Q,W){return new u0(Z,Q,W,_0(b))}function p0(Z,Q,W){return U9(!mW(),new E(new uW),()=>{return m0(Z,Q,W)})}function d0(Z,Q){return A9(Z,AW(Q,(W)=>{return new SW(!1,!1,W)}),b,YJ,YJ,0,0)}function HQ(Z){return d0("click",X6(Z))}function JW(Z){return d0("input",n8(M(["target","value"]),J6,(Q)=>{return X6(Z(Q))}))}function s0(Z,Q){window.setTimeout(Q,Z)}var dW="src\\day25factory.gleam";class oJ extends z{constructor(Z){super();this.bits=Z}}class l0 extends z{constructor(Z){super();this.num_amts=Z}}class tJ extends z{constructor(Z){super();this.buttons_used=Z}}class a0 extends z{constructor(Z){super();this.combo=Z}}class eJ extends z{constructor(Z){super();this.cfp=Z}}class uZ extends z{}class tZ extends z{}class L6 extends z{constructor(Z){super();this[0]=Z}}class S6 extends z{constructor(Z){super();this.num_ctrs=Z}}class Z8 extends z{constructor(Z,Q){super();this.child_tree=Z,this.to_child=Q}}class MQ extends z{constructor(Z,Q,W,J){super();this.levels=Z,this.cost=Q,this.children=W,this.was_pulled_from_cache=J}}class W8 extends z{constructor(Z){super();this.level_costs=Z}}class VW extends z{constructor(Z,Q,W,J,X,K){super();this.btns=Z,this.goal_bits_parity=Q,this.num_bits=W,this.combos=J,this.check_combo=X,this.check_combo_parity=K}}class J8 extends z{constructor(Z,Q,W){super();this.combos=Z,this.tree=Q,this.cost_for_levels=W}}class FZ extends z{}class o0 extends z{}class pW extends z{constructor(Z,Q,W){super();this.unknown=Z,this.impossible=Q,this.val=W}}class ZZ extends z{constructor(Z,Q,W,J,X,K,G,V,Y,H,U,F,q){super();this.on_index=Z,this.all_done=Q,this.colors=W,this.onoff_or_level_input=J,this.cache_enabled=X,this.set_speed=K,this.default_speed_ms=G,this.flip_tree=V,this.play=Y,this.in=H,this.problems=U,this.count=F,this.out=q}}class XW extends z{constructor(Z,Q){super();this.millisec=Z,this.index=Q}}class X8 extends z{constructor(Z){super();this[0]=Z}}class K8 extends z{constructor(Z){super();this[0]=Z}}class C6 extends z{constructor(Z){super();this[0]=Z}}class G8 extends z{}class V8 extends z{}class Y8 extends z{}class H8 extends z{constructor(Z){super();this[0]=Z}}class M8 extends z{}class U8 extends z{}class F8 extends z{}class q8 extends z{constructor(Z){super();this[0]=Z}}class R8 extends z{constructor(Z){super();this[0]=Z}}class t0 extends z{constructor(Z){super();this[0]=Z}}class T6 extends z{constructor(Z){super();this[0]=Z}}class e0 extends z{constructor(Z){super();this[0]=Z}}var RK=`[.##.] (3) (1,3) (2) (2,3) (0,2) (0,1) {3,5,4,7}
[...#.] (0,2,3,4) (2,3) (0,4) (0,1,2) (1,2,3,4) {7,5,12,7,2}
[.###.#] (0,1,2,3,4) (0,3,4) (0,1,2,4,5) (1,2) {10,11,11,5,10,5}`;function KW(Z){if(Z===0)return 1;else if(Z===1)return 2;else if(Z===2)return 4;else if(Z===3)return 8;else if(Z===4)return 16;else if(Z===5)return 32;else if(Z===6)return 64;else if(Z===7)return 128;else if(Z===8)return 256;else if(Z===9)return 512;else if(Z===10)return 1024;else if(Z===11)return 2048;else return 2*KW(Z-1)}function zK(Z){let Q=(()=>{return IW(Z)})();if(Q instanceof j){let W=Q[0];return new j((()=>{return c(W)})())}else return p6(Z)}function ZX(Z){if(Z===-3.001)return 0;else{let Q=k8(10,Z),W;if(Q instanceof j)W=Q[0];else throw OQ("let_assert",dW,"day25factory",46,"speed_float_to_sec","Pattern match failed, no pattern matched the value.",{value:Q,start:920,end:966,pattern_start:931,pattern_end:936});return W}}function IK(Z){let Q=ZX(Z)*1000;return _Q(Q)}function QX(Z){return V9(Z,0,(Q,W)=>{return aW(Q,W.bits)})}function WX(Z){return LQ(Z.num_ctrs,0,(Q,W,J)=>{if(J%2===0)return Q;else return aW(Q,KW(W))})}function NK(Z){let Q,W=Z.levels.num_ctrs,J=RQ(W);Q=MZ(J,(Y)=>{return Y[1]});let X=Q,K;if(K=uQ(X,(Y)=>{return Y!==0}),K instanceof j){let Y;if(Y=uQ(X,(F)=>{return F<0}),Y instanceof j)return new MQ(Z.levels,new tZ,Z.children,Z.was_pulled_from_cache);else return Z}else return new MQ(Z.levels,new L6(0),Z.children,Z.was_pulled_from_cache)}function OK(Z,Q){if(Q instanceof n){let W=Q[0],J=(()=>{let X=W.level_costs;return UZ(X,Z.levels)})();if(J instanceof j){let X=J[0];return new MQ(Z.levels,X,Z.children,!0)}else return Z}else return Z}function r0(Z,Q){return new S6((()=>{let W=Z.num_ctrs;return W9(W,(J,X)=>{let K,G=(()=>{let Y=Q.num_amts;return UZ(Y,J)})();if(G instanceof j){let Y=G[0];K=X-Y}else K=X;let V=K;return globalThis.Math.trunc(V/2)})})())}function JX(Z,Q,W){let J=(()=>{let X=Z.cfp;return UZ(X,(()=>{let K=Q.levels;return WX(K)})())})();if(J instanceof j){let X=J[0],K,G=X.combo,V=RQ(G);K=uQ(V,(H)=>{let U=H[0],F,q=Q.levels;F=r0(q,U);let B=F,A,T=Q.children;A=uQ(T,(P)=>{return QZ(P.child_tree.levels,B)});let O=A;if(O instanceof j)return O[0].child_tree.cost instanceof uZ;else return!0});let Y=K;if(Y instanceof j){let H=Y[0],U,F=Q.levels;U=r0(F,H[0]);let q=U,B,A=Q.children;B=uQ(A,(C)=>{return QZ(C.child_tree.levels,q)});let T=B,O;if(T instanceof j){let C=T[0],I=JX(Z,C.child_tree,W),L,w;L=I[0],w=I[1];let k=new Z8(L,C.to_child),g,y=Q.children;g=MZ(y,(e)=>{if(QZ(e.child_tree.levels,q))return k;else return e}),O=[g,w]}else{let C,I=new MQ(q,new uZ,M([]),!1),L=NK(I);C=OK(L,W),O=[R(new Z8(C,H[1]),Q.children),W]}let P=O,D,S;return D=P[0],S=P[1],[new MQ(Q.levels,Q.cost,D,Q.was_pulled_from_cache),S]}else{let H=i(Q.children,new tZ,(q,B)=>{let A=B.child_tree.cost;if(A instanceof uZ)throw OQ("panic",dW,"day25factory",580,"lt_one_step","should not be any children left with cost unknown",{});else if(A instanceof tZ)return q;else{let T=A[0],O=B.to_child.buttons_used+T*2;if(q instanceof uZ)throw OQ("panic",dW,"day25factory",573,"lt_one_step","we never set acc to cost unknown",{});else if(q instanceof tZ)return new L6(O);else{let P=q[0];return new L6(zW(P,O))}}}),U;if(W instanceof n){let q=W[0];U=new n(new W8((()=>{let B=q.level_costs;return RZ(B,Q.levels,H)})()))}else U=W;let F=U;return[new MQ(Q.levels,H,Q.children,Q.was_pulled_from_cache),F]}}else return[new MQ(Q.levels,new tZ,Q.children,Q.was_pulled_from_cache),W]}function GW(Z,Q){return x9((W)=>{return s0((()=>{if(Q instanceof n){let X=Q[0];return IK(X)}else return Z.millisec})(),()=>{return W(new X8(Z))})})}function jK(Z){if(Z instanceof VW){let{btns:Q,goal_bits_parity:W,num_bits:J,combos:X,check_combo:K,check_combo_parity:G}=Z,V=$Q(Q);if(V<8)return MW(1000,V);else return 1}else{let{combos:Q,tree:W,cost_for_levels:J}=Z,X=i((()=>{let K=Q.cfp;return r6(K)})(),0,(K,G)=>{return K+cQ(G.combo)});return zW(1000,MW(300000,X*X))}}function n0(Z){return i(s6(0,(()=>{return $Q(Z)})()),M([]),(Q,W)=>{return sZ(Q,(()=>{return oW(Z,W)})())})}function DK(Z,Q,W){let J,X=(()=>{return TQ(Z,"]")})();if(X instanceof N)J=new E("error parsing "+Z+' could not find "]"');else{let{head:G,tail:V}=X,Y=(()=>{let U=yZ(V);return TQ(U,"{")})();if(Y instanceof N)J=new E("error parsing "+Z+' could not find "{"');else{let{head:H,tail:U}=Y,F,B=m8(H),A=Q6(B,"(",""),T=Q6(A,")",""),O=TQ(T," ");F=mQ(O,(D)=>{let C=TQ(D,",");return mQ(C,(I)=>{let L=IW(I);if(L instanceof j)return L;else return new E("could not parse int from "+(()=>{if(I==="")return"empty string";else return I})())})});let P=F;if(P instanceof j){let D=P[0];J=new j((()=>{if(W instanceof FZ){let S;S=MZ(D,(y)=>{return i(y,new oJ(0),(u,e)=>{return new oJ((()=>{let t=u.bits;return lW(t,KW(e))})())})});let I=S,L,w=n0(I);L=MZ(w,Y9);let k=L,g=(()=>{return g8(k)})();if(g instanceof j){let y=g[0],u,t=AQ(G),s=f8(t,1);u=mQ(s,(_)=>{if(_==="#")return new j(!0);else if(_===".")return new j(!1);else return new E("error parsing "+Z+" indicator char "+_+' was not "." or "#"')});let r=u;if(r instanceof j){let _=r[0];return new j((()=>{let f=i(_,[0,1],(m,v)=>{let a;if(v){let o=m[0];a=lW(o,m[1])}else a=m[0];return[a,m[1]*2]})[0],d=s6(0,$Q(_)-1);return new VW(I,f,d,k,y,(()=>{return QX(y)})())})())}else return r}else return new E("no button combinations, which should not happen if at least 1 button is provided")}else{let S=i(n0(D),new eJ(DZ()),(y,u)=>{let e=i(u,DZ(),($,o)=>{return i(o,$,(KZ,qZ)=>{let cZ;cZ=UZ(KZ,qZ);let eZ=cZ;if(eZ instanceof j){let EZ=eZ[0];return RZ(KZ,qZ,EZ+1)}else return RZ(KZ,qZ,1)})}),t=new tJ((()=>{return $Q(u)})()),s=new l0(e),r,_=new S6(e);r=WX(_);let p=r,f,d=y.cfp;f=UZ(d,p);let m=f,v;if(m instanceof j){let $=m[0],o=(()=>{let KZ=$.combo;return UZ(KZ,s)})();if(o instanceof j){let KZ=o[0],qZ=$.combo;v=RZ(qZ,s,new tJ(zW(KZ.buttons_used,t.buttons_used)))}else{let KZ=$.combo;v=RZ(KZ,s,t)}}else{let $=DZ();v=RZ($,s,t)}let a=v;return new eJ((()=>{let $=y.cfp;return RZ($,p,new a0(a))})())}),C,L=yZ(U),w=$8(L,1),k=TQ(w,",");C=mQ(k,(y)=>{let u=IW(y);if(u instanceof j)return u;else return new E("parsing "+Z+" could not parse int from "+(()=>{if(y==="")return"empty string";else return y})())});let g=C;if(g instanceof j){let y=g[0],u=b8(y,DZ(),(r,_,p)=>{return RZ(r,p,_)}),e=new MQ(new S6(u),new uZ,M([]),!1),t;if(Q)t=new n(new W8(DZ()));else t=new GZ;return new j(new J8(S,e,t))}else return g}})())}else{let D=P[0];J=new E("parsing "+Z+" got error "+D)}}}let K=J;if(K instanceof j){let G=K[0];if(G instanceof j){let V=G[0];return new j(V)}else{let V=G[0];return new E(V)}}else return K}function P6(Z,Q,W){let J=Z.problems;if(J instanceof N)return[(()=>{if(Z.all_done)return Z;else return new ZZ(Z.on_index,!0,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,W,Z.out)})(),VZ()];else{let{head:X,tail:K}=J,G=DK(X,Z.cache_enabled,Z.onoff_or_level_input);if(G instanceof j){let V=G[0],Y=jK(V);return[new ZZ(Z.on_index,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Y,Z.flip_tree,Z.play,Z.in,K,W,G),GW(new XW(Y,Q),Z.set_speed)]}else return[new ZZ(Z.on_index,!0,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,new E(""),G),VZ()]}}function i0(Z,Q){let W=Z.out;if(W instanceof j){let J=W[0];if(Q.index===Z.on_index)if(J instanceof VW){let{btns:K,goal_bits_parity:G,num_bits:V,combos:Y,check_combo:H}=J;if(J.check_combo_parity===G){let q,B=Z.count;if(B instanceof j){let T=B[0];q=new j(T+K9(H))}else q=Z.count;let A=q;return P6(Z,Q.index,A)}else if(Y instanceof N)return[new ZZ(Z.on_index,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,new E("no button combinations work for indicator lights goal ["+(()=>{let B=x8(G),A=AQ(B),T=MZ(A,(D)=>{if(D==="1")return"#";else if(D==="0")return".";else throw OQ("panic",dW,"day25factory",409,"main_one_step","not zero??",{})}),O=yZ(T),P=((D)=>{if(BW(D)!==$Q(V))return"."+D;else return D})(O);return v8(P)})()+"]"),Z.out),VZ()];else{let{head:q,tail:B}=Y,A=new VW(K,G,V,B,q,(()=>{return QX(q)})());return[new ZZ(Z.on_index,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,new j(A)),GW(Q,Z.set_speed)]}}else{let{combos:K,tree:G,cost_for_levels:V}=J,Y=G.cost;if(Y instanceof uZ){let H=JX(K,G,V),U,F;U=H[0],F=H[1];let q=new J8(K,U,F);return[new ZZ(Z.on_index,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,new j(q)),GW(Q,Z.set_speed)]}else if(Y instanceof tZ){let H=new E("impossible input: "+Z.in);return P6(Z,Q.index,H)}else{let H=Y[0],U,F=Z.count;if(F instanceof j){let B=F[0];U=new j(B+H)}else U=Z.count;let q=U;return P6(Z,Q.index,q)}}else return[Z,VZ()]}else return[Z,VZ()]}function cW(Z){let Q=Z.in,W,X=TQ(Q,`
`);W=d6(X,(V)=>{return V!==""});let K=W,G=new ZZ(Z.on_index,!1,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,K,Z.count,Z.out);return P6(G,G.on_index,new j(0))}function BK(Z){let Q=new ZZ(0,!1,new pW("#FFFF99","#FF9999","#99FF99"),new FZ,!1,new GZ,0,!1,!0,Z,M([]),new j(0),new E("initial input not loaded"));return cW(Q)}function AK(Z,Q){if(Q instanceof X8){let W=Q[0];if(Z.play)return i0(Z,W);else return[Z,VZ()]}else if(Q instanceof K8){let W=Q[0];return cW(new ZZ(Z.on_index+1,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,W,Z.problems,Z.count,Z.out))}else if(Q instanceof C6){let W=Q[0];if(QZ(W,Z.onoff_or_level_input))return[Z,VZ()];else return cW(new ZZ(Z.on_index+1,Z.all_done,Z.colors,W,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out))}else if(Q instanceof G8)return cW(new ZZ(Z.on_index+1,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out));else if(Q instanceof V8)return cW(new ZZ(Z.on_index+1,Z.all_done,Z.colors,Z.onoff_or_level_input,!Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out));else if(Q instanceof Y8)return[new ZZ(Z.on_index,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,(()=>{if(Z.set_speed instanceof n)return new GZ;else return new n(0)})(),Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out),GW(new XW(Z.default_speed_ms,Z.on_index+1),new GZ)];else if(Q instanceof H8){let W=Q[0],J=(()=>{return zK(W)})();if(J instanceof j){let X=J[0];return[new ZZ(Z.on_index+1,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,new n(X),Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out),GW(new XW(-123,Z.on_index+1),new n(X))]}else return[new ZZ(Z.on_index,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,new E("strangely failed to parse step speed string from slider "+W)),VZ()]}else if(Q instanceof M8)return[i0(Z,new XW(-1,Z.on_index))[0],VZ()];else if(Q instanceof U8)return[new ZZ(Z.on_index,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,!Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out),VZ()];else if(Q instanceof F8){let W=new ZZ(Z.on_index+1,Z.all_done,Z.colors,Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,!Z.play,Z.in,Z.problems,Z.count,Z.out);return[W,(()=>{if(W.play)return GW(new XW(W.default_speed_ms,W.on_index),W.set_speed);else return VZ()})()]}else if(Q instanceof q8){let W=Q[0];return[new ZZ(Z.on_index,Z.all_done,(()=>{let J=Z.colors;return new pW(W,J.impossible,J.val)})(),Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out),VZ()]}else if(Q instanceof R8){let W=Q[0];return[new ZZ(Z.on_index,Z.all_done,(()=>{let J=Z.colors;return new pW(J.unknown,W,J.val)})(),Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out),VZ()]}else{let W=Q[0];return[new ZZ(Z.on_index,Z.all_done,(()=>{let J=Z.colors;return new pW(J.unknown,J.impossible,W)})(),Z.onoff_or_level_input,Z.cache_enabled,Z.set_speed,Z.default_speed_ms,Z.flip_tree,Z.play,Z.in,Z.problems,Z.count,Z.out),VZ()]}}function Q8(Z,Q,W,J){let X;if(Z instanceof T6){let F=Z[0];X=[F.child_tree,(()=>{let q=F.to_child.buttons_used;return YZ(q)})()+" + 2 * "]}else X=[Z[0],""];let K=X,G,V;G=K[0],V=K[1];let Y=h(yZ(M([W6("           ",Q),V]))),H=mZ(M([x("color",(()=>{let F=G.cost;if(F instanceof uZ)return J.unknown;else if(F instanceof tZ)return J.impossible;else return J.val})())]),M([h(yZ(M(["{",(()=>{let F=G.levels.num_ctrs,q=RQ(F),B=eW(q,(T,O)=>{return iW(T[0],O[0])}),A=MZ(B,(T)=>{let O=T[1];return YZ(O)});return DW(A,",")})(),"}"," = ",(()=>{let F=G.cost;if(F instanceof uZ)return"?";else if(F instanceof tZ)return"∞";else{let B=F[0];return YZ(B)}})()])))])),U=h(yZ(M([(()=>{if(G.was_pulled_from_cache)if(G.cost instanceof uZ)return" = min of";else return" (cached)";else{let q=G.cost;if(q instanceof uZ)return" = min of";else if(q instanceof tZ)return"";else if(q[0]===0)return"";else return" = min of"}})(),`
`])));return R(Y,R(H,R(U,i(G.children,M([]),(F,q)=>{if(W)return sZ(F,Q8(new T6(q),Q+1,W,J));else return sZ(Q8(new T6(q),Q+1,W,J),F)}))))}function TK(Z){return l9(M([x("height","#100%"),x("margin","0px"),x("display","flex"),x("flex-direction","column"),x("gap","5px")]),M([a9(M([]),M([vW(M([wW("/")]),M([h("Correct Arity")]))])),SJ(M([]),M([vW(M([wW("https://adventofcode.com/2025/day/10")]),M([h("Advent of Code day 10")])),h(" visualization: joltage indicators and levels "),vW(M([wW("https://github.com/D-matz/day25factory/blob/main/src/day25factory.gleam")]),M([h("[source]")]))])),SJ(M([]),(()=>{if(Z.onoff_or_level_input instanceof FZ)return M([h("Pressing a button twice negates itself, i.e. does nothing. So a minimal solution presses each button 0 or 1 times only.")]);else return M([h("From "),vW(M([wW("https://old.reddit.com/r/adventofcode/comments/1pk87hl/2025_day_10_part_2_bifurcate_your_way_to_victory/")]),M([h("u/tenthmascot")])),h(": for all combos of 0 or 1 of each button making all counters even, divide by 2 and recurse.")])})()),xQ(M([x("display","flex"),x("flex-direction","column")]),M([xQ(M([]),M([oZ(M([aZ("radio"),lZ("levels"),iQ((()=>{if(Z.onoff_or_level_input instanceof FZ)return!1;else return!0})()),HQ(new C6(new o0))])),GQ(M([WQ("levels")]),M([h("joltage levels")])),mZ(M([x("margin-left","15px"),CW("The first time we get minimum press count for some set of joltage levels, save that and use it next time we get to the same levels, instead of recursing. (un)checking this restarts everything to (not) build cached levels.")]),M([oZ(M([aZ("checkbox"),lZ("cache"),SQ((()=>{if(Z.onoff_or_level_input instanceof FZ)return!0;else return!1})()),iQ(Z.cache_enabled),HQ(new V8)])),GQ(M([WQ("cache"),x("opacity",(()=>{if(Z.onoff_or_level_input instanceof FZ)return"0.3";else return"1.0"})())]),M([h("cache levels")]))])),mZ(M([x("margin-left","15px"),CW("As joltage level tree lines are calculated, display them on top of screen instead of bottom.")]),M([oZ(M([aZ("checkbox"),lZ("flip"),SQ((()=>{if(Z.onoff_or_level_input instanceof FZ)return!0;else return!1})()),iQ(Z.flip_tree),HQ(new U8)])),GQ(M([WQ("flip"),x("opacity",(()=>{if(Z.onoff_or_level_input instanceof FZ)return"0.3";else return"1.0"})())]),M([h("new level line at top")]))])),mZ(M([x("margin-left","15px"),CW("Set colors for joltage levels unknown, impossible, and calculated.")]),M([oZ(M([aZ("color"),EW(Z.colors.unknown),lZ("u"),x("margin-left","3px"),SQ((()=>{if(Z.onoff_or_level_input instanceof FZ)return!0;else return!1})()),JW((Q)=>{return new q8(Q)})])),GQ(M([WQ("u"),x("opacity",(()=>{if(Z.onoff_or_level_input instanceof FZ)return"0.3";else return"1.0"})())]),M([h("unknown")])),oZ(M([aZ("color"),EW(Z.colors.val),lZ("c"),x("margin-left","3px"),SQ((()=>{if(Z.onoff_or_level_input instanceof FZ)return!0;else return!1})()),JW((Q)=>{return new t0(Q)})])),GQ(M([WQ("c"),x("opacity",(()=>{if(Z.onoff_or_level_input instanceof FZ)return"0.3";else return"1.0"})())]),M([h("calculated")])),oZ(M([aZ("color"),EW(Z.colors.impossible),lZ("i"),x("margin-left","3px"),SQ((()=>{if(Z.onoff_or_level_input instanceof FZ)return!0;else return!1})()),JW((Q)=>{return new R8(Q)})])),GQ(M([WQ("i"),x("opacity",(()=>{if(Z.onoff_or_level_input instanceof FZ)return"0.3";else return"1.0"})())]),M([h("impossible")]))]))])),xQ(M([]),M([oZ(M([aZ("radio"),lZ("lights"),iQ((()=>{if(Z.onoff_or_level_input instanceof FZ)return!0;else return!1})()),HQ(new C6(new FZ))])),GQ(M([WQ("lights")]),M([h("indicator lights")]))]))])),xQ(M([x("display","flex"),x("flex-wrap","wrap"),x("gap","15px"),x("align-items","end")]),M([xQ(M([x("display","flex"),x("flex-direction","column")]),M([oZ(M([aZ("range"),S9("-3.001"),L9("3"),C9("0.001"),SQ((()=>{if(Z.set_speed instanceof n)return!1;else return!0})()),EW((()=>{let Q=Z.set_speed;if(Q instanceof n){let J=Q[0];return RW(J)}else return"0"})()),JW((Q)=>{return new H8(Q)})])),xQ(M([]),M([mZ(M([CW("The default step time is roughly a shorter duration for lines that look like they'll take more steps. However you can check this to manually set speed with slider.")]),M([oZ(M([aZ("checkbox"),lZ("defaultspeed"),iQ((()=>{if(Z.set_speed instanceof n)return!0;else return!1})()),HQ(new Y8)])),GQ(M([WQ("defaultspeed")]),M([h("manual step time ")])),mZ(M([x("width","9ch"),x("display","inline-block")]),M([h((()=>{let Q=Z.set_speed;if(Q instanceof n){let W=Q[0];return(()=>{let X=ZX(W),K=S8(X,3);return RW(K)})()+"s"}else return"(off)"})())]))]))]))])),z6(M([HQ(new G8),x("width","4em"),x("padding","3px")]),M([h("replay")])),z6(M([HQ(new M8),x("width","4em"),x("padding","3px")]),M([h("step")])),z6(M([HQ(new F8),x("width","4em"),x("padding","3px")]),M([(()=>{if(Z.play)return h("pause");else return h("play")})()])),(()=>{if(Z.out instanceof j){let W=Z.count;if(W instanceof j){let J=W[0];return mZ(M([]),M([h("min press sum: "),mZ(M([x("font-size","1.4em"),x("display","inline-block")]),M([h((()=>{return YZ(J)})())]))]))}else{let J=W[0];return h(J)}}else return h("")})()])),o9(M([lZ("input"),x("height","60px"),x("width","490px"),JW((Q)=>{return new K8(Q)})]),Z.in),(()=>{let Q=Z.out;if(Q instanceof j){let W=Q[0];if(W instanceof VW){let{btns:J,goal_bits_parity:X,num_bits:K,combos:G,check_combo:V,check_combo_parity:Y}=W;return CJ(M([x("font-size","3em"),x("margin","0px"),x("padding","39px")]),(()=>{let H=l(i(K,M([]),(U,F)=>{let q;if(q=NW(Y,KW(F)),q===0)return R(mZ(M([x("width","3ch"),x("display","inline-block"),x("text-align","center"),x("opacity","0.35")]),M([h("\uD83D\uDCA1")])),U);else return R(mZ(M([x("width","3ch"),x("display","inline-block"),x("text-align","center"),x("filter","drop-shadow(0 0 25px yellow)")]),M([h("\uD83D\uDCA1")])),U)}));return sZ(H,l(R(h((()=>{let F=MZ(K,(q)=>{if(q<10)return" "+YZ(q)+" ";else if(q<100)return YZ(q)+" ";else if(q<1000)return YZ(q);else return YZ(q%1000)});return yZ(F)})()),R(h(`
`),i(J,M([]),(U,F)=>{let q;q=G9(V,F);let A=q;return R(h(yZ(M(["(",(()=>{let O=d6(K,(D)=>{if((()=>{let C=KW(D);return NW(C,F.bits)})()===0)return!1;else return!0}),P=MZ(O,YZ);return DW(P,",")})(),")"]))),i(K,R(h(`
`),U),(T,O)=>{let P;if((()=>{let C=F.bits;return NW(C,KW(O))})()===0)P=h("   ");else if(A)P=h("[x]");else P=h("[ ]");return R(P,T)}))})))))})())}else{let J=W.tree;return CJ(M([]),(()=>{let X=new e0(J);return Q8(X,0,Z.flip_tree,Z.colors)})())}}else{let W=Q[0];return h(W)}})()]))}function XX(){let Z=c0(BK,AK,TK),Q=p0(Z,"#app",RK);if(!(Q instanceof j))throw OQ("let_assert",dW,"day25factory",78,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:1699,end:1755,pattern_start:1710,pattern_end:1715});return}XX();
