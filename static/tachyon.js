class z{withFields(Z){let W=Object.keys(this).map((J)=>(J in Z)?Z[J]:this[J]);return new this.constructor(...W)}}class YZ{static fromArray(Z,W){let J=W||new R;for(let X=Z.length-1;X>=0;--X)J=new BZ(Z[X],J);return J}[Symbol.iterator](){return new M8(this)}toArray(){return[...this]}atLeastLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return W!==void 0}hasLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return Z===-1&&W instanceof R}countLength(){let Z=this,W=0;while(Z)Z=Z.tail,W++;return W-1}}function F(Z,W){return new BZ(Z,W)}function I(Z,W){return YZ.fromArray(Z,W)}class M8{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof R)return{done:!0};else{let{head:Z,tail:W}=this.#Z;return this.#Z=W,{value:Z,done:!1}}}}class R extends YZ{}class BZ extends YZ{constructor(Z,W){super();this.head=Z,this.tail=W}}class hW{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,W,J){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=W??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=J??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return fW(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let W=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let X=0;X<W;X++)if(this.rawBuffer[X]!==Z.rawBuffer[X])return!1;let J=this.bitSize%8;if(J){let X=8-J;if(this.rawBuffer[W]>>X!==Z.rawBuffer[W]>>X)return!1}}else{for(let X=0;X<W;X++){let Q=fW(this.rawBuffer,this.bitOffset,X),K=fW(Z.rawBuffer,Z.bitOffset,X);if(Q!==K)return!1}let J=this.bitSize%8;if(J){let X=fW(this.rawBuffer,this.bitOffset,W),Q=fW(Z.rawBuffer,Z.bitOffset,W),K=8-J;if(X>>K!==Q>>K)return!1}}return!0}get buffer(){if(Y8("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Y8("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function fW(Z,W,J){if(W===0)return Z[J]??0;else{let X=Z[J]<<W&255,Q=Z[J+1]>>8-W;return X|Q}}class _6{constructor(Z){this.value=Z}}var V8={};function Y8(Z,W){if(V8[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${W}.`),V8[Z]=!0}class OW extends z{static isResult(Z){return Z instanceof OW}}class C extends OW{constructor(Z){super();this[0]=Z}isOk(){return!0}}class y extends OW{constructor(Z){super();this[0]=Z}isOk(){return!1}}function XZ(Z,W){let J=[Z,W];while(J.length){let X=J.pop(),Q=J.pop();if(X===Q)continue;if(!H8(X)||!H8(Q))return!1;if(!m0(X,Q)||b0(X,Q)||g0(X,Q)||f0(X,Q)||h0(X,Q)||_0(X,Q)||v0(X,Q))return!1;let G=Object.getPrototypeOf(X);if(G!==null&&typeof G.equals==="function")try{if(X.equals(Q))continue;else return!1}catch{}let[V,Y]=y0(X),H=V(X),M=V(Q);if(H.length!==M.length)return!1;for(let U of H)J.push(Y(X,U),Y(Q,U))}return!0}function y0(Z){if(Z instanceof Map)return[(W)=>W.keys(),(W,J)=>W.get(J)];else{let W=Z instanceof globalThis.Error?["message"]:[];return[(J)=>[...W,...Object.keys(J)],(J,X)=>J[X]]}}function b0(Z,W){return Z instanceof Date&&(Z>W||Z<W)}function g0(Z,W){return!(Z instanceof hW)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===W.byteLength&&Z.every((J,X)=>J===W[X]))}function f0(Z,W){return Array.isArray(Z)&&Z.length!==W.length}function h0(Z,W){return Z instanceof Map&&Z.size!==W.size}function _0(Z,W){return Z instanceof Set&&(Z.size!=W.size||[...Z].some((J)=>!W.has(J)))}function v0(Z,W){return Z instanceof RegExp&&(Z.source!==W.source||Z.flags!==W.flags)}function H8(Z){return typeof Z==="object"&&Z!==null}function m0(Z,W){if(typeof Z!=="object"&&typeof W!=="object"&&(!Z||!W))return!1;if([Promise,WeakSet,WeakMap,Function].some((X)=>Z instanceof X))return!1;return Z.constructor===W.constructor}function iZ(Z,W){return Math.trunc(v6(Z,W))}function v6(Z,W){if(W===0)return 0;else return Z/W}function m6(Z,W,J,X,Q,K,G){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=W,V.module=J,V.line=X,V.function=Q,V.fn=Q;for(let Y in G)V[Y]=G[Y];return V}class QZ extends z{constructor(Z){super();this[0]=Z}}class UZ extends z{}var F8=new WeakMap,$6=new DataView(new ArrayBuffer(8)),u6=0;function c6(Z){let W=F8.get(Z);if(W!==void 0)return W;let J=u6++;if(u6===2147483647)u6=0;return F8.set(Z,J),J}function p6(Z,W){return Z^W+2654435769+(Z<<6)+(Z>>2)|0}function s6(Z){let W=0,J=Z.length;for(let X=0;X<J;X++)W=Math.imul(31,W)+Z.charCodeAt(X)|0;return W}function q8(Z){$6.setFloat64(0,Z);let W=$6.getInt32(0),J=$6.getInt32(4);return Math.imul(73244475,W>>16^W)^J}function $0(Z){return s6(Z.toString())}function u0(Z){let W=Object.getPrototypeOf(Z);if(W!==null&&typeof W.hashCode==="function")try{let X=Z.hashCode(Z);if(typeof X==="number")return X}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return c6(Z);if(Z instanceof Date)return q8(Z.getTime());let J=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let X=0;X<Z.length;X++)J=Math.imul(31,J)+RZ(Z[X])|0;else if(Z instanceof Set)Z.forEach((X)=>{J=J+RZ(X)|0});else if(Z instanceof Map)Z.forEach((X,Q)=>{J=J+p6(RZ(X),RZ(Q))|0});else{let X=Object.keys(Z);for(let Q=0;Q<X.length;Q++){let K=X[Q],G=Z[K];J=J+p6(RZ(G),s6(K))|0}}return J}function RZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return q8(Z);case"string":return s6(Z);case"bigint":return $0(Z);case"object":return u0(Z);case"symbol":return c6(Z);case"function":return c6(Z);default:return 0}}var bZ=5,r6=Math.pow(2,bZ),c0=r6-1,p0=r6/2,d0=r6/4,GZ=0,yZ=1,qZ=2,XW=3,i6={type:qZ,bitmap:0,array:[]};function _W(Z,W){return Z>>>W&c0}function F6(Z,W){return 1<<_W(Z,W)}function s0(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function n6(Z,W){return s0(Z&W-1)}function IZ(Z,W,J){let X=Z.length,Q=Array(X);for(let K=0;K<X;++K)Q[K]=Z[K];return Q[W]=J,Q}function r0(Z,W,J){let X=Z.length,Q=Array(X+1),K=0,G=0;while(K<W)Q[G++]=Z[K++];Q[G++]=J;while(K<X)Q[G++]=Z[K++];return Q}function d6(Z,W){let J=Z.length,X=Array(J-1),Q=0,K=0;while(Q<W)X[K++]=Z[Q++];++Q;while(Q<J)X[K++]=Z[Q++];return X}function z8(Z,W,J,X,Q,K){let G=RZ(W);if(G===X)return{type:XW,hash:G,array:[{type:GZ,k:W,v:J},{type:GZ,k:Q,v:K}]};let V={val:!1};return vW(l6(i6,Z,G,W,J,V),Z,X,Q,K,V)}function vW(Z,W,J,X,Q,K){switch(Z.type){case yZ:return i0(Z,W,J,X,Q,K);case qZ:return l6(Z,W,J,X,Q,K);case XW:return n0(Z,W,J,X,Q,K)}}function i0(Z,W,J,X,Q,K){let G=_W(J,W),V=Z.array[G];if(V===void 0)return K.val=!0,{type:yZ,size:Z.size+1,array:IZ(Z.array,G,{type:GZ,k:X,v:Q})};if(V.type===GZ){if(XZ(X,V.k)){if(Q===V.v)return Z;return{type:yZ,size:Z.size,array:IZ(Z.array,G,{type:GZ,k:X,v:Q})}}return K.val=!0,{type:yZ,size:Z.size,array:IZ(Z.array,G,z8(W+bZ,V.k,V.v,J,X,Q))}}let Y=vW(V,W+bZ,J,X,Q,K);if(Y===V)return Z;return{type:yZ,size:Z.size,array:IZ(Z.array,G,Y)}}function l6(Z,W,J,X,Q,K){let G=F6(J,W),V=n6(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[V];if(Y.type!==GZ){let M=vW(Y,W+bZ,J,X,Q,K);if(M===Y)return Z;return{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,V,M)}}let H=Y.k;if(XZ(X,H)){if(Q===Y.v)return Z;return{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,V,{type:GZ,k:X,v:Q})}}return K.val=!0,{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,V,z8(W+bZ,H,Y.v,J,X,Q))}}else{let Y=Z.array.length;if(Y>=p0){let H=Array(32),M=_W(J,W);H[M]=l6(i6,W+bZ,J,X,Q,K);let U=0,O=Z.bitmap;for(let D=0;D<32;D++){if((O&1)!==0){let B=Z.array[U++];H[D]=B}O=O>>>1}return{type:yZ,size:Y+1,array:H}}else{let H=r0(Z.array,V,{type:GZ,k:X,v:Q});return K.val=!0,{type:qZ,bitmap:Z.bitmap|G,array:H}}}}function n0(Z,W,J,X,Q,K){if(J===Z.hash){let G=a6(Z,X);if(G!==-1){if(Z.array[G].v===Q)return Z;return{type:XW,hash:J,array:IZ(Z.array,G,{type:GZ,k:X,v:Q})}}let V=Z.array.length;return K.val=!0,{type:XW,hash:J,array:IZ(Z.array,V,{type:GZ,k:X,v:Q})}}return vW({type:qZ,bitmap:F6(Z.hash,W),array:[Z]},W,J,X,Q,K)}function a6(Z,W){let J=Z.array.length;for(let X=0;X<J;X++)if(XZ(W,Z.array[X].k))return X;return-1}function M6(Z,W,J,X){switch(Z.type){case yZ:return l0(Z,W,J,X);case qZ:return a0(Z,W,J,X);case XW:return o0(Z,X)}}function l0(Z,W,J,X){let Q=_W(J,W),K=Z.array[Q];if(K===void 0)return;if(K.type!==GZ)return M6(K,W+bZ,J,X);if(XZ(X,K.k))return K;return}function a0(Z,W,J,X){let Q=F6(J,W);if((Z.bitmap&Q)===0)return;let K=n6(Z.bitmap,Q),G=Z.array[K];if(G.type!==GZ)return M6(G,W+bZ,J,X);if(XZ(X,G.k))return G;return}function o0(Z,W){let J=a6(Z,W);if(J<0)return;return Z.array[J]}function o6(Z,W,J,X){switch(Z.type){case yZ:return t0(Z,W,J,X);case qZ:return e0(Z,W,J,X);case XW:return ZX(Z,X)}}function t0(Z,W,J,X){let Q=_W(J,W),K=Z.array[Q];if(K===void 0)return Z;let G=void 0;if(K.type===GZ){if(!XZ(K.k,X))return Z}else if(G=o6(K,W+bZ,J,X),G===K)return Z;if(G===void 0){if(Z.size<=d0){let V=Z.array,Y=Array(Z.size-1),H=0,M=0,U=0;while(H<Q){let O=V[H];if(O!==void 0)Y[M]=O,U|=1<<H,++M;++H}++H;while(H<V.length){let O=V[H];if(O!==void 0)Y[M]=O,U|=1<<H,++M;++H}return{type:qZ,bitmap:U,array:Y}}return{type:yZ,size:Z.size-1,array:IZ(Z.array,Q,G)}}return{type:yZ,size:Z.size,array:IZ(Z.array,Q,G)}}function e0(Z,W,J,X){let Q=F6(J,W);if((Z.bitmap&Q)===0)return Z;let K=n6(Z.bitmap,Q),G=Z.array[K];if(G.type!==GZ){let V=o6(G,W+bZ,J,X);if(V===G)return Z;if(V!==void 0)return{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,K,V)};if(Z.bitmap===Q)return;return{type:qZ,bitmap:Z.bitmap^Q,array:d6(Z.array,K)}}if(XZ(X,G.k)){if(Z.bitmap===Q)return;return{type:qZ,bitmap:Z.bitmap^Q,array:d6(Z.array,K)}}return Z}function ZX(Z,W){let J=a6(Z,W);if(J<0)return Z;if(Z.array.length===1)return;return{type:XW,hash:Z.hash,array:d6(Z.array,J)}}function R8(Z,W){if(Z===void 0)return;let J=Z.array,X=J.length;for(let Q=0;Q<X;Q++){let K=J[Q];if(K===void 0)continue;if(K.type===GZ){W(K.v,K.k);continue}R8(K,W)}}class KZ{static fromObject(Z){let W=Object.keys(Z),J=KZ.new();for(let X=0;X<W.length;X++){let Q=W[X];J=J.set(Q,Z[Q])}return J}static fromMap(Z){let W=KZ.new();return Z.forEach((J,X)=>{W=W.set(X,J)}),W}static new(){return new KZ(void 0,0)}constructor(Z,W){this.root=Z,this.size=W}get(Z,W){if(this.root===void 0)return W;let J=M6(this.root,0,RZ(Z),Z);if(J===void 0)return W;return J.v}set(Z,W){let J={val:!1},X=this.root===void 0?i6:this.root,Q=vW(X,0,RZ(Z),Z,W,J);if(Q===this.root)return this;return new KZ(Q,J.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let W=o6(this.root,0,RZ(Z),Z);if(W===this.root)return this;if(W===void 0)return KZ.new();return new KZ(W,this.size-1)}has(Z){if(this.root===void 0)return!1;return M6(this.root,0,RZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((W,J)=>Z.push([J,W])),Z}forEach(Z){R8(this.root,Z)}hashCode(){let Z=0;return this.forEach((W,J)=>{Z=Z+p6(RZ(W),RZ(J))|0}),Z}equals(Z){if(!(Z instanceof KZ)||this.size!==Z.size)return!1;try{return this.forEach((W,J)=>{if(!XZ(Z.get(J,!W),W))throw U8}),!0}catch(W){if(W===U8)return!1;throw W}}}var U8=Symbol();class l extends z{}class a extends z{}class nZ extends z{}function D8(Z){return B8(Z,16)}class e extends z{}class DW extends z{}function KX(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return X;else Z=J.tail,W=X+1}}function $W(Z){return KX(Z,0)}function mW(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return X;else{let Q=J.head;Z=J.tail,W=F(Q,X)}}}function u(Z){return mW(Z,I([]))}function GX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return u(K);else{let G=X.head;Z=X.tail,W=Q,J=F(Q(G),K)}}}function GW(Z,W){return GX(Z,W,I([]))}function VX(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return X;else{let Q=J.head;Z=J.tail,W=F(Q,X)}}}function lZ(Z,W){return VX(u(Z),W)}function U6(Z,W){return F(W,Z)}function o(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return Q;else{let G=X.head;Z=X.tail,W=K(Q,G),J=K}}}function YX(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(Q instanceof R)return K;else{let Y=Q.head;Z=Q.tail,W=G(K,Y,V),J=G,X=V+1}}}function t6(Z,W,J){return YX(Z,W,J,0)}function HX(Z,W,J,X,Q,K){while(!0){let G=Z,V=W,Y=J,H=X,M=Q,U=K,O=F(M,Y);if(G instanceof R)if(H instanceof e)return F(u(O),U);else return F(O,U);else{let{head:D,tail:B}=G,A=V(M,D);if(H instanceof e)if(A instanceof l)Z=B,W=V,J=O,X=H,Q=D,K=U;else if(A instanceof a)Z=B,W=V,J=O,X=H,Q=D,K=U;else{let N;if(H instanceof e)N=F(u(O),U);else N=F(O,U);let T=N;if(B instanceof R)return F(I([D]),T);else{let{head:j,tail:P}=B,w,q=V(D,j);if(q instanceof l)w=new e;else if(q instanceof a)w=new e;else w=new DW;let S=w;Z=P,W=V,J=I([D]),X=S,Q=j,K=T}}else if(A instanceof l){let N;if(H instanceof e)N=F(u(O),U);else N=F(O,U);let T=N;if(B instanceof R)return F(I([D]),T);else{let{head:j,tail:P}=B,w,q=V(D,j);if(q instanceof l)w=new e;else if(q instanceof a)w=new e;else w=new DW;let S=w;Z=P,W=V,J=I([D]),X=S,Q=j,K=T}}else if(A instanceof a){let N;if(H instanceof e)N=F(u(O),U);else N=F(O,U);let T=N;if(B instanceof R)return F(I([D]),T);else{let{head:j,tail:P}=B,w,q=V(D,j);if(q instanceof l)w=new e;else if(q instanceof a)w=new e;else w=new DW;let S=w;Z=P,W=V,J=I([D]),X=S,Q=j,K=T}}else Z=B,W=V,J=O,X=H,Q=D,K=U}}}function MX(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(Q instanceof R)return mW(K,V);else if(K instanceof R)return mW(Q,V);else{let{head:Y,tail:H}=Q,M=K.head,U=K.tail,O=G(Y,M);if(O instanceof l)Z=H,W=K,J=G,X=F(Y,V);else if(O instanceof a)Z=Q,W=U,J=G,X=F(M,V);else Z=Q,W=U,J=G,X=F(M,V)}}}function FX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return u(K);else{let G=X.tail;if(G instanceof R){let V=X.head;return u(F(u(V),K))}else{let V=X.head,Y=G.head,H=G.tail,M=MX(V,Y,Q,I([]));Z=H,W=Q,J=F(M,K)}}}}function UX(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(Q instanceof R)return mW(K,V);else if(K instanceof R)return mW(Q,V);else{let{head:Y,tail:H}=Q,M=K.head,U=K.tail,O=G(Y,M);if(O instanceof l)Z=Q,W=U,J=G,X=F(M,V);else if(O instanceof a)Z=H,W=K,J=G,X=F(Y,V);else Z=H,W=K,J=G,X=F(Y,V)}}}function qX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return u(K);else{let G=X.tail;if(G instanceof R){let V=X.head;return u(F(u(V),K))}else{let V=X.head,Y=G.head,H=G.tail,M=UX(V,Y,Q,I([]));Z=H,W=Q,J=F(M,K)}}}}function zX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return X;else if(Q instanceof e)if(X.tail instanceof R)return X.head;else Z=FX(X,K,I([])),W=new DW,J=K;else if(X.tail instanceof R){let V=X.head;return u(V)}else Z=qX(X,K,I([])),W=new e,J=K}}function A8(Z,W){if(Z instanceof R)return Z;else{let J=Z.tail;if(J instanceof R)return Z;else{let X=Z.head,Q=J.head,K=J.tail,G,V=W(X,Q);if(V instanceof l)G=new e;else if(V instanceof a)G=new e;else G=new DW;let Y=G,H=HX(K,W,I([X]),Y,Q,I([]));return zX(H,new e,W)}}}function P8(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return;else{let{head:Q,tail:K}=J;X(Q),Z=K,W=X}}}function jX(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return X;else{let Q=J.head;Z=J.tail,W=X+Q}}}function L8(Z){return jX(Z,"")}function DX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return K;else{let G=X.head;Z=X.tail,W=Q,J=K+Q+G}}}function q6(Z,W){if(Z instanceof R)return"";else{let{head:J,tail:X}=Z;return DX(X,W,J)}}function C8(Z,W){if(W==="")return mZ(Z);else{let X=r(Z),Q=e6(X,W);return GW(Q,r)}}class BW extends z{constructor(Z,W,J){super();this.expected=Z,this.found=W,this.path=J}}class VW extends z{constructor(Z){super();this.function=Z}}var E8=new VW(LX);var z6=new VW(CX);function aZ(Z,W){let J=W.function(Z),X,Q;if(X=J[0],Q=J[1],Q instanceof R)return new C(X);else return new y(Q)}function R6(Z){return new VW((W)=>{return[Z,I([])]})}function cW(Z,W){return new VW((J)=>{let X=Z.function(J),Q,K;return Q=X[0],K=X[1],[W(Q),K]})}function TX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(K instanceof R)return Q;else{let{head:G,tail:V}=K,Y=G.function(X),H,M;if(H=Y,M=Y[1],M instanceof R)return H;else Z=X,W=Q,J=V}}}function x8(Z,W){return new VW((J)=>{let X=Z.function(J),Q,K;if(Q=X,K=X[1],K instanceof R)return Q;else return TX(J,Q,W)})}function k8(Z,W,J){let X=J(Z);if(X instanceof C)return[X[0],I([])];else return[X[0],I([new BW(W,jW(Z),I([]))])]}function LX(Z){return k8(Z,"Int",g8)}function CX(Z){return k8(Z,"String",f8)}function WJ(Z,W){let J=x8(z6,I([(()=>{return cW(E8,vZ)})()])),X=GW(W,(K)=>{let G=r(K),V=aZ(G,J);if(V instanceof C)return V[0];else return"<"+jW(G)+">"}),Q=GW(Z[1],(K)=>{return new BW(K.expected,K.found,lZ(X,K.path))});return[Z[0],Q]}function wX(Z,W,J,X,Q){while(!0){let K=Z,G=W,V=J,Y=X,H=Q;if(K instanceof R){let U=V(Y);return WJ(U,u(G))}else{let{head:M,tail:U}=K,O=b8(Y,M);if(O instanceof C){let D=O[0];if(D instanceof QZ){let B=D[0];Z=U,W=F(M,G),J=V,X=B,Q=H}else return H(Y,F(M,G))}else{let D=O[0],B=V(Y),A;A=B[0];let N=[A,I([new BW(D,jW(Y),I([]))])];return WJ(N,u(G))}}}}function y8(Z,W,J){return new VW((X)=>{let Q=wX(Z,I([]),W.function,X,(M,U)=>{let O=W.function(M),D;D=O[0];let B=[D,I([new BW("Field","Nothing",I([]))])];return WJ(B,u(U))}),K,G;K=Q[0],G=Q[1];let V=J(K).function(X),Y,H;return Y=V[0],H=V[1],[Y,lZ(G,H)]})}var EX=void 0,h8={};function r(Z){return Z}function vZ(Z){return Z.toString()}function B8(Z,W){return Z.toString(W).toUpperCase()}function mZ(Z){let W=xX(Z);if(W)return YZ.fromArray(Array.from(W).map((J)=>J.segment));else return YZ.fromArray(Z.match(/./gsu))}var _8=void 0;function xX(Z){if(globalThis.Intl&&Intl.Segmenter)return _8||=new Intl.Segmenter,_8.segment(Z)[Symbol.iterator]()}function e6(Z,W){return YZ.fromArray(Z.split(W))}function ZJ(Z,W){return Z.startsWith(W)}var v8=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),kK=new RegExp(`^[${v8}]*`),yK=new RegExp(`[${v8}]*$`);function OZ(){return KZ.new()}function JJ(Z){return YZ.fromArray(Z.entries())}function m8(Z,W){return W.delete(Z)}function WZ(Z,W){let J=Z.get(W,h8);if(J===h8)return new y(EX);return new C(J)}function $8(Z,W,J){return J.set(Z,W)}function jW(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof OW)return"Result";else if(Z instanceof YZ)return"List";else if(Z instanceof hW)return"BitArray";else if(Z instanceof KZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let W=typeof Z;return W.charAt(0).toUpperCase()+W.slice(1)}}function j8(Z){let W=Z.toString().replace("+","");if(W.indexOf(".")>=0)return W;else{let J=W.indexOf("e");if(J>=0)return W.slice(0,J)+".0"+W.slice(J);else return W+".0"}}class kX{#Z=new Set;inspect(Z){let W=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(W==="string")return this.#K(Z);if(W==="bigint"||Number.isInteger(Z))return Z.toString();if(W==="number")return j8(Z);if(Z instanceof _6)return this.#G(Z);if(Z instanceof hW)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let X=[];for(let Q of Array(Z.length).keys())X.push(String.fromCharCode(Q+97));return`//fn(${X.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let J;if(Array.isArray(Z))J=`#(${Z.map((X)=>this.inspect(X)).join(", ")})`;else if(Z instanceof YZ)J=this.#W(Z);else if(Z instanceof z)J=this.#X(Z);else if(Z instanceof KZ)J=this.#J(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((X)=>this.inspect(X)).join(", ")}))`;else J=this.#Q(Z);return this.#Z.delete(Z),J}#Q(Z){let W=Object.getPrototypeOf(Z)?.constructor?.name||"Object",J=[];for(let K of Object.keys(Z))J.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let X=J.length?" "+J.join(", ")+" ":"";return`//js(${W==="Object"?"":W+" "}{${X}})`}#J(Z){let W="dict.from_list([",J=!0;return Z.forEach((X,Q)=>{if(!J)W=W+", ";W=W+"#("+this.inspect(Q)+", "+this.inspect(X)+")",J=!1}),W+"])"}#X(Z){let W=Object.keys(Z).map((J)=>{let X=this.inspect(Z[J]);return isNaN(parseInt(J))?`${J}: ${X}`:X}).join(", ");return W?`${Z.constructor.name}(${W})`:Z.constructor.name}#W(Z){if(Z instanceof R)return"[]";let W='charlist.from_string("',J="[",X=Z;while(X instanceof BZ){let Q=X.head;if(X=X.tail,J!=="[")J+=", ";if(J+=this.inspect(Q),W)if(Number.isInteger(Q)&&Q>=32&&Q<=126)W+=String.fromCharCode(Q);else W=null}if(W)return W+'")';else return J+"]"}#K(Z){let W='"';for(let J=0;J<Z.length;J++){let X=Z[J];switch(X){case`
`:W+="\\n";break;case"\r":W+="\\r";break;case"\t":W+="\\t";break;case"\f":W+="\\f";break;case"\\":W+="\\\\";break;case'"':W+="\\\"";break;default:if(X<" "||X>"~"&&X<" ")W+="\\u{"+X.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else W+=X}}return W+='"',W}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let W="<<";for(let J=0;J<Z.byteSize-1;J++)W+=Z.byteAt(J).toString(),W+=", ";if(Z.byteSize*8===Z.bitSize)W+=Z.byteAt(Z.byteSize-1).toString();else{let J=Z.bitSize%8;W+=Z.byteAt(Z.byteSize-1)>>8-J,W+=`:size(${J})`}return W+=">>",W}}function b8(Z,W){if(Z instanceof KZ||Z instanceof WeakMap||Z instanceof Map){let X={},Q=Z.get(W,X);if(Q===X)return new C(new UZ);return new C(new QZ(Q))}let J=Number.isInteger(W);if(J&&W>=0&&W<8&&Z instanceof YZ){let X=0;for(let Q of Z){if(X===W)return new C(new QZ(Q));X++}return new y("Indexable")}if(J&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(W in Z)return new C(new QZ(Z[W]));return new C(new UZ)}return new y(J?"Indexable":"Dict")}function g8(Z){if(Number.isInteger(Z))return new C(Z);return new y(0)}function f8(Z){if(typeof Z==="string")return new C(Z);return new y("")}function jZ(Z,W,J){return $8(W,J,Z)}function yX(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return X;else{let Q=J.head;Z=J.tail,W=F(Q,X)}}}function bX(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return yX(X,I([]));else{let Q=J.tail,K=J.head[0];Z=Q,W=F(K,X)}}}function dW(Z){return bX(JJ(Z),I([]))}function sW(Z,W){return m8(W,Z)}function gX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return Q;else{let G=X.tail,V=X.head[0],Y=X.head[1];Z=G,W=K(Q,V,Y),J=K}}}function pW(Z,W,J){return gX(JJ(Z),W,J)}function u8(Z){if(Z instanceof C)return!0;else return!1}class I6 extends z{constructor(Z){super();this.dict=Z}}var fX=void 0;function YW(){return new I6(OZ())}function XJ(Z,W){let J=Z.dict,X=WZ(J,W);return u8(X)}function QJ(Z,W){return new I6(sW(Z.dict,W))}function PW(Z,W){return new I6(jZ(Z.dict,W,fX))}function d8(Z,W,J){if(Z)return W;else return J()}function n(Z){return Z}function rW(Z){return Z}function iW(Z){return rW(Z)}var DZ=()=>globalThis?.document,O6="http://www.w3.org/1999/xhtml",j6=1,GJ=3;var r8=!!globalThis.HTMLElement?.prototype?.moveBefore;var k=I([]),D6=new UZ;var dX=new nZ,sX=new l,rX=new a;function B6(Z,W){if(Z.name===W.name)return rX;else if(Z.name<W.name)return sX;else return dX}class hZ extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class nW extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class HZ extends z{constructor(Z,W,J,X,Q,K,G,V){super();this.kind=Z,this.name=W,this.handler=J,this.include=X,this.prevent_default=Q,this.stop_propagation=K,this.debounce=G,this.throttle=V}}class lW extends z{constructor(Z,W,J){super();this.prevent_default=Z,this.stop_propagation=W,this.message=J}}class o8 extends z{constructor(Z){super();this.kind=Z}}var YJ=0,HJ=1,MJ=2,FJ=0,UJ=new o8(FJ);var qJ=2;function tX(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return X;else{let Q=J.head;if(Q instanceof hZ){let K=Q.name;if(K==="")Z=J.tail,W=X;else if(K==="class"){let G=Q.value;if(G==="")Z=J.tail,W=X;else{let V=J.tail;if(V instanceof R){let Y=Q;Z=V,W=F(Y,X)}else{let Y=V.head;if(Y instanceof hZ)if(Y.name==="class"){let M=Q.kind,U=G,O=V.tail,D=Y.value,B=U+" "+D,A=new hZ(M,"class",B);Z=F(A,O),W=X}else{let M=Q;Z=V,W=F(M,X)}else{let H=Q;Z=V,W=F(H,X)}}}}else if(K==="style"){let G=Q.value;if(G==="")Z=J.tail,W=X;else{let V=J.tail;if(V instanceof R){let Y=Q;Z=V,W=F(Y,X)}else{let Y=V.head;if(Y instanceof hZ)if(Y.name==="style"){let M=Q.kind,U=G,O=V.tail,D=Y.value,B=U+";"+D,A=new hZ(M,"style",B);Z=F(A,O),W=X}else{let M=Q;Z=V,W=F(M,X)}else{let H=Q;Z=V,W=F(H,X)}}}}else{let G=Q;Z=J.tail,W=F(G,X)}}else{let K=Q;Z=J.tail,W=F(K,X)}}}}function t8(Z){if(Z instanceof R)return Z;else if(Z.tail instanceof R)return Z;else{let X=A8(Z,(Q,K)=>{return B6(K,Q)});return tX(X,k)}}function e8(Z,W){return new hZ(YJ,Z,W)}function Z9(Z,W){return new nW(HJ,Z,W)}function W9(Z,W,J,X,Q,K,G){return new HZ(MJ,Z,W,J,X,Q,K,G)}function oZ(Z,W){return e8(Z,W)}function X9(Z,W){return Z9(Z,W)}function J9(Z){return oZ("class",Z)}function Q9(Z){return oZ("id",Z)}function t(Z,W){if(Z==="")return J9("");else if(W==="")return J9("");else return oZ("style",Z+":"+W+";")}function WQ(Z,W){while(!0){let J=Z,X=W;if(J instanceof R)return X;else{let Q=J.head[0];if(Q==="")Z=J.tail,W=X;else{let K=J.head[1];if(K==="")Z=J.tail,W=X;else{let G=J.tail,V=Q,Y=K;Z=G,W=X+V+":"+Y+";"}}}}}function K9(Z){return oZ("style",WQ(Z,""))}function A6(Z){return oZ("href",Z)}class S6 extends z{constructor(Z,W,J){super();this.synchronous=Z,this.before_paint=W,this.after_paint=J}}class G9 extends z{constructor(Z,W,J,X,Q){super();this.dispatch=Z,this.emit=W,this.select=J,this.root=X,this.provide=Q}}var P6=new S6(I([]),I([]),I([]));function V9(Z,W,J,X,Q,K){let G=new G9(W,J,X,Q,K);return P8(Z.synchronous,(V)=>{return V(G)})}function CW(){return P6}function Y9(Z){return new S6(I([(J)=>{let X=J.dispatch;return Z(X)}]),P6.before_paint,P6.after_paint)}function H9(Z){return o(Z,P6,(W,J)=>{return new S6(o(J.synchronous,W.synchronous,U6),o(J.before_paint,W.before_paint,U6),o(J.after_paint,W.after_paint,U6))})}function zZ(){return null}function aW(Z,W){let J=Z?.get(W);if(J!=null)return new C(J);else return new y(void 0)}function oW(Z,W){return Z&&Z.has(W)}function HW(Z,W,J){return Z??=new Map,Z.set(W,J),Z}function zJ(Z,W){return Z?.delete(W),Z}class RJ extends z{}class IJ extends z{constructor(Z,W){super();this.key=Z,this.parent=W}}class M9 extends z{constructor(Z,W){super();this.index=Z,this.parent=W}}var T6=new RJ,eW="\t",NJ=`
`;function JQ(Z,W){while(!0){let J=Z,X=W;if(X instanceof R)return!1;else{let{head:Q,tail:K}=X,G=ZJ(J,Q);if(G)return G;else Z=J,W=K}}}function SZ(Z,W,J){if(J==="")return new M9(W,Z);else return new IJ(J,Z)}function F9(Z,W){while(!0){let J=Z,X=W;if(J instanceof RJ)if(X instanceof R)return"";else{let Q=X.tail;return L8(Q)}else if(J instanceof IJ){let Q=J.key;Z=J.parent,W=F(eW,F(Q,X))}else{let Q=J.index;Z=J.parent,W=F(eW,F(vZ(Q),X))}}}function XQ(Z){return F9(Z,I([]))}function U9(Z,W){if(W instanceof R)return!1;else return JQ(XQ(Z),W)}function OJ(Z,W){return F9(Z,I([NJ,W]))}class TZ extends z{constructor(Z,W,J,X,Q){super();this.kind=Z,this.key=W,this.mapper=J,this.children=X,this.keyed_children=Q}}class LZ extends z{constructor(Z,W,J,X,Q,K,G,V,Y,H){super();this.kind=Z,this.key=W,this.mapper=J,this.namespace=X,this.tag=Q,this.attributes=K,this.children=G,this.keyed_children=V,this.self_closing=Y,this.void=H}}class CZ extends z{constructor(Z,W,J,X){super();this.kind=Z,this.key=W,this.mapper=J,this.content=X}}class EW extends z{constructor(Z,W,J,X,Q,K,G){super();this.kind=Z,this.key=W,this.mapper=J,this.namespace=X,this.tag=Q,this.attributes=K,this.inner_html=G}}var wZ=0,MW=1,xW=2,z9=3;function Z6(Z,W){if(W==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function R9(Z,W){if(W instanceof TZ)return new TZ(W.kind,Z,W.mapper,W.children,W.keyed_children);else if(W instanceof LZ)return new LZ(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.children,W.keyed_children,W.self_closing,W.void);else if(W instanceof CZ)return new CZ(W.kind,Z,W.mapper,W.content);else return new EW(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.inner_html)}function jJ(Z,W,J,X){return new TZ(wZ,Z,W,J,X)}function W6(Z,W,J,X,Q,K,G,V,Y){return new LZ(MW,Z,W,J,X,t8(Q),K,G,V,Y)}function DJ(Z,W,J){return new CZ(xW,Z,W,J)}var BJ=(Z,W)=>Z===W,EZ=(Z,W)=>{if(Z===W)return!0;if(Z==null||W==null)return!1;let J=typeof Z;if(J!==typeof W)return!1;if(J!=="object")return!1;if(Z.constructor!==W.constructor)return!1;if(Array.isArray(Z))return GQ(Z,W);return VQ(Z,W)},GQ=(Z,W)=>{let J=Z.length;if(J!==W.length)return!1;while(J--)if(!EZ(Z[J],W[J]))return!1;return!0},VQ=(Z,W)=>{let J=Object.keys(Z),X=J.length;if(Object.keys(W).length!==X)return!1;while(X--){let Q=J[X];if(!Object.hasOwn(W,Q))return!1;if(!EZ(Z[Q],W[Q]))return!1}return!0};class uZ extends z{constructor(Z,W,J){super();this.handlers=Z,this.dispatched_paths=W,this.next_dispatched_paths=J}}class SJ extends z{constructor(Z,W){super();this.path=Z,this.handler=W}}class AJ extends z{constructor(Z){super();this.path=Z}}function TJ(){return new uZ(zZ(),k,k)}function j9(Z){return new uZ(Z.handlers,Z.next_dispatched_paths,k)}function D9(Z,W,J){return zJ(Z,OJ(W,J))}function L6(Z,W,J){let X=D9(Z.handlers,W,J);return new uZ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function I9(Z,W,J){return o(J,Z,(X,Q)=>{if(Q instanceof HZ){let K=Q.name;return D9(X,W,K)}else return X})}function LJ(Z,W,J,X){let Q=aW(Z.handlers,W+NJ+J);if(Q instanceof C){let K=Q[0],G=aZ(X,K);if(G instanceof C){let V=G[0];return new SJ(W,V)}else return new AJ(W)}else return new AJ(W)}function CJ(Z,W){let J=F(W.path,Z.next_dispatched_paths),X=new uZ(Z.handlers,Z.dispatched_paths,J);if(W instanceof SJ){let Q=W.handler;return[X,new C(Q)]}else return[X,new y(void 0)]}function wJ(Z,W,J,X){let Q=LJ(Z,W,J,X);return((K)=>{return CJ(Z,K)})(Q)}function C6(Z,W){return U9(W,Z.dispatched_paths)}function B9(Z,W,J,X,Q){return HW(Z,OJ(J,X),cW(Q,(K)=>{return new lW(K.prevent_default,K.stop_propagation,n(W)(K.message))}))}function kW(Z,W,J,X,Q){let K=B9(Z.handlers,W,J,X,Q);return new uZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function N9(Z,W,J,X){return o(X,Z,(Q,K)=>{if(K instanceof HZ){let{name:G,handler:V}=K;return B9(Q,W,J,G,V)}else return Q})}function tZ(Z,W){let J=BJ(Z,n);if(BJ(W,n))return Z;else if(J)return W;else return(Q)=>{return Z(W(Q))}}function O9(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(V instanceof R)return Q;else{let{head:Y,tail:H}=V;Z=A9(Q,K,G,Y),W=K,J=G+1,X=H}}}function A9(Z,W,J,X){if(X instanceof TZ){let Q=X.children,K=SZ(W,J,X.key);return O9(Z,K,0,Q)}else if(X instanceof LZ){let{attributes:Q,children:K}=X,G=SZ(W,J,X.key),Y=I9(Z,G,Q);return O9(Y,G,0,K)}else if(X instanceof CZ)return Z;else{let Q=X.attributes,K=SZ(W,J,X.key);return I9(Z,K,Q)}}function cZ(Z,W,J,X){let Q=A9(Z.handlers,W,J,X);return new uZ(Q,Z.dispatched_paths,Z.next_dispatched_paths)}function PJ(Z,W,J,X,Q){while(!0){let K=Z,G=W,V=J,Y=X,H=Q;if(H instanceof R)return K;else{let{head:M,tail:U}=H;Z=P9(K,G,V,Y,M),W=G,J=V,X=Y+1,Q=U}}}function P9(Z,W,J,X,Q){if(Q instanceof TZ){let K=Q.children,G=SZ(J,X,Q.key),V=tZ(W,Q.mapper);return PJ(Z,V,G,0,K)}else if(Q instanceof LZ){let{attributes:K,children:G}=Q,V=SZ(J,X,Q.key),Y=tZ(W,Q.mapper),M=N9(Z,Y,V,K);return PJ(M,Y,V,0,G)}else if(Q instanceof CZ)return Z;else{let K=Q.attributes,G=SZ(J,X,Q.key),V=tZ(W,Q.mapper);return N9(Z,V,G,K)}}function pZ(Z,W,J,X,Q){let K=P9(Z.handlers,W,J,X,Q);return new uZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function S9(Z){return pZ(TJ(),n,T6,0,Z)}function T9(Z,W,J,X,Q){let K=PJ(Z.handlers,W,J,X,Q);return new uZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function xZ(Z,W,J){return W6("",n,"",Z,W,J,zZ(),!1,Z6(Z,""))}function J6(Z){return DJ("",n,Z)}function L9(){return DJ("",n,"")}function JZ(Z){return J6(Z)}function C9(Z,W){return xZ("article",Z,W)}function w9(Z,W){return xZ("h1",Z,W)}function EJ(Z,W){return xZ("div",Z,W)}function E9(Z,W){return xZ("p",Z,W)}function x9(Z,W){return xZ("pre",Z,W)}function w6(Z,W){return xZ("a",Z,W)}function k9(Z,W){return xZ("span",Z,W)}function xJ(Z,W){return xZ("button",Z,W)}function y9(Z,W){return xZ("textarea",F(X9("value",iW(W)),Z),I([J6(W)]))}class Q6 extends z{constructor(Z,W,J,X){super();this.index=Z,this.removed=W,this.changes=J,this.children=X}}class g9 extends z{constructor(Z,W){super();this.kind=Z,this.content=W}}class f9 extends z{constructor(Z,W){super();this.kind=Z,this.inner_html=W}}class h9 extends z{constructor(Z,W,J){super();this.kind=Z,this.added=W,this.removed=J}}class _9 extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.before=J}}class v9 extends z{constructor(Z,W,J){super();this.kind=Z,this.index=W,this.with=J}}class m9 extends z{constructor(Z,W){super();this.kind=Z,this.index=W}}class $9 extends z{constructor(Z,W,J){super();this.kind=Z,this.children=W,this.before=J}}var kJ=0,yJ=1,bJ=2,gJ=3,fJ=4,hJ=5,_J=6;function vJ(Z,W,J,X){return new Q6(Z,W,J,X)}function u9(Z){return new g9(kJ,Z)}function c9(Z){return new f9(yJ,Z)}function mJ(Z,W){return new h9(bJ,Z,W)}function p9(Z,W){return new _9(gJ,Z,W)}function d9(Z){return new m9(fJ,Z)}function UW(Z,W){return new v9(hJ,Z,W)}function $J(Z,W){return new $9(_J,Z,W)}class r9 extends z{constructor(Z,W,J,X,Q,K,G,V){super();this.kind=Z,this.open_shadow_root=W,this.will_adopt_styles=J,this.observed_attributes=X,this.observed_properties=Q,this.requested_contexts=K,this.provided_contexts=G,this.vdom=V}}class i9 extends z{constructor(Z,W){super();this.kind=Z,this.patch=W}}class n9 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.data=J}}class l9 extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.value=J}}class E6 extends z{constructor(Z,W){super();this.kind=Z,this.messages=W}}class x6 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class k6 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class y6 extends z{constructor(Z,W,J,X){super();this.kind=Z,this.path=W,this.name=J,this.event=X}}class uJ extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.value=J}}var FQ=0,UQ=1,qQ=2,zQ=3;function a9(Z,W,J,X,Q,K,G){return new r9(FQ,Z,W,J,X,Q,K,G)}function cJ(Z){return new i9(UQ,Z)}function o9(Z,W){return new n9(qQ,Z,W)}function t9(Z,W){return new l9(zQ,Z,W)}class b6 extends z{constructor(Z,W){super();this.patch=Z,this.events=W}}class W0 extends z{constructor(Z,W,J){super();this.added=Z,this.removed=W,this.events=J}}function RQ(Z,W,J,X){if(J==="input"&&W==="")return C6(Z,X);else if(J==="select"&&W==="")return C6(Z,X);else if(J==="textarea"&&W==="")return C6(Z,X);else return!1}function Z0(Z,W,J,X,Q,K,G,V){while(!0){let Y=Z,H=W,M=J,U=X,O=Q,D=K,B=G,A=V;if(O instanceof R)if(D instanceof R)return new W0(B,A,U);else{let N=D.head;if(N instanceof HZ){let T=N,j=D.tail,P=N.name,w=N.handler,q=F(T,B),S=kW(U,M,H,P,w);Z=Y,W=H,J=M,X=S,Q=O,K=j,G=q,V=A}else{let T=N,j=D.tail,P=F(T,B);Z=Y,W=H,J=M,X=U,Q=O,K=j,G=P,V=A}}else if(D instanceof R){let N=O.head;if(N instanceof HZ){let T=N,j=O.tail,P=N.name,w=F(T,A),q=L6(U,H,P);Z=Y,W=H,J=M,X=q,Q=j,K=D,G=B,V=w}else{let T=N,j=O.tail,P=F(T,A);Z=Y,W=H,J=M,X=U,Q=j,K=D,G=B,V=P}}else{let{head:N,tail:T}=O,j=D.head,P=D.tail,w=B6(N,j);if(w instanceof l)if(N instanceof HZ){let q=N.name,S=F(N,A),L=L6(U,H,q);Z=Y,W=H,J=M,X=L,Q=T,K=D,G=B,V=S}else{let q=F(N,A);Z=Y,W=H,J=M,X=U,Q=T,K=D,G=B,V=q}else if(w instanceof a)if(N instanceof hZ)if(j instanceof hZ){let q,S=j.name;if(S==="value")q=Y||N.value!==j.value;else if(S==="checked")q=Y||N.value!==j.value;else if(S==="selected")q=Y||N.value!==j.value;else q=N.value!==j.value;let L=q,E;if(L)E=F(j,B);else E=B;let x=E;Z=Y,W=H,J=M,X=U,Q=T,K=P,G=x,V=A}else if(j instanceof HZ){let{name:q,handler:S}=j,L=F(j,B),E=F(N,A),x=kW(U,M,H,q,S);Z=Y,W=H,J=M,X=x,Q=T,K=P,G=L,V=E}else{let q=F(j,B),S=F(N,A);Z=Y,W=H,J=M,X=U,Q=T,K=P,G=q,V=S}else if(N instanceof nW)if(j instanceof nW){let q,S=j.name;if(S==="scrollLeft")q=!0;else if(S==="scrollRight")q=!0;else if(S==="value")q=Y||!EZ(N.value,j.value);else if(S==="checked")q=Y||!EZ(N.value,j.value);else if(S==="selected")q=Y||!EZ(N.value,j.value);else q=!EZ(N.value,j.value);let L=q,E;if(L)E=F(j,B);else E=B;let x=E;Z=Y,W=H,J=M,X=U,Q=T,K=P,G=x,V=A}else if(j instanceof HZ){let{name:q,handler:S}=j,L=F(j,B),E=F(N,A),x=kW(U,M,H,q,S);Z=Y,W=H,J=M,X=x,Q=T,K=P,G=L,V=E}else{let q=F(j,B),S=F(N,A);Z=Y,W=H,J=M,X=U,Q=T,K=P,G=q,V=S}else if(j instanceof HZ){let{name:q,handler:S}=j,L=N.prevent_default.kind!==j.prevent_default.kind||N.stop_propagation.kind!==j.stop_propagation.kind||N.debounce!==j.debounce||N.throttle!==j.throttle,E;if(L)E=F(j,B);else E=B;let x=E,g=kW(U,M,H,q,S);Z=Y,W=H,J=M,X=g,Q=T,K=P,G=x,V=A}else{let q=N.name,S=F(j,B),L=F(N,A),E=L6(U,H,q);Z=Y,W=H,J=M,X=E,Q=T,K=P,G=S,V=L}else if(j instanceof HZ){let{name:q,handler:S}=j,L=F(j,B),E=kW(U,M,H,q,S);Z=Y,W=H,J=M,X=E,Q=O,K=P,G=L,V=A}else{let q=F(j,B);Z=Y,W=H,J=M,X=U,Q=O,K=P,G=q,V=A}}}}function pJ(Z,W,J,X,Q,K,G,V,Y,H,M,U,O,D){while(!0){let B=Z,A=W,N=J,T=X,j=Q,P=K,w=G,q=V,S=Y,L=H,E=M,x=U,g=O,c=D;if(B instanceof R)if(N instanceof R)return new b6(new Q6(S,w,E,x),c);else{let FZ=T9(c,g,L,q,N),ZZ=$J(N,q-P),p=F(ZZ,E);return new b6(new Q6(S,w,p,x),FZ)}else if(N instanceof R){let{head:FZ,tail:ZZ}=B,p;if(FZ.key===""||!oW(j,FZ.key))p=w+1;else p=w;let h=p,v=cZ(c,L,q,FZ);Z=ZZ,W=A,J=N,X=T,Q=j,K=P,G=h,V=q,Y=S,H=L,M=E,U=x,O=g,D=v}else{let FZ=B.head,ZZ=N.head;if(FZ.key!==ZZ.key){let p=B.tail,d=N.tail,h=aW(A,ZZ.key);if(oW(T,FZ.key))if(h instanceof C){let b=h[0];if(oW(j,FZ.key))Z=p,W=A,J=N,X=T,Q=j,K=P-1,G=w,V=q,Y=S,H=L,M=E,U=x,O=g,D=c;else{let m=q-P,f=F(p9(ZZ.key,m),E),s=HW(j,ZZ.key,void 0),$=P+1;Z=F(b,B),W=A,J=N,X=T,Q=s,K=$,G=w,V=q,Y=S,H=L,M=f,U=x,O=g,D=c}}else{let b=q-P,_=pZ(c,g,L,q,ZZ),m=$J(I([ZZ]),b),f=F(m,E);Z=B,W=A,J=d,X=T,Q=j,K=P+1,G=w,V=q+1,Y=S,H=L,M=f,U=x,O=g,D=_}else if(h instanceof C){let b=q-P,_=F(d9(b),E),m=cZ(c,L,q,FZ),f=P-1;Z=p,W=A,J=N,X=T,Q=j,K=f,G=w,V=q,Y=S,H=L,M=_,U=x,O=g,D=m}else{let b=UW(q-P,ZZ),_,f=cZ(c,L,q,FZ);_=pZ(f,g,L,q,ZZ);let s=_;Z=p,W=A,J=d,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=F(b,E),U=x,O=g,D=s}}else{let p=B.head;if(p instanceof TZ){let d=N.head;if(d instanceof TZ){let h=p,v=B.tail,b=d,_=N.tail,m=tZ(g,b.mapper),f=SZ(L,q,b.key),s=pJ(h.children,h.keyed_children,b.children,b.keyed_children,zZ(),0,0,0,q,f,k,k,m,c),$,i=s.patch;if(i.changes instanceof R)if(i.children instanceof R)if(i.removed===0)$=x;else $=F(s.patch,x);else $=F(s.patch,x);else $=F(s.patch,x);let kZ=$;Z=v,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=E,U=kZ,O=g,D=s.events}else{let h=p,v=B.tail,b=d,_=N.tail,m=UW(q-P,b),f,$=cZ(c,L,q,h);f=pZ($,g,L,q,b);let i=f;Z=v,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,E),U=x,O=g,D=i}}else if(p instanceof LZ){let d=N.head;if(d instanceof LZ){let h=p,v=d;if(h.namespace===v.namespace&&h.tag===v.tag){let b=B.tail,_=N.tail,m=tZ(g,v.mapper),f=SZ(L,q,v.key),s=RQ(c,v.namespace,v.tag,f),$=Z0(s,f,m,c,h.attributes,v.attributes,k,k),i,_Z,kZ;i=$.added,_Z=$.removed,kZ=$.events;let ZW;if(i instanceof R&&_Z instanceof R)ZW=k;else ZW=I([mJ(i,_Z)]);let IW=ZW,NW=pJ(h.children,h.keyed_children,v.children,v.keyed_children,zZ(),0,0,0,q,f,IW,k,m,kZ),rZ,WW=NW.patch;if(WW.changes instanceof R)if(WW.children instanceof R)if(WW.removed===0)rZ=x;else rZ=F(NW.patch,x);else rZ=F(NW.patch,x);else rZ=F(NW.patch,x);let k0=rZ;Z=b,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=E,U=k0,O=g,D=NW.events}else{let b=p,_=B.tail,m=d,f=N.tail,s=UW(q-P,m),$,_Z=cZ(c,L,q,b);$=pZ(_Z,g,L,q,m);let kZ=$;Z=_,W=A,J=f,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=F(s,E),U=x,O=g,D=kZ}}else{let h=p,v=B.tail,b=d,_=N.tail,m=UW(q-P,b),f,$=cZ(c,L,q,h);f=pZ($,g,L,q,b);let i=f;Z=v,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,E),U=x,O=g,D=i}}else if(p instanceof CZ){let d=N.head;if(d instanceof CZ){let h=p,v=d;if(h.content===v.content){let b=B.tail,_=N.tail;Z=b,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=E,U=x,O=g,D=c}else{let b=B.tail,_=d,m=N.tail,f=vJ(q,0,I([u9(_.content)]),k);Z=b,W=A,J=m,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=E,U=F(f,x),O=g,D=c}}else{let h=p,v=B.tail,b=d,_=N.tail,m=UW(q-P,b),f,$=cZ(c,L,q,h);f=pZ($,g,L,q,b);let i=f;Z=v,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,E),U=x,O=g,D=i}}else{let d=N.head;if(d instanceof EW){let h=p,v=B.tail,b=d,_=N.tail,m=tZ(g,b.mapper),f=SZ(L,q,b.key),s=Z0(!1,f,m,c,h.attributes,b.attributes,k,k),$,i,_Z;$=s.added,i=s.removed,_Z=s.events;let kZ;if($ instanceof R&&i instanceof R)kZ=k;else kZ=I([mJ($,i)]);let ZW=kZ,IW;if(h.inner_html===b.inner_html)IW=ZW;else IW=F(c9(b.inner_html),ZW);let rZ=IW,WW;if(rZ instanceof R)WW=x;else WW=F(vJ(q,0,rZ,I([])),x);let G8=WW;Z=v,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=E,U=G8,O=g,D=_Z}else{let h=p,v=B.tail,b=d,_=N.tail,m=UW(q-P,b),f,$=cZ(c,L,q,h);f=pZ($,g,L,q,b);let i=f;Z=v,W=A,J=_,X=T,Q=j,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,E),U=x,O=g,D=i}}}}}}function bW(Z,W,J){return pJ(I([W]),zZ(),I([J]),zZ(),zZ(),0,0,0,0,T6,k,k,n,j9(Z))}var{setTimeout:IQ,clearTimeout:dJ}=globalThis,NQ=(Z,W)=>DZ().createElementNS(Z,W),OQ=(Z)=>DZ().createTextNode(Z),jQ=()=>DZ().createDocumentFragment(),gW=(Z,W,J)=>Z.insertBefore(W,J),X0=r8?(Z,W,J)=>Z.moveBefore(W,J):gW,DQ=(Z,W)=>Z.removeChild(W),BQ=(Z,W)=>Z.getAttribute(W),Q0=(Z,W,J)=>Z.setAttribute(W,J),AQ=(Z,W)=>Z.removeAttribute(W),PQ=(Z,W,J,X)=>Z.addEventListener(W,J,X),K0=(Z,W,J)=>Z.removeEventListener(W,J),SQ=(Z,W)=>Z.innerHTML=W,TQ=(Z,W)=>Z.data=W,dZ=Symbol("lustre");class Y0{constructor(Z,W,J,X){this.kind=Z,this.key=X,this.parent=W,this.children=[],this.node=J,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===wZ?this.node.parentNode:this.node}}var sZ=(Z,W,J,X,Q)=>{let K=new Y0(Z,W,J,Q);return J[dZ]=K,W?.children.splice(X,0,K),K},LQ=(Z)=>{let W="";for(let J=Z[dZ];J.parent;J=J.parent)if(J.key)W=`${eW}${J.key}${W}`;else{let X=J.parent.children.indexOf(J);W=`${eW}${X}${W}`}return W.slice(1)};class rJ{#Z=null;#Q;#J;#X=!1;constructor(Z,W,J,{exposeKeys:X=!1}={}){this.#Z=Z,this.#Q=W,this.#J=J,this.#X=X}mount(Z){sZ(MW,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[dZ],0,Z)}push(Z){this.#W.push({node:this.#Z[dZ],patch:Z}),this.#K()}#W=[];#K(){let Z=this.#W;while(Z.length){let{node:W,patch:J}=Z.pop(),{children:X}=W,{changes:Q,removed:K,children:G}=J;if(qW(Q,(V)=>this.#G(W,V)),K)this.#U(W,X.length-K,K);qW(G,(V)=>{let Y=X[V.index|0];this.#W.push({node:Y,patch:V})})}}#G(Z,W){switch(W.kind){case kJ:this.#P(Z,W);break;case yJ:this.#j(Z,W);break;case bJ:this.#z(Z,W);break;case gJ:this.#M(Z,W);break;case fJ:this.#I(Z,W);break;case hJ:this.#F(Z,W);break;case _J:this.#Y(Z,W);break}}#Y(Z,{children:W,before:J}){let X=jQ(),Q=this.#H(Z,J);this.#N(X,null,Z,J|0,W),gW(Z.parentNode,X,Q)}#F(Z,{index:W,with:J}){this.#U(Z,W|0,1);let X=this.#H(Z,W);this.#O(Z.parentNode,X,Z,W|0,J)}#H(Z,W){W=W|0;let{children:J}=Z,X=J.length;if(W<X)return J[W].node;let Q=J[X-1];if(!Q&&Z.kind!==wZ)return null;if(!Q)Q=Z;while(Q.kind===wZ&&Q.children.length)Q=Q.children[Q.children.length-1];return Q.node.nextSibling}#M(Z,{key:W,before:J}){J=J|0;let{children:X,parentNode:Q}=Z,K=X[J].node,G=X[J];for(let M=J+1;M<X.length;++M){let U=X[M];if(X[M]=G,G=U,U.key===W){X[J]=U;break}}let{kind:V,node:Y,children:H}=G;if(X0(Q,Y,K),V===wZ)this.#V(Q,H,K)}#V(Z,W,J){for(let X=0;X<W.length;++X){let{kind:Q,node:K,children:G}=W[X];if(X0(Z,K,J),Q===wZ)this.#V(Z,G,J)}}#I(Z,{index:W}){this.#U(Z,W,1)}#U(Z,W,J){let{children:X,parentNode:Q}=Z,K=X.splice(W,J);for(let G=0;G<K.length;++G){let{kind:V,node:Y,children:H}=K[G];if(DQ(Q,Y),this.#q(K[G]),V===wZ)K.push(...H)}}#q(Z){let{debouncers:W,children:J}=Z;for(let{timeout:X}of W.values())if(X)dJ(X);W.clear(),qW(J,(X)=>this.#q(X))}#z({node:Z,handlers:W,throttles:J,debouncers:X},{added:Q,removed:K}){qW(K,({name:G})=>{if(W.delete(G))K0(Z,G,sJ),this.#R(J,G,0),this.#R(X,G,0);else AQ(Z,G),V0[G]?.removed?.(Z,G)}),qW(Q,(G)=>this.#A(Z,G))}#P({node:Z},{content:W}){TQ(Z,W??"")}#j({node:Z},{inner_html:W}){SQ(Z,W??"")}#N(Z,W,J,X,Q){qW(Q,(K)=>this.#O(Z,W,J,X++,K))}#O(Z,W,J,X,Q){switch(Q.kind){case MW:{let K=this.#D(J,X,Q);this.#N(K,null,K[dZ],0,Q.children),gW(Z,K,W);break}case xW:{let K=this.#B(J,X,Q);gW(Z,K,W);break}case wZ:{let K=this.#B(J,X,Q);gW(Z,K,W),this.#N(Z,W,K[dZ],0,Q.children);break}case z9:{let K=this.#D(J,X,Q);this.#j({node:K},Q),gW(Z,K,W);break}}}#D(Z,W,{kind:J,key:X,tag:Q,namespace:K,attributes:G}){let V=NQ(K||O6,Q);if(sZ(J,Z,V,W,X),this.#X&&X)Q0(V,"data-lustre-key",X);return qW(G,(Y)=>this.#A(V,Y)),V}#B(Z,W,{kind:J,key:X,content:Q}){let K=OQ(Q??"");return sZ(J,Z,K,W,X),K}#A(Z,W){let{debouncers:J,handlers:X,throttles:Q}=Z[dZ],{kind:K,name:G,value:V,prevent_default:Y,debounce:H,throttle:M}=W;switch(K){case YJ:{let U=V??"";if(G==="virtual:defaultValue"){Z.defaultValue=U;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(U!==BQ(Z,G))Q0(Z,G,U);V0[G]?.added?.(Z,U);break}case HJ:Z[G]=V;break;case MJ:{if(X.has(G))K0(Z,G,sJ);let U=Y.kind===FJ;PQ(Z,G,sJ,{passive:U}),this.#R(Q,G,M),this.#R(J,G,H),X.set(G,(O)=>this.#S(W,O));break}}}#R(Z,W,J){let X=Z.get(W);if(J>0)if(X)X.delay=J;else Z.set(W,{delay:J});else if(X){let{timeout:Q}=X;if(Q)dJ(Q);Z.delete(W)}}#S(Z,W){let{currentTarget:J,type:X}=W,{debouncers:Q,throttles:K}=J[dZ],G=LQ(J),{prevent_default:V,stop_propagation:Y,include:H}=Z;if(V.kind===qJ)W.preventDefault();if(Y.kind===qJ)W.stopPropagation();if(X==="submit")W.detail??={},W.detail.formData=[...new FormData(W.target,W.submitter).entries()];let M=this.#Q(W,G,X,H),U=K.get(X);if(U){let D=Date.now(),B=U.last||0;if(D>B+U.delay)U.last=D,U.lastEvent=W,this.#J(W,M)}let O=Q.get(X);if(O)dJ(O.timeout),O.timeout=IQ(()=>{if(W===K.get(X)?.lastEvent)return;this.#J(W,M)},O.delay);if(!U&&!O)this.#J(W,M)}}var qW=(Z,W)=>{if(Array.isArray(Z))for(let J=0;J<Z.length;J++)W(Z[J]);else if(Z)for(Z;Z.head;Z=Z.tail)W(Z.head)},sJ=(Z)=>{let{currentTarget:W,type:J}=Z;W[dZ].handlers.get(J)(Z)},G0=(Z)=>{return{added(W){W[Z]=!0},removed(W){W[Z]=!1}}},CQ=(Z)=>{return{added(W,J){W[Z]=J}}},V0={checked:G0("checked"),selected:G0("selected"),value:CQ("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(W){console.error(W)}}}};function wQ(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof R)return[Q,u(K)];else{let G=X.tail,V=X.head[0],Y=X.head[1],H=R9(V,Y),M;if(V==="")M=Q;else M=HW(Q,V,H);let U=M,O=F(H,K);Z=G,W=U,J=O}}}function iJ(Z){return wQ(Z,zZ(),k)}function H0(Z,W,J){let X=iJ(J),Q,K;return Q=X[0],K=X[1],W6("",n,"",Z,W,K,Q,!1,Z6(Z,""))}function M0(Z,W,J,X){let Q=iJ(X),K,G;return K=Q[0],G=Q[1],W6("",n,Z,W,J,G,K,!1,Z6(W,Z))}function F0(Z){let W=iJ(Z),J,X;return J=W[0],X=W[1],jJ("",n,X,J)}var U0=(Z)=>{let W=sZ(MW,null,Z,0,null),J=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(q0(G))J+=1;if(J===0){let G=DZ().createTextNode("");return sZ(xW,W,G,0,null),Z.replaceChildren(G),L9()}if(J===1)return nJ(W,Z).head[1];let X=DZ().createTextNode(""),Q=sZ(wZ,W,X,0,null),K=nJ(Q,Z);return Z.insertBefore(X,Z.firstChild),F0(K)},q0=(Z)=>{switch(Z.nodeType){case j6:return!0;case GJ:return!!Z.data;default:return!1}},EQ=(Z,W,J,X)=>{if(!q0(W))return null;switch(W.nodeType){case j6:{let Q=sZ(MW,Z,W,X,J),K=W.localName,G=W.namespaceURI,V=!G||G===O6;if(V&&xQ.includes(K))kQ(K,W);let Y=yQ(W),H=nJ(Q,W);return V?H0(K,Y,H):M0(G,K,Y,H)}case GJ:return sZ(xW,Z,W,X,null),J6(W.data);default:return null}},xQ=["input","select","textarea"],kQ=(Z,W)=>{let{value:J,checked:X}=W;if(Z==="input"&&W.type==="checkbox"&&!X)return;if(Z==="input"&&W.type==="radio"&&!X)return;if(W.type!=="checkbox"&&W.type!=="radio"&&!J)return;queueMicrotask(()=>{if(W.value=J,W.checked=X,W.dispatchEvent(new Event("input",{bubbles:!0})),W.dispatchEvent(new Event("change",{bubbles:!0})),DZ().activeElement!==W)W.dispatchEvent(new Event("blur",{bubbles:!0}))})},nJ=(Z,W)=>{let J=null,X=W.firstChild,Q=null,K=0;while(X){let G=X.nodeType===j6?X.getAttribute("data-lustre-key"):null;if(G!=null)X.removeAttribute("data-lustre-key");let V=EQ(Z,X,G,K),Y=X.nextSibling;if(V){let H=new BZ([G??"",V],null);if(Q)Q=Q.tail=H;else Q=J=H;K+=1}else W.removeChild(X);X=Y}if(!Q)return k;return Q.tail=k,J},yQ=(Z)=>{let W=Z.attributes.length,J=k;while(W-- >0){let X=Z.attributes[W];if(X.name==="xmlns")continue;J=new BZ(bQ(X),J)}return J},bQ=(Z)=>{let{localName:W,value:J}=Z;return oZ(W,J)};var K6=()=>!!DZ();class g6{constructor(Z,[W,J],X,Q){this.root=Z,this.#Z=W,this.#Q=X,this.#J=Q,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#G.has(V.context))return;V.stopImmediatePropagation();let Y=this.#G.get(V.context);if(V.subscribe){let H=()=>{Y.subscribers=Y.subscribers.filter((M)=>M!==V.callback)};Y.subscribers.push([V.callback,H]),V.callback(Y.value,H)}else V.callback(Y.value)});let K=(V,Y,H)=>LJ(this.#W,Y,H,V),G=(V,Y)=>{let[H,M]=CJ(this.#W,Y);if(this.#W=H,M.isOk()){let U=M[0];if(U.stop_propagation)V.stopPropagation();if(U.prevent_default)V.preventDefault();this.dispatch(U.message,!1)}};this.#K=new rJ(this.root,K,G),this.#X=U0(this.root),this.#W=TJ(),this.#q(J),this.#z()}root=null;dispatch(Z,W=!1){if(this.#Y)this.#F.push(Z);else{let[J,X]=this.#J(this.#Z,Z);this.#Z=J,this.#U(X,W)}}emit(Z,W){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:W,bubbles:!0,composed:!0}))}provide(Z,W){if(!this.#G.has(Z))this.#G.set(Z,{value:W,subscribers:[]});else{let J=this.#G.get(Z);if(EZ(J.value,W))return;J.value=W;for(let X=J.subscribers.length-1;X>=0;X--){let[Q,K]=J.subscribers[X];if(!Q){J.subscribers.splice(X,1);continue}Q(W,K)}}}#Z;#Q;#J;#X;#W;#K;#G=new Map;#Y=!1;#F=[];#H=k;#M=k;#V=null;#I={dispatch:(Z)=>this.dispatch(Z),emit:(Z,W)=>this.emit(Z,W),select:()=>{},root:()=>this.root,provide:(Z,W)=>this.provide(Z,W)};#U(Z,W=!1){if(this.#q(Z),!this.#V)if(W)this.#V="sync",queueMicrotask(()=>this.#z());else this.#V=requestAnimationFrame(()=>this.#z())}#q(Z){this.#Y=!0;while(!0){for(let J=Z.synchronous;J.tail;J=J.tail)J.head(this.#I);if(this.#H=R0(this.#H,Z.before_paint),this.#M=R0(this.#M,Z.after_paint),!this.#F.length)break;let W=this.#F.shift();[this.#Z,Z]=this.#J(this.#Z,W)}this.#Y=!1}#z(){this.#V=null;let Z=this.#Q(this.#Z),{patch:W,events:J}=bW(this.#W,this.#X,Z);if(this.#W=J,this.#X=Z,this.#K.push(W),this.#H instanceof BZ){let X=z0(this.#H);this.#H=k,queueMicrotask(()=>{this.#U(X,!0)})}if(this.#M instanceof BZ){let X=z0(this.#M);this.#M=k,requestAnimationFrame(()=>{this.#U(X,!0)})}}}function z0(Z){return{synchronous:Z,after_paint:k,before_paint:k}}function R0(Z,W){if(Z instanceof R)return W;else if(W instanceof R)return Z;else return lZ(Z,W)}class aJ extends z{constructor(Z){super();this.message=Z}}class oJ extends z{constructor(Z){super();this.callback=Z}}class tJ extends z{constructor(Z){super();this.callback=Z}}class eZ extends z{constructor(Z){super();this.message=Z}}class zW extends z{constructor(Z,W){super();this.name=Z,this.data=W}}class f6 extends z{constructor(Z,W){super();this.key=Z,this.value=W}}class RW extends z{}class N0 extends z{constructor(Z,W,J,X,Q,K,G,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=W,this.delegates_focus=J,this.attributes=X,this.properties=Q,this.contexts=K,this.is_form_associated=G,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function O0(Z){let W=new N0(!0,!0,!1,k,k,k,!1,D6,D6,D6);return o(Z,W,(J,X)=>{return X.apply(J)})}class D0{#Z;constructor(Z,[W,J],X,Q){this.#Z=new g6(Z,[W,J],Q,X)}send(Z){switch(Z.constructor){case eZ:{this.dispatch(Z.message,!1);break}case zW:{this.emit(Z.name,Z.data);break}case RW:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,W){this.#Z.emit(Z,W)}}var B0=({init:Z,update:W,view:J},X,Q)=>{if(!K6())return new y(new G6);let K=X instanceof HTMLElement?X:DZ().querySelector(X);if(!K)return new y(new eJ(X));return new C(new D0(K,Z(Q),W,J))};class gQ{#Z;#Q;#J;#X;#W;#K;#G=OZ();#Y=new Set;constructor([Z,W],J,X,Q){this.#Z=Z,this.#Q=J,this.#J=X,this.#X=Q,this.#W=this.#J(this.#Z),this.#K=S9(this.#W),this.#V(W)}send(Z){switch(Z.constructor){case aJ:{let{message:W}=Z,J=this.#F(W),X=bW(this.#K,this.#W,J);this.#W=J,this.#K=X.events,this.broadcast(cJ(X.patch));return}case oJ:{let{callback:W}=Z;this.#Y.add(W),W(a9(this.#X.open_shadow_root,this.#X.adopt_styles,dW(this.#X.attributes),dW(this.#X.properties),dW(this.#X.contexts),this.#G,this.#W));return}case tJ:{let{callback:W}=Z;this.#Y.delete(W);return}case eZ:{let{message:W}=Z,[J,X]=this.#Q(this.#Z,W),Q=this.#J(J),K=bW(this.#K,this.#W,Q);this.#V(X),this.#Z=J,this.#W=Q,this.#K=K.events,this.broadcast(cJ(K.patch));return}case zW:{let{name:W,data:J}=Z;this.broadcast(o9(W,J));return}case f6:{let{key:W,value:J}=Z,X=WZ(this.#G,W);if(X.isOk()&&EZ(X[0],J))return;this.#G=jZ(this.#G,W,J),this.broadcast(t9(W,J));return}case RW:{this.#Z=null,this.#Q=null,this.#J=null,this.#X=null,this.#W=null,this.#K=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let W of this.#Y)W(Z)}#F(Z){switch(Z.constructor){case E6:{let{messages:W}=Z,J=this.#Z,X=CW();for(let Q=W;Q.head;Q=Q.tail){let K=this.#F(Q.head);if(K instanceof C){J=K[0][0],X=H9(YZ.fromArray([X,K[0][1]]));break}}return this.#V(X),this.#Z=J,this.#J(this.#Z)}case x6:{let{name:W,value:J}=Z,X=this.#H(W,J);if(X instanceof y)return this.#W;else{let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}case k6:{let{name:W,value:J}=Z,X=this.#M(W,J);if(X instanceof y)return this.#W;else{let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}case y6:{let{path:W,name:J,event:X}=Z,[Q,K]=wJ(this.#K,W,J,X);if(this.#K=Q,K instanceof y)return this.#W;else{let[G,V]=this.#Q(this.#Z,K[0].message);return this.#V(V),this.#Z=G,this.#J(this.#Z)}}case uJ:{let{key:W,value:J}=Z,X=WZ(this.#X.contexts,W);if(X instanceof y)return this.#W;if(X=aZ(J,X[0]),X instanceof y)return this.#W;let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}}#H(Z,W){let J=WZ(this.#X.attributes,Z);switch(J.constructor){case C:return J[0](W);case y:return new y(void 0)}}#M(Z,W){let J=WZ(this.#X.properties,Z);switch(J.constructor){case C:return J[0](W);case y:return new y(void 0)}}#V(Z){let W=(G)=>this.send(new eZ(G)),J=(G,V)=>this.send(new zW(G,V)),X=()=>{return},Q=()=>{return},K=(G,V)=>this.send(new f6(G,V));globalThis.queueMicrotask(()=>{V9(Z,W,J,X,Q,K)})}}class A0 extends z{constructor(Z,W,J,X){super();this.init=Z,this.update=W,this.view=J,this.config=X}}class eJ extends z{constructor(Z){super();this.selector=Z}}class G6 extends z{}function P0(Z,W,J){return new A0(Z,W,J,O0(k))}function S0(Z,W,J){return d8(!K6(),new y(new G6),()=>{return B0(Z,W,J)})}function T0(Z,W){return W9(Z,cW(W,(J)=>{return new lW(!1,!1,J)}),k,UJ,UJ,0,0)}function Z8(Z){return T0("click",R6(Z))}function L0(Z){return T0("input",y8(I(["target","value"]),z6,(W)=>{return R6(Z(W))}))}function C0(Z,W){window.setTimeout(W,Z)}var vQ="src\\tachyon.gleam";class MZ extends z{constructor(Z){super();this[0]=Z}}class Y6 extends z{constructor(Z){super();this[0]=Z}}class W8 extends z{constructor(Z,W,J,X,Q,K){super();this.in=Z,this.curr_b=W,this.lines_todo=J,this.lines_done=X,this.on_index=Q,this.count=K}}class H6 extends z{constructor(Z,W){super();this.millisec=Z,this.index=W}}class J8 extends z{constructor(Z){super();this[0]=Z}}class w0 extends z{constructor(Z){super();this[0]=Z}}class X8 extends z{constructor(Z){super();this[0]=Z}}class Q8 extends z{constructor(Z){super();this[0]=Z}}class K8 extends z{}class E0 extends z{}var mQ=`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;function V6(Z){return Y9((W)=>{return C0(Z.millisec,()=>{return W(new X8(Z))})})}function h6(Z,W,J){return new W8(Z,J,(()=>{return C8(Z,`
`)})(),I([]),W,0)}function $Q(Z){let W=0,J=h6(Z,W,new MZ(YW())),X=iZ(3000,$W(J.lines_todo));return[J,V6(new H6(X,W))]}function uQ(Z,W){if(W instanceof MZ){let J=W[0],X=o((()=>{return mZ(Z)})(),[YW(),0,0],(K,G)=>{let V=K[1]+1,Y=K[0],H=K[2],M;if((()=>{return XJ(J,V)})())if(G==="^")M=[(()=>{let N=QJ(Y,V),T=PW(N,V+1);return PW(T,V-1)})(),H+1];else if(G===".")M=[(()=>{return PW(Y,V)})(),H];else M=[Y,H];else{let A;if(G==="S")A=PW(Y,V);else if(G==="s")A=PW(Y,V);else A=Y;M=[A,H]}let O=M,D,B;return D=O[0],B=O[1],[D,V,B]}),Q=t6((()=>{return mZ(Z)})(),X,(K,G,V)=>{let Y=K[0],H=K[2];if(G===".")return K;else if(G==="S")return K;else if(G==="s")return K;else return[(()=>{return QJ(Y,V+1)})(),0,H-1]});return[new MZ(Q[0]),new J8(Q[2])]}else{let J=W[0],X=o((()=>{return mZ(Z)})(),[OZ(),0],(G,V)=>{let Y=G[1]+1,H=G[0],M,U=(()=>{return WZ(J,Y)})();if(U instanceof C){let D=U[0];if(V==="^"){let B=Y-1,A,N=(()=>{return WZ(H,B)})();if(N instanceof C)A=N[0]+D;else A=D;let T=A,j=Y+1,P,w=(()=>{return WZ(H,j)})();if(w instanceof C)P=w[0]+D;else P=D;let q=P,L=jZ(H,B,T),E=jZ(L,j,q);M=sW(E,Y)}else if(V==="."){let B,A=(()=>{return WZ(H,Y)})();if(A instanceof C)B=A[0]+D;else B=D;M=jZ(H,Y,B)}else M=H}else if(V==="S")M=jZ(H,Y,1);else if(V==="s")M=jZ(H,Y,1);else M=H;return[M,Y]}),Q=t6((()=>{return mZ(Z)})(),X,(G,V,Y)=>{let H=G[0];if(V===".")return G;else if(V==="S")return G;else if(V==="s")return G;else return[(()=>{return sW(H,Y+1)})(),0]}),K=pW(Q[0],0,(G,V,Y)=>{return G+Y});return[new Y6(Q[0]),new w0(K)]}}function cQ(Z,W){if(W instanceof X8){let J=W[0];if(J.index===Z.on_index){let Q=Z.lines_todo;if(Q instanceof R)return[Z,CW()];else{let{head:K,tail:G}=Q,V=uQ(K,Z.curr_b),Y,H;Y=V[0],H=V[1];let M;if(H instanceof J8){let P=H[0];M=Z.count+P}else M=H[0];let U=M,O=o((()=>{return mZ(K)})(),[I([]),0],(P,w)=>{let q=P[1]+1,S;if(w==="S")S=JZ("S");else if(w==="s")S=JZ("s");else if(Y instanceof MZ){let E=Y[0];if((()=>{return XJ(E,q)})())S=JZ("|");else S=JZ(w)}else{let E=Y[0],x=(()=>{return WZ(E,q)})();if(x instanceof C){let g=x[0],c,FZ=191-iZ(191*g,U);c=D8(FZ);let ZZ=c;S=k9(I([t("color","#"+ZZ+ZZ+ZZ)]),I([JZ("|")]))}else S=JZ(w)}return[F(S,P[0]),q]})[0],D,B=F(JZ(`
`),O);D=u(B);let A=D,N,T=Z.lines_done;N=lZ(T,A);let j=N;return[new W8(Z.in,Y,G,j,Z.on_index,U),V6(J)]}}else return[Z,CW()]}else if(W instanceof Q8){let J=W[0],X=Z.on_index+1,Q=h6(J,X,(()=>{if(Z.curr_b instanceof MZ)return new MZ(YW());else return new Y6(OZ())})()),K=iZ(3000,$W(Q.lines_todo));return[Q,V6(new H6(K,X))]}else if(W instanceof K8){let J=Z.on_index+1,X=h6(Z.in,J,(()=>{if(Z.curr_b instanceof MZ)return new Y6(OZ());else return new MZ(YW())})()),Q=iZ(3000,$W(X.lines_todo));return[X,V6(new H6(Q,J))]}else{let J=Z.on_index+1,X=h6(Z.in,J,(()=>{if(Z.curr_b instanceof MZ)return new MZ(YW());else return new Y6(OZ())})()),Q=iZ(3000,$W(X.lines_todo));return[X,V6(new H6(Q,J))]}}function pQ(Z){return C9(I([t("display","flex"),t("flex-direction","column"),t("gap","5px")]),I([w9(I([]),I([w6(I([A6("/")]),I([JZ("Correct Arity")]))])),E9(I([]),I([w6(I([A6("https://adventofcode.com/2025/day/7")]),I([JZ("Advent of Code day 7")])),JZ(" visualization: (quantum) tachyon manifold particle splitting "),w6(I([A6("https://github.com/D-matz/day25tachyon/blob/main/src/tachyon.gleam")]),I([JZ("(source)")]))])),EJ(I([]),I([xJ(I([Z8(new K8),t("width","115px"),t("padding","3px")]),I([JZ((()=>{if(Z.curr_b instanceof MZ)return"Enable Quantum";else return"Disable Quantum"})())])),xJ(I([Z8(new E0),t("width","fit-content"),t("margin","5px"),t("padding","3px")]),I([JZ("Replay")])),JZ((()=>{if(Z.curr_b instanceof MZ)return"split count: ";else return"timeline count: "})()+(()=>{let W=Z.count;return vZ(W)})())])),EJ(I([t("display","flex"),t("flex-wrap","wrap"),t("gap","8px"),t("align-items","flex-start")]),I([y9(I([Q9("input"),t("height","260px"),t("width","130px"),L0((W)=>{return new Q8(W)})]),Z.in),x9(I([t("margin-top","0px"),(()=>{if(Z.curr_b instanceof MZ)return t("border","1px solid #2f2f2f");else return K9(I([["border","1px solid #a6f0fc"],["box-shadow","0 0 50px #a6f0fc"]]))})()]),(()=>{let W=Z.lines_done;return lZ(W,I([JZ((()=>{let J=Z.lines_todo;return q6(J,`
`)})())]))})())]))]))}function x0(){let Z=P0($Q,cQ,pQ),W=S0(Z,"#app",mQ);if(!(W instanceof C))throw m6("let_assert",vQ,"tachyon",17,"main","Pattern match failed, no pattern matched the value.",{value:W,start:432,end:488,pattern_start:443,pattern_end:448});return}x0();
