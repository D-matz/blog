class z{withFields(Z){let W=Object.keys(this).map((J)=>(J in Z)?Z[J]:this[J]);return new this.constructor(...W)}}class YZ{static fromArray(Z,W){let J=W||new I;for(let X=Z.length-1;X>=0;--X)J=new BZ(Z[X],J);return J}[Symbol.iterator](){return new Y8(this)}toArray(){return[...this]}atLeastLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return W!==void 0}hasLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return Z===-1&&W instanceof I}countLength(){let Z=this,W=0;while(Z)Z=Z.tail,W++;return W-1}}function F(Z,W){return new BZ(Z,W)}function N(Z,W){return YZ.fromArray(Z,W)}class Y8{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof I)return{done:!0};else{let{head:Z,tail:W}=this.#Z;return this.#Z=W,{value:Z,done:!1}}}}class I extends YZ{}class BZ extends YZ{constructor(Z,W){super();this.head=Z,this.tail=W}}class hW{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,W,J){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=W??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=J??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return fW(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let W=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let X=0;X<W;X++)if(this.rawBuffer[X]!==Z.rawBuffer[X])return!1;let J=this.bitSize%8;if(J){let X=8-J;if(this.rawBuffer[W]>>X!==Z.rawBuffer[W]>>X)return!1}}else{for(let X=0;X<W;X++){let Q=fW(this.rawBuffer,this.bitOffset,X),K=fW(Z.rawBuffer,Z.bitOffset,X);if(Q!==K)return!1}let J=this.bitSize%8;if(J){let X=fW(this.rawBuffer,this.bitOffset,W),Q=fW(Z.rawBuffer,Z.bitOffset,W),K=8-J;if(X>>K!==Q>>K)return!1}}return!0}get buffer(){if(G8("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(G8("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function fW(Z,W,J){if(W===0)return Z[J]??0;else{let X=Z[J]<<W&255,Q=Z[J+1]>>8-W;return X|Q}}class _6{constructor(Z){this.value=Z}}var K8={};function G8(Z,W){if(K8[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${W}.`),K8[Z]=!0}class OW extends z{static isResult(Z){return Z instanceof OW}}class C extends OW{constructor(Z){super();this[0]=Z}isOk(){return!0}}class k extends OW{constructor(Z){super();this[0]=Z}isOk(){return!1}}function XZ(Z,W){let J=[Z,W];while(J.length){let X=J.pop(),Q=J.pop();if(X===Q)continue;if(!V8(X)||!V8(Q))return!1;if(!v0(X,Q)||y0(X,Q)||b0(X,Q)||g0(X,Q)||f0(X,Q)||h0(X,Q)||_0(X,Q))return!1;let G=Object.getPrototypeOf(X);if(G!==null&&typeof G.equals==="function")try{if(X.equals(Q))continue;else return!1}catch{}let[V,Y]=k0(X),H=V(X),M=V(Q);if(H.length!==M.length)return!1;for(let U of H)J.push(Y(X,U),Y(Q,U))}return!0}function k0(Z){if(Z instanceof Map)return[(W)=>W.keys(),(W,J)=>W.get(J)];else{let W=Z instanceof globalThis.Error?["message"]:[];return[(J)=>[...W,...Object.keys(J)],(J,X)=>J[X]]}}function y0(Z,W){return Z instanceof Date&&(Z>W||Z<W)}function b0(Z,W){return!(Z instanceof hW)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===W.byteLength&&Z.every((J,X)=>J===W[X]))}function g0(Z,W){return Array.isArray(Z)&&Z.length!==W.length}function f0(Z,W){return Z instanceof Map&&Z.size!==W.size}function h0(Z,W){return Z instanceof Set&&(Z.size!=W.size||[...Z].some((J)=>!W.has(J)))}function _0(Z,W){return Z instanceof RegExp&&(Z.source!==W.source||Z.flags!==W.flags)}function V8(Z){return typeof Z==="object"&&Z!==null}function v0(Z,W){if(typeof Z!=="object"&&typeof W!=="object"&&(!Z||!W))return!1;if([Promise,WeakSet,WeakMap,Function].some((X)=>Z instanceof X))return!1;return Z.constructor===W.constructor}function rZ(Z,W){return Math.trunc(v6(Z,W))}function v6(Z,W){if(W===0)return 0;else return Z/W}function m6(Z,W,J,X,Q,K,G){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=W,V.module=J,V.line=X,V.function=Q,V.fn=Q;for(let Y in G)V[Y]=G[Y];return V}class QZ extends z{constructor(Z){super();this[0]=Z}}class UZ extends z{}var H8=new WeakMap,$6=new DataView(new ArrayBuffer(8)),u6=0;function c6(Z){let W=H8.get(Z);if(W!==void 0)return W;let J=u6++;if(u6===2147483647)u6=0;return H8.set(Z,J),J}function p6(Z,W){return Z^W+2654435769+(Z<<6)+(Z>>2)|0}function s6(Z){let W=0,J=Z.length;for(let X=0;X<J;X++)W=Math.imul(31,W)+Z.charCodeAt(X)|0;return W}function F8(Z){$6.setFloat64(0,Z);let W=$6.getInt32(0),J=$6.getInt32(4);return Math.imul(73244475,W>>16^W)^J}function m0(Z){return s6(Z.toString())}function $0(Z){let W=Object.getPrototypeOf(Z);if(W!==null&&typeof W.hashCode==="function")try{let X=Z.hashCode(Z);if(typeof X==="number")return X}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return c6(Z);if(Z instanceof Date)return F8(Z.getTime());let J=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let X=0;X<Z.length;X++)J=Math.imul(31,J)+RZ(Z[X])|0;else if(Z instanceof Set)Z.forEach((X)=>{J=J+RZ(X)|0});else if(Z instanceof Map)Z.forEach((X,Q)=>{J=J+p6(RZ(X),RZ(Q))|0});else{let X=Object.keys(Z);for(let Q=0;Q<X.length;Q++){let K=X[Q],G=Z[K];J=J+p6(RZ(G),s6(K))|0}}return J}function RZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return F8(Z);case"string":return s6(Z);case"bigint":return m0(Z);case"object":return $0(Z);case"symbol":return c6(Z);case"function":return c6(Z);default:return 0}}var bZ=5,r6=Math.pow(2,bZ),u0=r6-1,c0=r6/2,p0=r6/4,GZ=0,yZ=1,qZ=2,JW=3,i6={type:qZ,bitmap:0,array:[]};function _W(Z,W){return Z>>>W&u0}function M6(Z,W){return 1<<_W(Z,W)}function d0(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function n6(Z,W){return d0(Z&W-1)}function IZ(Z,W,J){let X=Z.length,Q=Array(X);for(let K=0;K<X;++K)Q[K]=Z[K];return Q[W]=J,Q}function s0(Z,W,J){let X=Z.length,Q=Array(X+1),K=0,G=0;while(K<W)Q[G++]=Z[K++];Q[G++]=J;while(K<X)Q[G++]=Z[K++];return Q}function d6(Z,W){let J=Z.length,X=Array(J-1),Q=0,K=0;while(Q<W)X[K++]=Z[Q++];++Q;while(Q<J)X[K++]=Z[Q++];return X}function U8(Z,W,J,X,Q,K){let G=RZ(W);if(G===X)return{type:JW,hash:G,array:[{type:GZ,k:W,v:J},{type:GZ,k:Q,v:K}]};let V={val:!1};return vW(l6(i6,Z,G,W,J,V),Z,X,Q,K,V)}function vW(Z,W,J,X,Q,K){switch(Z.type){case yZ:return r0(Z,W,J,X,Q,K);case qZ:return l6(Z,W,J,X,Q,K);case JW:return i0(Z,W,J,X,Q,K)}}function r0(Z,W,J,X,Q,K){let G=_W(J,W),V=Z.array[G];if(V===void 0)return K.val=!0,{type:yZ,size:Z.size+1,array:IZ(Z.array,G,{type:GZ,k:X,v:Q})};if(V.type===GZ){if(XZ(X,V.k)){if(Q===V.v)return Z;return{type:yZ,size:Z.size,array:IZ(Z.array,G,{type:GZ,k:X,v:Q})}}return K.val=!0,{type:yZ,size:Z.size,array:IZ(Z.array,G,U8(W+bZ,V.k,V.v,J,X,Q))}}let Y=vW(V,W+bZ,J,X,Q,K);if(Y===V)return Z;return{type:yZ,size:Z.size,array:IZ(Z.array,G,Y)}}function l6(Z,W,J,X,Q,K){let G=M6(J,W),V=n6(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[V];if(Y.type!==GZ){let M=vW(Y,W+bZ,J,X,Q,K);if(M===Y)return Z;return{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,V,M)}}let H=Y.k;if(XZ(X,H)){if(Q===Y.v)return Z;return{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,V,{type:GZ,k:X,v:Q})}}return K.val=!0,{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,V,U8(W+bZ,H,Y.v,J,X,Q))}}else{let Y=Z.array.length;if(Y>=c0){let H=Array(32),M=_W(J,W);H[M]=l6(i6,W+bZ,J,X,Q,K);let U=0,R=Z.bitmap;for(let B=0;B<32;B++){if((R&1)!==0){let j=Z.array[U++];H[B]=j}R=R>>>1}return{type:yZ,size:Y+1,array:H}}else{let H=s0(Z.array,V,{type:GZ,k:X,v:Q});return K.val=!0,{type:qZ,bitmap:Z.bitmap|G,array:H}}}}function i0(Z,W,J,X,Q,K){if(J===Z.hash){let G=a6(Z,X);if(G!==-1){if(Z.array[G].v===Q)return Z;return{type:JW,hash:J,array:IZ(Z.array,G,{type:GZ,k:X,v:Q})}}let V=Z.array.length;return K.val=!0,{type:JW,hash:J,array:IZ(Z.array,V,{type:GZ,k:X,v:Q})}}return vW({type:qZ,bitmap:M6(Z.hash,W),array:[Z]},W,J,X,Q,K)}function a6(Z,W){let J=Z.array.length;for(let X=0;X<J;X++)if(XZ(W,Z.array[X].k))return X;return-1}function H6(Z,W,J,X){switch(Z.type){case yZ:return n0(Z,W,J,X);case qZ:return l0(Z,W,J,X);case JW:return a0(Z,X)}}function n0(Z,W,J,X){let Q=_W(J,W),K=Z.array[Q];if(K===void 0)return;if(K.type!==GZ)return H6(K,W+bZ,J,X);if(XZ(X,K.k))return K;return}function l0(Z,W,J,X){let Q=M6(J,W);if((Z.bitmap&Q)===0)return;let K=n6(Z.bitmap,Q),G=Z.array[K];if(G.type!==GZ)return H6(G,W+bZ,J,X);if(XZ(X,G.k))return G;return}function a0(Z,W){let J=a6(Z,W);if(J<0)return;return Z.array[J]}function o6(Z,W,J,X){switch(Z.type){case yZ:return o0(Z,W,J,X);case qZ:return t0(Z,W,J,X);case JW:return e0(Z,X)}}function o0(Z,W,J,X){let Q=_W(J,W),K=Z.array[Q];if(K===void 0)return Z;let G=void 0;if(K.type===GZ){if(!XZ(K.k,X))return Z}else if(G=o6(K,W+bZ,J,X),G===K)return Z;if(G===void 0){if(Z.size<=p0){let V=Z.array,Y=Array(Z.size-1),H=0,M=0,U=0;while(H<Q){let R=V[H];if(R!==void 0)Y[M]=R,U|=1<<H,++M;++H}++H;while(H<V.length){let R=V[H];if(R!==void 0)Y[M]=R,U|=1<<H,++M;++H}return{type:qZ,bitmap:U,array:Y}}return{type:yZ,size:Z.size-1,array:IZ(Z.array,Q,G)}}return{type:yZ,size:Z.size,array:IZ(Z.array,Q,G)}}function t0(Z,W,J,X){let Q=M6(J,W);if((Z.bitmap&Q)===0)return Z;let K=n6(Z.bitmap,Q),G=Z.array[K];if(G.type!==GZ){let V=o6(G,W+bZ,J,X);if(V===G)return Z;if(V!==void 0)return{type:qZ,bitmap:Z.bitmap,array:IZ(Z.array,K,V)};if(Z.bitmap===Q)return;return{type:qZ,bitmap:Z.bitmap^Q,array:d6(Z.array,K)}}if(XZ(X,G.k)){if(Z.bitmap===Q)return;return{type:qZ,bitmap:Z.bitmap^Q,array:d6(Z.array,K)}}return Z}function e0(Z,W){let J=a6(Z,W);if(J<0)return Z;if(Z.array.length===1)return;return{type:JW,hash:Z.hash,array:d6(Z.array,J)}}function q8(Z,W){if(Z===void 0)return;let J=Z.array,X=J.length;for(let Q=0;Q<X;Q++){let K=J[Q];if(K===void 0)continue;if(K.type===GZ){W(K.v,K.k);continue}q8(K,W)}}class KZ{static fromObject(Z){let W=Object.keys(Z),J=KZ.new();for(let X=0;X<W.length;X++){let Q=W[X];J=J.set(Q,Z[Q])}return J}static fromMap(Z){let W=KZ.new();return Z.forEach((J,X)=>{W=W.set(X,J)}),W}static new(){return new KZ(void 0,0)}constructor(Z,W){this.root=Z,this.size=W}get(Z,W){if(this.root===void 0)return W;let J=H6(this.root,0,RZ(Z),Z);if(J===void 0)return W;return J.v}set(Z,W){let J={val:!1},X=this.root===void 0?i6:this.root,Q=vW(X,0,RZ(Z),Z,W,J);if(Q===this.root)return this;return new KZ(Q,J.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let W=o6(this.root,0,RZ(Z),Z);if(W===this.root)return this;if(W===void 0)return KZ.new();return new KZ(W,this.size-1)}has(Z){if(this.root===void 0)return!1;return H6(this.root,0,RZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((W,J)=>Z.push([J,W])),Z}forEach(Z){q8(this.root,Z)}hashCode(){let Z=0;return this.forEach((W,J)=>{Z=Z+p6(RZ(W),RZ(J))|0}),Z}equals(Z){if(!(Z instanceof KZ)||this.size!==Z.size)return!1;try{return this.forEach((W,J)=>{if(!XZ(Z.get(J,!W),W))throw M8}),!0}catch(W){if(W===M8)return!1;throw W}}}var M8=Symbol();class l extends z{}class a extends z{}class iZ extends z{}function O8(Z){return j8(Z,16)}class e extends z{}class DW extends z{}function QX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else Z=J.tail,W=X+1}}function $W(Z){return QX(Z,0)}function mW(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=F(Q,X)}}}function u(Z){return mW(Z,N([]))}function KX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return u(K);else{let G=X.head;Z=X.tail,W=Q,J=F(Q(G),K)}}}function KW(Z,W){return KX(Z,W,N([]))}function GX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=F(Q,X)}}}function nZ(Z,W){return GX(u(Z),W)}function F6(Z,W){return F(W,Z)}function o(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return Q;else{let G=X.head;Z=X.tail,W=K(Q,G),J=K}}}function VX(Z,W,J,X,Q,K){while(!0){let G=Z,V=W,Y=J,H=X,M=Q,U=K,R=F(M,Y);if(G instanceof I)if(H instanceof e)return F(u(R),U);else return F(R,U);else{let{head:B,tail:j}=G,S=V(M,B);if(H instanceof e)if(S instanceof l)Z=j,W=V,J=R,X=H,Q=B,K=U;else if(S instanceof a)Z=j,W=V,J=R,X=H,Q=B,K=U;else{let O;if(H instanceof e)O=F(u(R),U);else O=F(R,U);let L=O;if(j instanceof I)return F(N([B]),L);else{let{head:D,tail:P}=j,w,q=V(B,D);if(q instanceof l)w=new e;else if(q instanceof a)w=new e;else w=new DW;let A=w;Z=P,W=V,J=N([B]),X=A,Q=D,K=L}}else if(S instanceof l){let O;if(H instanceof e)O=F(u(R),U);else O=F(R,U);let L=O;if(j instanceof I)return F(N([B]),L);else{let{head:D,tail:P}=j,w,q=V(B,D);if(q instanceof l)w=new e;else if(q instanceof a)w=new e;else w=new DW;let A=w;Z=P,W=V,J=N([B]),X=A,Q=D,K=L}}else if(S instanceof a){let O;if(H instanceof e)O=F(u(R),U);else O=F(R,U);let L=O;if(j instanceof I)return F(N([B]),L);else{let{head:D,tail:P}=j,w,q=V(B,D);if(q instanceof l)w=new e;else if(q instanceof a)w=new e;else w=new DW;let A=w;Z=P,W=V,J=N([B]),X=A,Q=D,K=L}}else Z=j,W=V,J=R,X=H,Q=B,K=U}}}function YX(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(Q instanceof I)return mW(K,V);else if(K instanceof I)return mW(Q,V);else{let{head:Y,tail:H}=Q,M=K.head,U=K.tail,R=G(Y,M);if(R instanceof l)Z=H,W=K,J=G,X=F(Y,V);else if(R instanceof a)Z=Q,W=U,J=G,X=F(M,V);else Z=Q,W=U,J=G,X=F(M,V)}}}function HX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return u(K);else{let G=X.tail;if(G instanceof I){let V=X.head;return u(F(u(V),K))}else{let V=X.head,Y=G.head,H=G.tail,M=YX(V,Y,Q,N([]));Z=H,W=Q,J=F(M,K)}}}}function MX(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(Q instanceof I)return mW(K,V);else if(K instanceof I)return mW(Q,V);else{let{head:Y,tail:H}=Q,M=K.head,U=K.tail,R=G(Y,M);if(R instanceof l)Z=Q,W=U,J=G,X=F(M,V);else if(R instanceof a)Z=H,W=K,J=G,X=F(Y,V);else Z=H,W=K,J=G,X=F(Y,V)}}}function FX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return u(K);else{let G=X.tail;if(G instanceof I){let V=X.head;return u(F(u(V),K))}else{let V=X.head,Y=G.head,H=G.tail,M=MX(V,Y,Q,N([]));Z=H,W=Q,J=F(M,K)}}}}function UX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return X;else if(Q instanceof e)if(X.tail instanceof I)return X.head;else Z=HX(X,K,N([])),W=new DW,J=K;else if(X.tail instanceof I){let V=X.head;return u(V)}else Z=FX(X,K,N([])),W=new e,J=K}}function D8(Z,W){if(Z instanceof I)return Z;else{let J=Z.tail;if(J instanceof I)return Z;else{let X=Z.head,Q=J.head,K=J.tail,G,V=W(X,Q);if(V instanceof l)G=new e;else if(V instanceof a)G=new e;else G=new DW;let Y=G,H=VX(K,W,N([X]),Y,Q,N([]));return UX(H,new e,W)}}}function B8(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return;else{let{head:Q,tail:K}=J;X(Q),Z=K,W=X}}}function NX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=X+Q}}}function S8(Z){return NX(Z,"")}function OX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return K;else{let G=X.head;Z=X.tail,W=Q,J=K+Q+G}}}function U6(Z,W){if(Z instanceof I)return"";else{let{head:J,tail:X}=Z;return OX(X,W,J)}}function T8(Z,W){if(W==="")return GW(Z);else{let X=r(Z),Q=t6(X,W);return KW(Q,r)}}class BW extends z{constructor(Z,W,J){super();this.expected=Z,this.found=W,this.path=J}}class VW extends z{constructor(Z){super();this.function=Z}}var C8=new VW(SX);var q6=new VW(TX);function lZ(Z,W){let J=W.function(Z),X,Q;if(X=J[0],Q=J[1],Q instanceof I)return new C(X);else return new k(Q)}function z6(Z){return new VW((W)=>{return[Z,N([])]})}function cW(Z,W){return new VW((J)=>{let X=Z.function(J),Q,K;return Q=X[0],K=X[1],[W(Q),K]})}function PX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(K instanceof I)return Q;else{let{head:G,tail:V}=K,Y=G.function(X),H,M;if(H=Y,M=Y[1],M instanceof I)return H;else Z=X,W=Q,J=V}}}function w8(Z,W){return new VW((J)=>{let X=Z.function(J),Q,K;if(Q=X,K=X[1],K instanceof I)return Q;else return PX(J,Q,W)})}function E8(Z,W,J){let X=J(Z);if(X instanceof C)return[X[0],N([])];else return[X[0],N([new BW(W,jW(Z),N([]))])]}function SX(Z){return E8(Z,"Int",y8)}function TX(Z){return E8(Z,"String",b8)}function ZJ(Z,W){let J=w8(q6,N([(()=>{return cW(C8,vZ)})()])),X=KW(W,(K)=>{let G=r(K),V=lZ(G,J);if(V instanceof C)return V[0];else return"<"+jW(G)+">"}),Q=KW(Z[1],(K)=>{return new BW(K.expected,K.found,nZ(X,K.path))});return[Z[0],Q]}function LX(Z,W,J,X,Q){while(!0){let K=Z,G=W,V=J,Y=X,H=Q;if(K instanceof I){let U=V(Y);return ZJ(U,u(G))}else{let{head:M,tail:U}=K,R=k8(Y,M);if(R instanceof C){let B=R[0];if(B instanceof QZ){let j=B[0];Z=U,W=F(M,G),J=V,X=j,Q=H}else return H(Y,F(M,G))}else{let B=R[0],j=V(Y),S;S=j[0];let O=[S,N([new BW(B,jW(Y),N([]))])];return ZJ(O,u(G))}}}}function x8(Z,W,J){return new VW((X)=>{let Q=LX(Z,N([]),W.function,X,(M,U)=>{let R=W.function(M),B;B=R[0];let j=[B,N([new BW("Field","Nothing",N([]))])];return ZJ(j,u(U))}),K,G;K=Q[0],G=Q[1];let V=J(K).function(X),Y,H;return Y=V[0],H=V[1],[Y,nZ(G,H)]})}var CX=void 0,g8={};function r(Z){return Z}function vZ(Z){return Z.toString()}function j8(Z,W){return Z.toString(W).toUpperCase()}function GW(Z){let W=wX(Z);if(W)return YZ.fromArray(Array.from(W).map((J)=>J.segment));else return YZ.fromArray(Z.match(/./gsu))}var f8=void 0;function wX(Z){if(globalThis.Intl&&Intl.Segmenter)return f8||=new Intl.Segmenter,f8.segment(Z)[Symbol.iterator]()}function t6(Z,W){return YZ.fromArray(Z.split(W))}function e6(Z,W){return Z.startsWith(W)}var h8=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),EK=new RegExp(`^[${h8}]*`),xK=new RegExp(`[${h8}]*$`);function OZ(){return KZ.new()}function WJ(Z){return YZ.fromArray(Z.entries())}function _8(Z,W){return W.delete(Z)}function WZ(Z,W){let J=Z.get(W,g8);if(J===g8)return new k(CX);return new C(J)}function v8(Z,W,J){return J.set(Z,W)}function jW(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof OW)return"Result";else if(Z instanceof YZ)return"List";else if(Z instanceof hW)return"BitArray";else if(Z instanceof KZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let W=typeof Z;return W.charAt(0).toUpperCase()+W.slice(1)}}function N8(Z){let W=Z.toString().replace("+","");if(W.indexOf(".")>=0)return W;else{let J=W.indexOf("e");if(J>=0)return W.slice(0,J)+".0"+W.slice(J);else return W+".0"}}class EX{#Z=new Set;inspect(Z){let W=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(W==="string")return this.#K(Z);if(W==="bigint"||Number.isInteger(Z))return Z.toString();if(W==="number")return N8(Z);if(Z instanceof _6)return this.#G(Z);if(Z instanceof hW)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let X=[];for(let Q of Array(Z.length).keys())X.push(String.fromCharCode(Q+97));return`//fn(${X.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let J;if(Array.isArray(Z))J=`#(${Z.map((X)=>this.inspect(X)).join(", ")})`;else if(Z instanceof YZ)J=this.#W(Z);else if(Z instanceof z)J=this.#X(Z);else if(Z instanceof KZ)J=this.#J(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((X)=>this.inspect(X)).join(", ")}))`;else J=this.#Q(Z);return this.#Z.delete(Z),J}#Q(Z){let W=Object.getPrototypeOf(Z)?.constructor?.name||"Object",J=[];for(let K of Object.keys(Z))J.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let X=J.length?" "+J.join(", ")+" ":"";return`//js(${W==="Object"?"":W+" "}{${X}})`}#J(Z){let W="dict.from_list([",J=!0;return Z.forEach((X,Q)=>{if(!J)W=W+", ";W=W+"#("+this.inspect(Q)+", "+this.inspect(X)+")",J=!1}),W+"])"}#X(Z){let W=Object.keys(Z).map((J)=>{let X=this.inspect(Z[J]);return isNaN(parseInt(J))?`${J}: ${X}`:X}).join(", ");return W?`${Z.constructor.name}(${W})`:Z.constructor.name}#W(Z){if(Z instanceof I)return"[]";let W='charlist.from_string("',J="[",X=Z;while(X instanceof BZ){let Q=X.head;if(X=X.tail,J!=="[")J+=", ";if(J+=this.inspect(Q),W)if(Number.isInteger(Q)&&Q>=32&&Q<=126)W+=String.fromCharCode(Q);else W=null}if(W)return W+'")';else return J+"]"}#K(Z){let W='"';for(let J=0;J<Z.length;J++){let X=Z[J];switch(X){case`
`:W+="\\n";break;case"\r":W+="\\r";break;case"\t":W+="\\t";break;case"\f":W+="\\f";break;case"\\":W+="\\\\";break;case'"':W+="\\\"";break;default:if(X<" "||X>"~"&&X<" ")W+="\\u{"+X.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else W+=X}}return W+='"',W}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let W="<<";for(let J=0;J<Z.byteSize-1;J++)W+=Z.byteAt(J).toString(),W+=", ";if(Z.byteSize*8===Z.bitSize)W+=Z.byteAt(Z.byteSize-1).toString();else{let J=Z.bitSize%8;W+=Z.byteAt(Z.byteSize-1)>>8-J,W+=`:size(${J})`}return W+=">>",W}}function k8(Z,W){if(Z instanceof KZ||Z instanceof WeakMap||Z instanceof Map){let X={},Q=Z.get(W,X);if(Q===X)return new C(new UZ);return new C(new QZ(Q))}let J=Number.isInteger(W);if(J&&W>=0&&W<8&&Z instanceof YZ){let X=0;for(let Q of Z){if(X===W)return new C(new QZ(Q));X++}return new k("Indexable")}if(J&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(W in Z)return new C(new QZ(Z[W]));return new C(new UZ)}return new k(J?"Indexable":"Dict")}function y8(Z){if(Number.isInteger(Z))return new C(Z);return new k(0)}function b8(Z){if(typeof Z==="string")return new C(Z);return new k("")}function jZ(Z,W,J){return v8(W,J,Z)}function xX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=F(Q,X)}}}function kX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return xX(X,N([]));else{let Q=J.tail,K=J.head[0];Z=Q,W=F(K,X)}}}function dW(Z){return kX(WJ(Z),N([]))}function R6(Z,W){return _8(W,Z)}function yX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return Q;else{let G=X.tail,V=X.head[0],Y=X.head[1];Z=G,W=K(Q,V,Y),J=K}}}function pW(Z,W,J){return yX(WJ(Z),W,J)}function m8(Z){if(Z instanceof C)return!0;else return!1}class I6 extends z{constructor(Z){super();this.dict=Z}}var bX=void 0;function YW(){return new I6(OZ())}function JJ(Z,W){let J=Z.dict,X=WZ(J,W);return m8(X)}function $8(Z,W){return new I6(R6(Z.dict,W))}function PW(Z,W){return new I6(jZ(Z.dict,W,bX))}function p8(Z,W,J){if(Z)return W;else return J()}function n(Z){return Z}function sW(Z){return Z}function rW(Z){return sW(Z)}var DZ=()=>globalThis?.document,O6="http://www.w3.org/1999/xhtml",j6=1,QJ=3;var s8=!!globalThis.HTMLElement?.prototype?.moveBefore;var x=N([]),D6=new UZ;var cX=new iZ,pX=new l,dX=new a;function B6(Z,W){if(Z.name===W.name)return dX;else if(Z.name<W.name)return pX;else return cX}class hZ extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class iW extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class HZ extends z{constructor(Z,W,J,X,Q,K,G,V){super();this.kind=Z,this.name=W,this.handler=J,this.include=X,this.prevent_default=Q,this.stop_propagation=K,this.debounce=G,this.throttle=V}}class nW extends z{constructor(Z,W,J){super();this.prevent_default=Z,this.stop_propagation=W,this.message=J}}class a8 extends z{constructor(Z){super();this.kind=Z}}var GJ=0,VJ=1,YJ=2,HJ=0,MJ=new a8(HJ);var FJ=2;function aX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;if(Q instanceof hZ){let K=Q.name;if(K==="")Z=J.tail,W=X;else if(K==="class"){let G=Q.value;if(G==="")Z=J.tail,W=X;else{let V=J.tail;if(V instanceof I){let Y=Q;Z=V,W=F(Y,X)}else{let Y=V.head;if(Y instanceof hZ)if(Y.name==="class"){let M=Q.kind,U=G,R=V.tail,B=Y.value,j=U+" "+B,S=new hZ(M,"class",j);Z=F(S,R),W=X}else{let M=Q;Z=V,W=F(M,X)}else{let H=Q;Z=V,W=F(H,X)}}}}else if(K==="style"){let G=Q.value;if(G==="")Z=J.tail,W=X;else{let V=J.tail;if(V instanceof I){let Y=Q;Z=V,W=F(Y,X)}else{let Y=V.head;if(Y instanceof hZ)if(Y.name==="style"){let M=Q.kind,U=G,R=V.tail,B=Y.value,j=U+";"+B,S=new hZ(M,"style",j);Z=F(S,R),W=X}else{let M=Q;Z=V,W=F(M,X)}else{let H=Q;Z=V,W=F(H,X)}}}}else{let G=Q;Z=J.tail,W=F(G,X)}}else{let K=Q;Z=J.tail,W=F(K,X)}}}}function o8(Z){if(Z instanceof I)return Z;else if(Z.tail instanceof I)return Z;else{let X=D8(Z,(Q,K)=>{return B6(K,Q)});return aX(X,x)}}function t8(Z,W){return new hZ(GJ,Z,W)}function e8(Z,W){return new iW(VJ,Z,W)}function Z9(Z,W,J,X,Q,K,G){return new HZ(YJ,Z,W,J,X,Q,K,G)}function aZ(Z,W){return t8(Z,W)}function J9(Z,W){return e8(Z,W)}function W9(Z){return aZ("class",Z)}function X9(Z){return aZ("id",Z)}function t(Z,W){if(Z==="")return W9("");else if(W==="")return W9("");else return aZ("style",Z+":"+W+";")}function eX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head[0];if(Q==="")Z=J.tail,W=X;else{let K=J.head[1];if(K==="")Z=J.tail,W=X;else{let G=J.tail,V=Q,Y=K;Z=G,W=X+V+":"+Y+";"}}}}}function Q9(Z){return aZ("style",eX(Z,""))}function A6(Z){return aZ("href",Z)}class S6 extends z{constructor(Z,W,J){super();this.synchronous=Z,this.before_paint=W,this.after_paint=J}}class K9 extends z{constructor(Z,W,J,X,Q){super();this.dispatch=Z,this.emit=W,this.select=J,this.root=X,this.provide=Q}}var P6=new S6(N([]),N([]),N([]));function G9(Z,W,J,X,Q,K){let G=new K9(W,J,X,Q,K);return B8(Z.synchronous,(V)=>{return V(G)})}function CW(){return P6}function V9(Z){return new S6(N([(J)=>{let X=J.dispatch;return Z(X)}]),P6.before_paint,P6.after_paint)}function Y9(Z){return o(Z,P6,(W,J)=>{return new S6(o(J.synchronous,W.synchronous,F6),o(J.before_paint,W.before_paint,F6),o(J.after_paint,W.after_paint,F6))})}function zZ(){return null}function lW(Z,W){let J=Z?.get(W);if(J!=null)return new C(J);else return new k(void 0)}function aW(Z,W){return Z&&Z.has(W)}function HW(Z,W,J){return Z??=new Map,Z.set(W,J),Z}function UJ(Z,W){return Z?.delete(W),Z}class qJ extends z{}class zJ extends z{constructor(Z,W){super();this.key=Z,this.parent=W}}class H9 extends z{constructor(Z,W){super();this.index=Z,this.parent=W}}var T6=new qJ,tW="\t",RJ=`
`;function ZQ(Z,W){while(!0){let J=Z,X=W;if(X instanceof I)return!1;else{let{head:Q,tail:K}=X,G=e6(J,Q);if(G)return G;else Z=J,W=K}}}function SZ(Z,W,J){if(J==="")return new H9(W,Z);else return new zJ(J,Z)}function M9(Z,W){while(!0){let J=Z,X=W;if(J instanceof qJ)if(X instanceof I)return"";else{let Q=X.tail;return S8(Q)}else if(J instanceof zJ){let Q=J.key;Z=J.parent,W=F(tW,F(Q,X))}else{let Q=J.index;Z=J.parent,W=F(tW,F(vZ(Q),X))}}}function WQ(Z){return M9(Z,N([]))}function F9(Z,W){if(W instanceof I)return!1;else return ZQ(WQ(Z),W)}function IJ(Z,W){return M9(Z,N([RJ,W]))}class TZ extends z{constructor(Z,W,J,X,Q){super();this.kind=Z,this.key=W,this.mapper=J,this.children=X,this.keyed_children=Q}}class LZ extends z{constructor(Z,W,J,X,Q,K,G,V,Y,H){super();this.kind=Z,this.key=W,this.mapper=J,this.namespace=X,this.tag=Q,this.attributes=K,this.children=G,this.keyed_children=V,this.self_closing=Y,this.void=H}}class CZ extends z{constructor(Z,W,J,X){super();this.kind=Z,this.key=W,this.mapper=J,this.content=X}}class EW extends z{constructor(Z,W,J,X,Q,K,G){super();this.kind=Z,this.key=W,this.mapper=J,this.namespace=X,this.tag=Q,this.attributes=K,this.inner_html=G}}var wZ=0,MW=1,xW=2,q9=3;function eW(Z,W){if(W==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function z9(Z,W){if(W instanceof TZ)return new TZ(W.kind,Z,W.mapper,W.children,W.keyed_children);else if(W instanceof LZ)return new LZ(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.children,W.keyed_children,W.self_closing,W.void);else if(W instanceof CZ)return new CZ(W.kind,Z,W.mapper,W.content);else return new EW(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.inner_html)}function NJ(Z,W,J,X){return new TZ(wZ,Z,W,J,X)}function Z6(Z,W,J,X,Q,K,G,V,Y){return new LZ(MW,Z,W,J,X,o8(Q),K,G,V,Y)}function OJ(Z,W,J){return new CZ(xW,Z,W,J)}var jJ=(Z,W)=>Z===W,EZ=(Z,W)=>{if(Z===W)return!0;if(Z==null||W==null)return!1;let J=typeof Z;if(J!==typeof W)return!1;if(J!=="object")return!1;if(Z.constructor!==W.constructor)return!1;if(Array.isArray(Z))return QQ(Z,W);return KQ(Z,W)},QQ=(Z,W)=>{let J=Z.length;if(J!==W.length)return!1;while(J--)if(!EZ(Z[J],W[J]))return!1;return!0},KQ=(Z,W)=>{let J=Object.keys(Z),X=J.length;if(Object.keys(W).length!==X)return!1;while(X--){let Q=J[X];if(!Object.hasOwn(W,Q))return!1;if(!EZ(Z[Q],W[Q]))return!1}return!0};class $Z extends z{constructor(Z,W,J){super();this.handlers=Z,this.dispatched_paths=W,this.next_dispatched_paths=J}}class AJ extends z{constructor(Z,W){super();this.path=Z,this.handler=W}}class DJ extends z{constructor(Z){super();this.path=Z}}function PJ(){return new $Z(zZ(),x,x)}function O9(Z){return new $Z(Z.handlers,Z.next_dispatched_paths,x)}function j9(Z,W,J){return UJ(Z,IJ(W,J))}function L6(Z,W,J){let X=j9(Z.handlers,W,J);return new $Z(X,Z.dispatched_paths,Z.next_dispatched_paths)}function R9(Z,W,J){return o(J,Z,(X,Q)=>{if(Q instanceof HZ){let K=Q.name;return j9(X,W,K)}else return X})}function SJ(Z,W,J,X){let Q=lW(Z.handlers,W+RJ+J);if(Q instanceof C){let K=Q[0],G=lZ(X,K);if(G instanceof C){let V=G[0];return new AJ(W,V)}else return new DJ(W)}else return new DJ(W)}function TJ(Z,W){let J=F(W.path,Z.next_dispatched_paths),X=new $Z(Z.handlers,Z.dispatched_paths,J);if(W instanceof AJ){let Q=W.handler;return[X,new C(Q)]}else return[X,new k(void 0)]}function LJ(Z,W,J,X){let Q=SJ(Z,W,J,X);return((K)=>{return TJ(Z,K)})(Q)}function C6(Z,W){return F9(W,Z.dispatched_paths)}function D9(Z,W,J,X,Q){return HW(Z,IJ(J,X),cW(Q,(K)=>{return new nW(K.prevent_default,K.stop_propagation,n(W)(K.message))}))}function kW(Z,W,J,X,Q){let K=D9(Z.handlers,W,J,X,Q);return new $Z(K,Z.dispatched_paths,Z.next_dispatched_paths)}function I9(Z,W,J,X){return o(X,Z,(Q,K)=>{if(K instanceof HZ){let{name:G,handler:V}=K;return D9(Q,W,J,G,V)}else return Q})}function oZ(Z,W){let J=jJ(Z,n);if(jJ(W,n))return Z;else if(J)return W;else return(Q)=>{return Z(W(Q))}}function N9(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(V instanceof I)return Q;else{let{head:Y,tail:H}=V;Z=B9(Q,K,G,Y),W=K,J=G+1,X=H}}}function B9(Z,W,J,X){if(X instanceof TZ){let Q=X.children,K=SZ(W,J,X.key);return N9(Z,K,0,Q)}else if(X instanceof LZ){let{attributes:Q,children:K}=X,G=SZ(W,J,X.key),Y=R9(Z,G,Q);return N9(Y,G,0,K)}else if(X instanceof CZ)return Z;else{let Q=X.attributes,K=SZ(W,J,X.key);return R9(Z,K,Q)}}function uZ(Z,W,J,X){let Q=B9(Z.handlers,W,J,X);return new $Z(Q,Z.dispatched_paths,Z.next_dispatched_paths)}function BJ(Z,W,J,X,Q){while(!0){let K=Z,G=W,V=J,Y=X,H=Q;if(H instanceof I)return K;else{let{head:M,tail:U}=H;Z=A9(K,G,V,Y,M),W=G,J=V,X=Y+1,Q=U}}}function A9(Z,W,J,X,Q){if(Q instanceof TZ){let K=Q.children,G=SZ(J,X,Q.key),V=oZ(W,Q.mapper);return BJ(Z,V,G,0,K)}else if(Q instanceof LZ){let{attributes:K,children:G}=Q,V=SZ(J,X,Q.key),Y=oZ(W,Q.mapper),M=I9(Z,Y,V,K);return BJ(M,Y,V,0,G)}else if(Q instanceof CZ)return Z;else{let K=Q.attributes,G=SZ(J,X,Q.key),V=oZ(W,Q.mapper);return I9(Z,V,G,K)}}function cZ(Z,W,J,X,Q){let K=A9(Z.handlers,W,J,X,Q);return new $Z(K,Z.dispatched_paths,Z.next_dispatched_paths)}function P9(Z){return cZ(PJ(),n,T6,0,Z)}function S9(Z,W,J,X,Q){let K=BJ(Z.handlers,W,J,X,Q);return new $Z(K,Z.dispatched_paths,Z.next_dispatched_paths)}function xZ(Z,W,J){return Z6("",n,"",Z,W,J,zZ(),!1,eW(Z,""))}function W6(Z){return OJ("",n,Z)}function T9(){return OJ("",n,"")}function JZ(Z){return W6(Z)}function L9(Z,W){return xZ("article",Z,W)}function C9(Z,W){return xZ("h1",Z,W)}function CJ(Z,W){return xZ("div",Z,W)}function w9(Z,W){return xZ("p",Z,W)}function E9(Z,W){return xZ("pre",Z,W)}function w6(Z,W){return xZ("a",Z,W)}function x9(Z,W){return xZ("span",Z,W)}function wJ(Z,W){return xZ("button",Z,W)}function k9(Z,W){return xZ("textarea",F(J9("value",rW(W)),Z),N([W6(W)]))}class X6 extends z{constructor(Z,W,J,X){super();this.index=Z,this.removed=W,this.changes=J,this.children=X}}class b9 extends z{constructor(Z,W){super();this.kind=Z,this.content=W}}class g9 extends z{constructor(Z,W){super();this.kind=Z,this.inner_html=W}}class f9 extends z{constructor(Z,W,J){super();this.kind=Z,this.added=W,this.removed=J}}class h9 extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.before=J}}class _9 extends z{constructor(Z,W,J){super();this.kind=Z,this.index=W,this.with=J}}class v9 extends z{constructor(Z,W){super();this.kind=Z,this.index=W}}class m9 extends z{constructor(Z,W,J){super();this.kind=Z,this.children=W,this.before=J}}var EJ=0,xJ=1,kJ=2,yJ=3,bJ=4,gJ=5,fJ=6;function hJ(Z,W,J,X){return new X6(Z,W,J,X)}function $9(Z){return new b9(EJ,Z)}function u9(Z){return new g9(xJ,Z)}function _J(Z,W){return new f9(kJ,Z,W)}function c9(Z,W){return new h9(yJ,Z,W)}function p9(Z){return new v9(bJ,Z)}function UW(Z,W){return new _9(gJ,Z,W)}function vJ(Z,W){return new m9(fJ,Z,W)}class s9 extends z{constructor(Z,W,J,X,Q,K,G,V){super();this.kind=Z,this.open_shadow_root=W,this.will_adopt_styles=J,this.observed_attributes=X,this.observed_properties=Q,this.requested_contexts=K,this.provided_contexts=G,this.vdom=V}}class r9 extends z{constructor(Z,W){super();this.kind=Z,this.patch=W}}class i9 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.data=J}}class n9 extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.value=J}}class E6 extends z{constructor(Z,W){super();this.kind=Z,this.messages=W}}class x6 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class k6 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class y6 extends z{constructor(Z,W,J,X){super();this.kind=Z,this.path=W,this.name=J,this.event=X}}class mJ extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.value=J}}var HQ=0,MQ=1,FQ=2,UQ=3;function l9(Z,W,J,X,Q,K,G){return new s9(HQ,Z,W,J,X,Q,K,G)}function $J(Z){return new r9(MQ,Z)}function a9(Z,W){return new i9(FQ,Z,W)}function o9(Z,W){return new n9(UQ,Z,W)}class b6 extends z{constructor(Z,W){super();this.patch=Z,this.events=W}}class Z0 extends z{constructor(Z,W,J){super();this.added=Z,this.removed=W,this.events=J}}function qQ(Z,W,J,X){if(J==="input"&&W==="")return C6(Z,X);else if(J==="select"&&W==="")return C6(Z,X);else if(J==="textarea"&&W==="")return C6(Z,X);else return!1}function e9(Z,W,J,X,Q,K,G,V){while(!0){let Y=Z,H=W,M=J,U=X,R=Q,B=K,j=G,S=V;if(R instanceof I)if(B instanceof I)return new Z0(j,S,U);else{let O=B.head;if(O instanceof HZ){let L=O,D=B.tail,P=O.name,w=O.handler,q=F(L,j),A=kW(U,M,H,P,w);Z=Y,W=H,J=M,X=A,Q=R,K=D,G=q,V=S}else{let L=O,D=B.tail,P=F(L,j);Z=Y,W=H,J=M,X=U,Q=R,K=D,G=P,V=S}}else if(B instanceof I){let O=R.head;if(O instanceof HZ){let L=O,D=R.tail,P=O.name,w=F(L,S),q=L6(U,H,P);Z=Y,W=H,J=M,X=q,Q=D,K=B,G=j,V=w}else{let L=O,D=R.tail,P=F(L,S);Z=Y,W=H,J=M,X=U,Q=D,K=B,G=j,V=P}}else{let{head:O,tail:L}=R,D=B.head,P=B.tail,w=B6(O,D);if(w instanceof l)if(O instanceof HZ){let q=O.name,A=F(O,S),T=L6(U,H,q);Z=Y,W=H,J=M,X=T,Q=L,K=B,G=j,V=A}else{let q=F(O,S);Z=Y,W=H,J=M,X=U,Q=L,K=B,G=j,V=q}else if(w instanceof a)if(O instanceof hZ)if(D instanceof hZ){let q,A=D.name;if(A==="value")q=Y||O.value!==D.value;else if(A==="checked")q=Y||O.value!==D.value;else if(A==="selected")q=Y||O.value!==D.value;else q=O.value!==D.value;let T=q,E;if(T)E=F(D,j);else E=j;let y=E;Z=Y,W=H,J=M,X=U,Q=L,K=P,G=y,V=S}else if(D instanceof HZ){let{name:q,handler:A}=D,T=F(D,j),E=F(O,S),y=kW(U,M,H,q,A);Z=Y,W=H,J=M,X=y,Q=L,K=P,G=T,V=E}else{let q=F(D,j),A=F(O,S);Z=Y,W=H,J=M,X=U,Q=L,K=P,G=q,V=A}else if(O instanceof iW)if(D instanceof iW){let q,A=D.name;if(A==="scrollLeft")q=!0;else if(A==="scrollRight")q=!0;else if(A==="value")q=Y||!EZ(O.value,D.value);else if(A==="checked")q=Y||!EZ(O.value,D.value);else if(A==="selected")q=Y||!EZ(O.value,D.value);else q=!EZ(O.value,D.value);let T=q,E;if(T)E=F(D,j);else E=j;let y=E;Z=Y,W=H,J=M,X=U,Q=L,K=P,G=y,V=S}else if(D instanceof HZ){let{name:q,handler:A}=D,T=F(D,j),E=F(O,S),y=kW(U,M,H,q,A);Z=Y,W=H,J=M,X=y,Q=L,K=P,G=T,V=E}else{let q=F(D,j),A=F(O,S);Z=Y,W=H,J=M,X=U,Q=L,K=P,G=q,V=A}else if(D instanceof HZ){let{name:q,handler:A}=D,T=O.prevent_default.kind!==D.prevent_default.kind||O.stop_propagation.kind!==D.stop_propagation.kind||O.debounce!==D.debounce||O.throttle!==D.throttle,E;if(T)E=F(D,j);else E=j;let y=E,g=kW(U,M,H,q,A);Z=Y,W=H,J=M,X=g,Q=L,K=P,G=y,V=S}else{let q=O.name,A=F(D,j),T=F(O,S),E=L6(U,H,q);Z=Y,W=H,J=M,X=E,Q=L,K=P,G=A,V=T}else if(D instanceof HZ){let{name:q,handler:A}=D,T=F(D,j),E=kW(U,M,H,q,A);Z=Y,W=H,J=M,X=E,Q=R,K=P,G=T,V=S}else{let q=F(D,j);Z=Y,W=H,J=M,X=U,Q=R,K=P,G=q,V=S}}}}function uJ(Z,W,J,X,Q,K,G,V,Y,H,M,U,R,B){while(!0){let j=Z,S=W,O=J,L=X,D=Q,P=K,w=G,q=V,A=Y,T=H,E=M,y=U,g=R,c=B;if(j instanceof I)if(O instanceof I)return new b6(new X6(A,w,E,y),c);else{let FZ=S9(c,g,T,q,O),ZZ=vJ(O,q-P),p=F(ZZ,E);return new b6(new X6(A,w,p,y),FZ)}else if(O instanceof I){let{head:FZ,tail:ZZ}=j,p;if(FZ.key===""||!aW(D,FZ.key))p=w+1;else p=w;let h=p,v=uZ(c,T,q,FZ);Z=ZZ,W=S,J=O,X=L,Q=D,K=P,G=h,V=q,Y=A,H=T,M=E,U=y,R=g,B=v}else{let FZ=j.head,ZZ=O.head;if(FZ.key!==ZZ.key){let p=j.tail,d=O.tail,h=lW(S,ZZ.key);if(aW(L,FZ.key))if(h instanceof C){let b=h[0];if(aW(D,FZ.key))Z=p,W=S,J=O,X=L,Q=D,K=P-1,G=w,V=q,Y=A,H=T,M=E,U=y,R=g,B=c;else{let m=q-P,f=F(c9(ZZ.key,m),E),s=HW(D,ZZ.key,void 0),$=P+1;Z=F(b,j),W=S,J=O,X=L,Q=s,K=$,G=w,V=q,Y=A,H=T,M=f,U=y,R=g,B=c}}else{let b=q-P,_=cZ(c,g,T,q,ZZ),m=vJ(N([ZZ]),b),f=F(m,E);Z=j,W=S,J=d,X=L,Q=D,K=P+1,G=w,V=q+1,Y=A,H=T,M=f,U=y,R=g,B=_}else if(h instanceof C){let b=q-P,_=F(p9(b),E),m=uZ(c,T,q,FZ),f=P-1;Z=p,W=S,J=O,X=L,Q=D,K=f,G=w,V=q,Y=A,H=T,M=_,U=y,R=g,B=m}else{let b=UW(q-P,ZZ),_,f=uZ(c,T,q,FZ);_=cZ(f,g,T,q,ZZ);let s=_;Z=p,W=S,J=d,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=F(b,E),U=y,R=g,B=s}}else{let p=j.head;if(p instanceof TZ){let d=O.head;if(d instanceof TZ){let h=p,v=j.tail,b=d,_=O.tail,m=oZ(g,b.mapper),f=SZ(T,q,b.key),s=uJ(h.children,h.keyed_children,b.children,b.keyed_children,zZ(),0,0,0,q,f,x,x,m,c),$,i=s.patch;if(i.changes instanceof I)if(i.children instanceof I)if(i.removed===0)$=y;else $=F(s.patch,y);else $=F(s.patch,y);else $=F(s.patch,y);let kZ=$;Z=v,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=E,U=kZ,R=g,B=s.events}else{let h=p,v=j.tail,b=d,_=O.tail,m=UW(q-P,b),f,$=uZ(c,T,q,h);f=cZ($,g,T,q,b);let i=f;Z=v,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=F(m,E),U=y,R=g,B=i}}else if(p instanceof LZ){let d=O.head;if(d instanceof LZ){let h=p,v=d;if(h.namespace===v.namespace&&h.tag===v.tag){let b=j.tail,_=O.tail,m=oZ(g,v.mapper),f=SZ(T,q,v.key),s=qQ(c,v.namespace,v.tag,f),$=e9(s,f,m,c,h.attributes,v.attributes,x,x),i,_Z,kZ;i=$.added,_Z=$.removed,kZ=$.events;let eZ;if(i instanceof I&&_Z instanceof I)eZ=x;else eZ=N([_J(i,_Z)]);let IW=eZ,NW=uJ(h.children,h.keyed_children,v.children,v.keyed_children,zZ(),0,0,0,q,f,IW,x,m,kZ),sZ,ZW=NW.patch;if(ZW.changes instanceof I)if(ZW.children instanceof I)if(ZW.removed===0)sZ=y;else sZ=F(NW.patch,y);else sZ=F(NW.patch,y);else sZ=F(NW.patch,y);let x0=sZ;Z=b,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=E,U=x0,R=g,B=NW.events}else{let b=p,_=j.tail,m=d,f=O.tail,s=UW(q-P,m),$,_Z=uZ(c,T,q,b);$=cZ(_Z,g,T,q,m);let kZ=$;Z=_,W=S,J=f,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=F(s,E),U=y,R=g,B=kZ}}else{let h=p,v=j.tail,b=d,_=O.tail,m=UW(q-P,b),f,$=uZ(c,T,q,h);f=cZ($,g,T,q,b);let i=f;Z=v,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=F(m,E),U=y,R=g,B=i}}else if(p instanceof CZ){let d=O.head;if(d instanceof CZ){let h=p,v=d;if(h.content===v.content){let b=j.tail,_=O.tail;Z=b,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=E,U=y,R=g,B=c}else{let b=j.tail,_=d,m=O.tail,f=hJ(q,0,N([$9(_.content)]),x);Z=b,W=S,J=m,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=E,U=F(f,y),R=g,B=c}}else{let h=p,v=j.tail,b=d,_=O.tail,m=UW(q-P,b),f,$=uZ(c,T,q,h);f=cZ($,g,T,q,b);let i=f;Z=v,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=F(m,E),U=y,R=g,B=i}}else{let d=O.head;if(d instanceof EW){let h=p,v=j.tail,b=d,_=O.tail,m=oZ(g,b.mapper),f=SZ(T,q,b.key),s=e9(!1,f,m,c,h.attributes,b.attributes,x,x),$,i,_Z;$=s.added,i=s.removed,_Z=s.events;let kZ;if($ instanceof I&&i instanceof I)kZ=x;else kZ=N([_J($,i)]);let eZ=kZ,IW;if(h.inner_html===b.inner_html)IW=eZ;else IW=F(u9(b.inner_html),eZ);let sZ=IW,ZW;if(sZ instanceof I)ZW=y;else ZW=F(hJ(q,0,sZ,N([])),y);let Q8=ZW;Z=v,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=E,U=Q8,R=g,B=_Z}else{let h=p,v=j.tail,b=d,_=O.tail,m=UW(q-P,b),f,$=uZ(c,T,q,h);f=cZ($,g,T,q,b);let i=f;Z=v,W=S,J=_,X=L,Q=D,K=P,G=w,V=q+1,Y=A,H=T,M=F(m,E),U=y,R=g,B=i}}}}}}function bW(Z,W,J){return uJ(N([W]),zZ(),N([J]),zZ(),zZ(),0,0,0,0,T6,x,x,n,O9(Z))}var{setTimeout:zQ,clearTimeout:cJ}=globalThis,RQ=(Z,W)=>DZ().createElementNS(Z,W),IQ=(Z)=>DZ().createTextNode(Z),NQ=()=>DZ().createDocumentFragment(),gW=(Z,W,J)=>Z.insertBefore(W,J),J0=s8?(Z,W,J)=>Z.moveBefore(W,J):gW,OQ=(Z,W)=>Z.removeChild(W),jQ=(Z,W)=>Z.getAttribute(W),X0=(Z,W,J)=>Z.setAttribute(W,J),DQ=(Z,W)=>Z.removeAttribute(W),BQ=(Z,W,J,X)=>Z.addEventListener(W,J,X),Q0=(Z,W,J)=>Z.removeEventListener(W,J),AQ=(Z,W)=>Z.innerHTML=W,PQ=(Z,W)=>Z.data=W,pZ=Symbol("lustre");class V0{constructor(Z,W,J,X){this.kind=Z,this.key=X,this.parent=W,this.children=[],this.node=J,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===wZ?this.node.parentNode:this.node}}var dZ=(Z,W,J,X,Q)=>{let K=new V0(Z,W,J,Q);return J[pZ]=K,W?.children.splice(X,0,K),K},SQ=(Z)=>{let W="";for(let J=Z[pZ];J.parent;J=J.parent)if(J.key)W=`${tW}${J.key}${W}`;else{let X=J.parent.children.indexOf(J);W=`${tW}${X}${W}`}return W.slice(1)};class dJ{#Z=null;#Q;#J;#X=!1;constructor(Z,W,J,{exposeKeys:X=!1}={}){this.#Z=Z,this.#Q=W,this.#J=J,this.#X=X}mount(Z){dZ(MW,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[pZ],0,Z)}push(Z){this.#W.push({node:this.#Z[pZ],patch:Z}),this.#K()}#W=[];#K(){let Z=this.#W;while(Z.length){let{node:W,patch:J}=Z.pop(),{children:X}=W,{changes:Q,removed:K,children:G}=J;if(qW(Q,(V)=>this.#G(W,V)),K)this.#U(W,X.length-K,K);qW(G,(V)=>{let Y=X[V.index|0];this.#W.push({node:Y,patch:V})})}}#G(Z,W){switch(W.kind){case EJ:this.#P(Z,W);break;case xJ:this.#j(Z,W);break;case kJ:this.#z(Z,W);break;case yJ:this.#M(Z,W);break;case bJ:this.#I(Z,W);break;case gJ:this.#F(Z,W);break;case fJ:this.#Y(Z,W);break}}#Y(Z,{children:W,before:J}){let X=NQ(),Q=this.#H(Z,J);this.#N(X,null,Z,J|0,W),gW(Z.parentNode,X,Q)}#F(Z,{index:W,with:J}){this.#U(Z,W|0,1);let X=this.#H(Z,W);this.#O(Z.parentNode,X,Z,W|0,J)}#H(Z,W){W=W|0;let{children:J}=Z,X=J.length;if(W<X)return J[W].node;let Q=J[X-1];if(!Q&&Z.kind!==wZ)return null;if(!Q)Q=Z;while(Q.kind===wZ&&Q.children.length)Q=Q.children[Q.children.length-1];return Q.node.nextSibling}#M(Z,{key:W,before:J}){J=J|0;let{children:X,parentNode:Q}=Z,K=X[J].node,G=X[J];for(let M=J+1;M<X.length;++M){let U=X[M];if(X[M]=G,G=U,U.key===W){X[J]=U;break}}let{kind:V,node:Y,children:H}=G;if(J0(Q,Y,K),V===wZ)this.#V(Q,H,K)}#V(Z,W,J){for(let X=0;X<W.length;++X){let{kind:Q,node:K,children:G}=W[X];if(J0(Z,K,J),Q===wZ)this.#V(Z,G,J)}}#I(Z,{index:W}){this.#U(Z,W,1)}#U(Z,W,J){let{children:X,parentNode:Q}=Z,K=X.splice(W,J);for(let G=0;G<K.length;++G){let{kind:V,node:Y,children:H}=K[G];if(OQ(Q,Y),this.#q(K[G]),V===wZ)K.push(...H)}}#q(Z){let{debouncers:W,children:J}=Z;for(let{timeout:X}of W.values())if(X)cJ(X);W.clear(),qW(J,(X)=>this.#q(X))}#z({node:Z,handlers:W,throttles:J,debouncers:X},{added:Q,removed:K}){qW(K,({name:G})=>{if(W.delete(G))Q0(Z,G,pJ),this.#R(J,G,0),this.#R(X,G,0);else DQ(Z,G),G0[G]?.removed?.(Z,G)}),qW(Q,(G)=>this.#A(Z,G))}#P({node:Z},{content:W}){PQ(Z,W??"")}#j({node:Z},{inner_html:W}){AQ(Z,W??"")}#N(Z,W,J,X,Q){qW(Q,(K)=>this.#O(Z,W,J,X++,K))}#O(Z,W,J,X,Q){switch(Q.kind){case MW:{let K=this.#D(J,X,Q);this.#N(K,null,K[pZ],0,Q.children),gW(Z,K,W);break}case xW:{let K=this.#B(J,X,Q);gW(Z,K,W);break}case wZ:{let K=this.#B(J,X,Q);gW(Z,K,W),this.#N(Z,W,K[pZ],0,Q.children);break}case q9:{let K=this.#D(J,X,Q);this.#j({node:K},Q),gW(Z,K,W);break}}}#D(Z,W,{kind:J,key:X,tag:Q,namespace:K,attributes:G}){let V=RQ(K||O6,Q);if(dZ(J,Z,V,W,X),this.#X&&X)X0(V,"data-lustre-key",X);return qW(G,(Y)=>this.#A(V,Y)),V}#B(Z,W,{kind:J,key:X,content:Q}){let K=IQ(Q??"");return dZ(J,Z,K,W,X),K}#A(Z,W){let{debouncers:J,handlers:X,throttles:Q}=Z[pZ],{kind:K,name:G,value:V,prevent_default:Y,debounce:H,throttle:M}=W;switch(K){case GJ:{let U=V??"";if(G==="virtual:defaultValue"){Z.defaultValue=U;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(U!==jQ(Z,G))X0(Z,G,U);G0[G]?.added?.(Z,U);break}case VJ:Z[G]=V;break;case YJ:{if(X.has(G))Q0(Z,G,pJ);let U=Y.kind===HJ;BQ(Z,G,pJ,{passive:U}),this.#R(Q,G,M),this.#R(J,G,H),X.set(G,(R)=>this.#S(W,R));break}}}#R(Z,W,J){let X=Z.get(W);if(J>0)if(X)X.delay=J;else Z.set(W,{delay:J});else if(X){let{timeout:Q}=X;if(Q)cJ(Q);Z.delete(W)}}#S(Z,W){let{currentTarget:J,type:X}=W,{debouncers:Q,throttles:K}=J[pZ],G=SQ(J),{prevent_default:V,stop_propagation:Y,include:H}=Z;if(V.kind===FJ)W.preventDefault();if(Y.kind===FJ)W.stopPropagation();if(X==="submit")W.detail??={},W.detail.formData=[...new FormData(W.target,W.submitter).entries()];let M=this.#Q(W,G,X,H),U=K.get(X);if(U){let B=Date.now(),j=U.last||0;if(B>j+U.delay)U.last=B,U.lastEvent=W,this.#J(W,M)}let R=Q.get(X);if(R)cJ(R.timeout),R.timeout=zQ(()=>{if(W===K.get(X)?.lastEvent)return;this.#J(W,M)},R.delay);if(!U&&!R)this.#J(W,M)}}var qW=(Z,W)=>{if(Array.isArray(Z))for(let J=0;J<Z.length;J++)W(Z[J]);else if(Z)for(Z;Z.head;Z=Z.tail)W(Z.head)},pJ=(Z)=>{let{currentTarget:W,type:J}=Z;W[pZ].handlers.get(J)(Z)},K0=(Z)=>{return{added(W){W[Z]=!0},removed(W){W[Z]=!1}}},TQ=(Z)=>{return{added(W,J){W[Z]=J}}},G0={checked:K0("checked"),selected:K0("selected"),value:TQ("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(W){console.error(W)}}}};function LQ(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return[Q,u(K)];else{let G=X.tail,V=X.head[0],Y=X.head[1],H=z9(V,Y),M;if(V==="")M=Q;else M=HW(Q,V,H);let U=M,R=F(H,K);Z=G,W=U,J=R}}}function sJ(Z){return LQ(Z,zZ(),x)}function Y0(Z,W,J){let X=sJ(J),Q,K;return Q=X[0],K=X[1],Z6("",n,"",Z,W,K,Q,!1,eW(Z,""))}function H0(Z,W,J,X){let Q=sJ(X),K,G;return K=Q[0],G=Q[1],Z6("",n,Z,W,J,G,K,!1,eW(W,Z))}function M0(Z){let W=sJ(Z),J,X;return J=W[0],X=W[1],NJ("",n,X,J)}var F0=(Z)=>{let W=dZ(MW,null,Z,0,null),J=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(U0(G))J+=1;if(J===0){let G=DZ().createTextNode("");return dZ(xW,W,G,0,null),Z.replaceChildren(G),T9()}if(J===1)return rJ(W,Z).head[1];let X=DZ().createTextNode(""),Q=dZ(wZ,W,X,0,null),K=rJ(Q,Z);return Z.insertBefore(X,Z.firstChild),M0(K)},U0=(Z)=>{switch(Z.nodeType){case j6:return!0;case QJ:return!!Z.data;default:return!1}},CQ=(Z,W,J,X)=>{if(!U0(W))return null;switch(W.nodeType){case j6:{let Q=dZ(MW,Z,W,X,J),K=W.localName,G=W.namespaceURI,V=!G||G===O6;if(V&&wQ.includes(K))EQ(K,W);let Y=xQ(W),H=rJ(Q,W);return V?Y0(K,Y,H):H0(G,K,Y,H)}case QJ:return dZ(xW,Z,W,X,null),W6(W.data);default:return null}},wQ=["input","select","textarea"],EQ=(Z,W)=>{let{value:J,checked:X}=W;if(Z==="input"&&W.type==="checkbox"&&!X)return;if(Z==="input"&&W.type==="radio"&&!X)return;if(W.type!=="checkbox"&&W.type!=="radio"&&!J)return;queueMicrotask(()=>{if(W.value=J,W.checked=X,W.dispatchEvent(new Event("input",{bubbles:!0})),W.dispatchEvent(new Event("change",{bubbles:!0})),DZ().activeElement!==W)W.dispatchEvent(new Event("blur",{bubbles:!0}))})},rJ=(Z,W)=>{let J=null,X=W.firstChild,Q=null,K=0;while(X){let G=X.nodeType===j6?X.getAttribute("data-lustre-key"):null;if(G!=null)X.removeAttribute("data-lustre-key");let V=CQ(Z,X,G,K),Y=X.nextSibling;if(V){let H=new BZ([G??"",V],null);if(Q)Q=Q.tail=H;else Q=J=H;K+=1}else W.removeChild(X);X=Y}if(!Q)return x;return Q.tail=x,J},xQ=(Z)=>{let W=Z.attributes.length,J=x;while(W-- >0){let X=Z.attributes[W];if(X.name==="xmlns")continue;J=new BZ(kQ(X),J)}return J},kQ=(Z)=>{let{localName:W,value:J}=Z;return aZ(W,J)};var Q6=()=>!!DZ();class g6{constructor(Z,[W,J],X,Q){this.root=Z,this.#Z=W,this.#Q=X,this.#J=Q,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#G.has(V.context))return;V.stopImmediatePropagation();let Y=this.#G.get(V.context);if(V.subscribe){let H=()=>{Y.subscribers=Y.subscribers.filter((M)=>M!==V.callback)};Y.subscribers.push([V.callback,H]),V.callback(Y.value,H)}else V.callback(Y.value)});let K=(V,Y,H)=>SJ(this.#W,Y,H,V),G=(V,Y)=>{let[H,M]=TJ(this.#W,Y);if(this.#W=H,M.isOk()){let U=M[0];if(U.stop_propagation)V.stopPropagation();if(U.prevent_default)V.preventDefault();this.dispatch(U.message,!1)}};this.#K=new dJ(this.root,K,G),this.#X=F0(this.root),this.#W=PJ(),this.#q(J),this.#z()}root=null;dispatch(Z,W=!1){if(this.#Y)this.#F.push(Z);else{let[J,X]=this.#J(this.#Z,Z);this.#Z=J,this.#U(X,W)}}emit(Z,W){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:W,bubbles:!0,composed:!0}))}provide(Z,W){if(!this.#G.has(Z))this.#G.set(Z,{value:W,subscribers:[]});else{let J=this.#G.get(Z);if(EZ(J.value,W))return;J.value=W;for(let X=J.subscribers.length-1;X>=0;X--){let[Q,K]=J.subscribers[X];if(!Q){J.subscribers.splice(X,1);continue}Q(W,K)}}}#Z;#Q;#J;#X;#W;#K;#G=new Map;#Y=!1;#F=[];#H=x;#M=x;#V=null;#I={dispatch:(Z)=>this.dispatch(Z),emit:(Z,W)=>this.emit(Z,W),select:()=>{},root:()=>this.root,provide:(Z,W)=>this.provide(Z,W)};#U(Z,W=!1){if(this.#q(Z),!this.#V)if(W)this.#V="sync",queueMicrotask(()=>this.#z());else this.#V=requestAnimationFrame(()=>this.#z())}#q(Z){this.#Y=!0;while(!0){for(let J=Z.synchronous;J.tail;J=J.tail)J.head(this.#I);if(this.#H=z0(this.#H,Z.before_paint),this.#M=z0(this.#M,Z.after_paint),!this.#F.length)break;let W=this.#F.shift();[this.#Z,Z]=this.#J(this.#Z,W)}this.#Y=!1}#z(){this.#V=null;let Z=this.#Q(this.#Z),{patch:W,events:J}=bW(this.#W,this.#X,Z);if(this.#W=J,this.#X=Z,this.#K.push(W),this.#H instanceof BZ){let X=q0(this.#H);this.#H=x,queueMicrotask(()=>{this.#U(X,!0)})}if(this.#M instanceof BZ){let X=q0(this.#M);this.#M=x,requestAnimationFrame(()=>{this.#U(X,!0)})}}}function q0(Z){return{synchronous:Z,after_paint:x,before_paint:x}}function z0(Z,W){if(Z instanceof I)return W;else if(W instanceof I)return Z;else return nZ(Z,W)}class nJ extends z{constructor(Z){super();this.message=Z}}class lJ extends z{constructor(Z){super();this.callback=Z}}class aJ extends z{constructor(Z){super();this.callback=Z}}class tZ extends z{constructor(Z){super();this.message=Z}}class zW extends z{constructor(Z,W){super();this.name=Z,this.data=W}}class f6 extends z{constructor(Z,W){super();this.key=Z,this.value=W}}class RW extends z{}class I0 extends z{constructor(Z,W,J,X,Q,K,G,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=W,this.delegates_focus=J,this.attributes=X,this.properties=Q,this.contexts=K,this.is_form_associated=G,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function N0(Z){let W=new I0(!0,!0,!1,x,x,x,!1,D6,D6,D6);return o(Z,W,(J,X)=>{return X.apply(J)})}class j0{#Z;constructor(Z,[W,J],X,Q){this.#Z=new g6(Z,[W,J],Q,X)}send(Z){switch(Z.constructor){case tZ:{this.dispatch(Z.message,!1);break}case zW:{this.emit(Z.name,Z.data);break}case RW:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,W){this.#Z.emit(Z,W)}}var D0=({init:Z,update:W,view:J},X,Q)=>{if(!Q6())return new k(new K6);let K=X instanceof HTMLElement?X:DZ().querySelector(X);if(!K)return new k(new oJ(X));return new C(new j0(K,Z(Q),W,J))};class yQ{#Z;#Q;#J;#X;#W;#K;#G=OZ();#Y=new Set;constructor([Z,W],J,X,Q){this.#Z=Z,this.#Q=J,this.#J=X,this.#X=Q,this.#W=this.#J(this.#Z),this.#K=P9(this.#W),this.#V(W)}send(Z){switch(Z.constructor){case nJ:{let{message:W}=Z,J=this.#F(W),X=bW(this.#K,this.#W,J);this.#W=J,this.#K=X.events,this.broadcast($J(X.patch));return}case lJ:{let{callback:W}=Z;this.#Y.add(W),W(l9(this.#X.open_shadow_root,this.#X.adopt_styles,dW(this.#X.attributes),dW(this.#X.properties),dW(this.#X.contexts),this.#G,this.#W));return}case aJ:{let{callback:W}=Z;this.#Y.delete(W);return}case tZ:{let{message:W}=Z,[J,X]=this.#Q(this.#Z,W),Q=this.#J(J),K=bW(this.#K,this.#W,Q);this.#V(X),this.#Z=J,this.#W=Q,this.#K=K.events,this.broadcast($J(K.patch));return}case zW:{let{name:W,data:J}=Z;this.broadcast(a9(W,J));return}case f6:{let{key:W,value:J}=Z,X=WZ(this.#G,W);if(X.isOk()&&EZ(X[0],J))return;this.#G=jZ(this.#G,W,J),this.broadcast(o9(W,J));return}case RW:{this.#Z=null,this.#Q=null,this.#J=null,this.#X=null,this.#W=null,this.#K=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let W of this.#Y)W(Z)}#F(Z){switch(Z.constructor){case E6:{let{messages:W}=Z,J=this.#Z,X=CW();for(let Q=W;Q.head;Q=Q.tail){let K=this.#F(Q.head);if(K instanceof C){J=K[0][0],X=Y9(YZ.fromArray([X,K[0][1]]));break}}return this.#V(X),this.#Z=J,this.#J(this.#Z)}case x6:{let{name:W,value:J}=Z,X=this.#H(W,J);if(X instanceof k)return this.#W;else{let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}case k6:{let{name:W,value:J}=Z,X=this.#M(W,J);if(X instanceof k)return this.#W;else{let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}case y6:{let{path:W,name:J,event:X}=Z,[Q,K]=LJ(this.#K,W,J,X);if(this.#K=Q,K instanceof k)return this.#W;else{let[G,V]=this.#Q(this.#Z,K[0].message);return this.#V(V),this.#Z=G,this.#J(this.#Z)}}case mJ:{let{key:W,value:J}=Z,X=WZ(this.#X.contexts,W);if(X instanceof k)return this.#W;if(X=lZ(J,X[0]),X instanceof k)return this.#W;let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}}#H(Z,W){let J=WZ(this.#X.attributes,Z);switch(J.constructor){case C:return J[0](W);case k:return new k(void 0)}}#M(Z,W){let J=WZ(this.#X.properties,Z);switch(J.constructor){case C:return J[0](W);case k:return new k(void 0)}}#V(Z){let W=(G)=>this.send(new tZ(G)),J=(G,V)=>this.send(new zW(G,V)),X=()=>{return},Q=()=>{return},K=(G,V)=>this.send(new f6(G,V));globalThis.queueMicrotask(()=>{G9(Z,W,J,X,Q,K)})}}class B0 extends z{constructor(Z,W,J,X){super();this.init=Z,this.update=W,this.view=J,this.config=X}}class oJ extends z{constructor(Z){super();this.selector=Z}}class K6 extends z{}function A0(Z,W,J){return new B0(Z,W,J,N0(x))}function P0(Z,W,J){return p8(!Q6(),new k(new K6),()=>{return D0(Z,W,J)})}function S0(Z,W){return Z9(Z,cW(W,(J)=>{return new nW(!1,!1,J)}),x,MJ,MJ,0,0)}function tJ(Z){return S0("click",z6(Z))}function T0(Z){return S0("input",x8(N(["target","value"]),q6,(W)=>{return z6(Z(W))}))}function L0(Z,W){window.setTimeout(W,Z)}var hQ="src\\tachyon.gleam";class MZ extends z{constructor(Z){super();this[0]=Z}}class V6 extends z{constructor(Z){super();this[0]=Z}}class eJ extends z{constructor(Z,W,J,X,Q,K){super();this.in=Z,this.curr_b=W,this.lines_todo=J,this.lines_done=X,this.on_index=Q,this.count=K}}class Y6 extends z{constructor(Z,W){super();this.millisec=Z,this.index=W}}class Z8 extends z{constructor(Z){super();this[0]=Z}}class C0 extends z{constructor(Z){super();this[0]=Z}}class W8 extends z{constructor(Z){super();this[0]=Z}}class J8 extends z{constructor(Z){super();this[0]=Z}}class X8 extends z{}class w0 extends z{}var _Q=`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;function G6(Z){return V9((W)=>{return L0(Z.millisec,()=>{return W(new W8(Z))})})}function h6(Z,W,J){return new eJ(Z,J,(()=>{return T8(Z,`
`)})(),N([]),W,0)}function vQ(Z){let W=0,J=h6(Z,W,new MZ(YW())),X=rZ(3000,$W(J.lines_todo));return[J,G6(new Y6(X,W))]}function mQ(Z,W){if(W instanceof MZ){let J=W[0],X=o((()=>{return GW(Z)})(),[YW(),0,0],(Q,K)=>{let G=Q[1]+1,V=Q[0],Y=Q[2],H;if((()=>{return JJ(J,G)})())if(K==="^")H=[(()=>{let S=$8(V,G),O=PW(S,G+1);return PW(O,G-1)})(),Y+1];else if(K===".")H=[(()=>{return PW(V,G)})(),Y];else H=[V,Y];else{let j;if(K==="S")j=PW(V,G);else if(K==="s")j=PW(V,G);else j=V;H=[j,Y]}let U=H,R,B;return R=U[0],B=U[1],[R,G,B]});return[new MZ(X[0]),new Z8(X[2])]}else{let J=W[0],X=o((()=>{return GW(Z)})(),[OZ(),0],(K,G)=>{let V=K[1]+1,Y=K[0],H,M=(()=>{return WZ(J,V)})();if(M instanceof C){let R=M[0];if(G==="^"){let B=V-1,j,S=(()=>{return WZ(Y,B)})();if(S instanceof C)j=S[0]+R;else j=R;let O=j,L=V+1,D,P=(()=>{return WZ(Y,L)})();if(P instanceof C)D=P[0]+R;else D=R;let w=D,A=jZ(Y,B,O),T=jZ(A,L,w);H=R6(T,V)}else if(G==="."){let B,j=(()=>{return WZ(Y,V)})();if(j instanceof C)B=j[0]+R;else B=R;H=jZ(Y,V,B)}else H=Y}else if(G==="S")H=jZ(Y,V,1);else if(G==="s")H=jZ(Y,V,1);else H=Y;return[H,V]}),Q=pW(X[0],0,(K,G,V)=>{return K+V});return[new V6(X[0]),new C0(Q)]}}function $Q(Z,W){if(W instanceof W8){let J=W[0];if(J.index===Z.on_index){let Q=Z.lines_todo;if(Q instanceof I)return[Z,CW()];else{let{head:K,tail:G}=Q,V=mQ(K,Z.curr_b),Y,H;Y=V[0],H=V[1];let M;if(H instanceof Z8){let P=H[0];M=Z.count+P}else M=H[0];let U=M,R=o((()=>{return GW(K)})(),[N([]),0],(P,w)=>{let q=P[1]+1,A;if(w==="S")A=JZ("S");else if(w==="s")A=JZ("s");else if(Y instanceof MZ){let E=Y[0];if((()=>{return JJ(E,q)})())A=JZ("|");else A=JZ(w)}else{let E=Y[0],y=(()=>{return WZ(E,q)})();if(y instanceof C){let g=y[0],c,FZ=191-rZ(191*g,U);c=O8(FZ);let ZZ=c;A=x9(N([t("color","#"+ZZ+ZZ+ZZ)]),N([JZ("|")]))}else A=JZ(w)}return[F(A,P[0]),q]})[0],B,j=F(JZ(`
`),R);B=u(j);let S=B,O,L=Z.lines_done;O=nZ(L,S);let D=O;return[new eJ(Z.in,Y,G,D,Z.on_index,U),G6(J)]}}else return[Z,CW()]}else if(W instanceof J8){let J=W[0],X=Z.on_index+1,Q=h6(J,X,(()=>{if(Z.curr_b instanceof MZ)return new MZ(YW());else return new V6(OZ())})()),K=rZ(3000,$W(Q.lines_todo));return[Q,G6(new Y6(K,X))]}else if(W instanceof X8){let J=Z.on_index+1,X=h6(Z.in,J,(()=>{if(Z.curr_b instanceof MZ)return new V6(OZ());else return new MZ(YW())})()),Q=rZ(3000,$W(X.lines_todo));return[X,G6(new Y6(Q,J))]}else{let J=Z.on_index+1,X=h6(Z.in,J,(()=>{if(Z.curr_b instanceof MZ)return new MZ(YW());else return new V6(OZ())})()),Q=rZ(3000,$W(X.lines_todo));return[X,G6(new Y6(Q,J))]}}function uQ(Z){return L9(N([t("display","flex"),t("flex-direction","column"),t("gap","5px")]),N([C9(N([]),N([w6(N([A6("/")]),N([JZ("Correct Arity")]))])),w9(N([]),N([w6(N([A6("https://adventofcode.com/2025/day/7")]),N([JZ("Advent of Code day 7")])),JZ(" visualization: (quantum) tachyon manifold particle splitting "),w6(N([A6("https://github.com/D-matz/day25tachyon/blob/main/src/tachyon.gleam")]),N([JZ("(source)")]))])),CJ(N([]),N([wJ(N([tJ(new X8),t("width","115px"),t("padding","3px")]),N([JZ((()=>{if(Z.curr_b instanceof MZ)return"Enable Quantum";else return"Disable Quantum"})())])),wJ(N([tJ(new w0),t("width","fit-content"),t("margin","5px"),t("padding","3px")]),N([JZ("Replay")])),JZ((()=>{if(Z.curr_b instanceof MZ)return"split count: ";else return"timeline count: "})()+(()=>{let W=Z.count;return vZ(W)})())])),CJ(N([t("display","flex"),t("flex-wrap","wrap"),t("gap","8px"),t("align-items","flex-start")]),N([k9(N([X9("input"),t("height","260px"),t("width","130px"),T0((W)=>{return new J8(W)})]),Z.in),E9(N([t("margin-top","0px"),(()=>{if(Z.curr_b instanceof MZ)return t("border","1px solid #2f2f2f");else return Q9(N([["border","1px solid #a6f0fc"],["box-shadow","0 0 50px #a6f0fc"]]))})()]),(()=>{let W=Z.lines_done;return nZ(W,N([JZ((()=>{let J=Z.lines_todo;return U6(J,`
`)})())]))})())]))]))}function E0(){let Z=A0(vQ,$Q,uQ),W=P0(Z,"#app",_Q);if(!(W instanceof C))throw m6("let_assert",hQ,"tachyon",19,"main","Pattern match failed, no pattern matched the value.",{value:W,start:514,end:570,pattern_start:525,pattern_end:530});return}E0();
