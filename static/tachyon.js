class z{withFields(Z){let W=Object.keys(this).map((J)=>(J in Z)?Z[J]:this[J]);return new this.constructor(...W)}}class GZ{static fromArray(Z,W){let J=W||new I;for(let X=Z.length-1;X>=0;--X)J=new DZ(Z[X],J);return J}[Symbol.iterator](){return new Y8(this)}toArray(){return[...this]}atLeastLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return W!==void 0}hasLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return Z===-1&&W instanceof I}countLength(){let Z=this,W=0;while(Z)Z=Z.tail,W++;return W-1}}function U(Z,W){return new DZ(Z,W)}function O(Z,W){return GZ.fromArray(Z,W)}class Y8{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof I)return{done:!0};else{let{head:Z,tail:W}=this.#Z;return this.#Z=W,{value:Z,done:!1}}}}class I extends GZ{}class DZ extends GZ{constructor(Z,W){super();this.head=Z,this.tail=W}}class hW{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,W,J){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=W??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=J??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return fW(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let W=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let X=0;X<W;X++)if(this.rawBuffer[X]!==Z.rawBuffer[X])return!1;let J=this.bitSize%8;if(J){let X=8-J;if(this.rawBuffer[W]>>X!==Z.rawBuffer[W]>>X)return!1}}else{for(let X=0;X<W;X++){let Q=fW(this.rawBuffer,this.bitOffset,X),K=fW(Z.rawBuffer,Z.bitOffset,X);if(Q!==K)return!1}let J=this.bitSize%8;if(J){let X=fW(this.rawBuffer,this.bitOffset,W),Q=fW(Z.rawBuffer,Z.bitOffset,W),K=8-J;if(X>>K!==Q>>K)return!1}}return!0}get buffer(){if(G8("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(G8("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function fW(Z,W,J){if(W===0)return Z[J]??0;else{let X=Z[J]<<W&255,Q=Z[J+1]>>8-W;return X|Q}}class _6{constructor(Z){this.value=Z}}var K8={};function G8(Z,W){if(K8[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${W}.`),K8[Z]=!0}class OW extends z{static isResult(Z){return Z instanceof OW}}class C extends OW{constructor(Z){super();this[0]=Z}isOk(){return!0}}class k extends OW{constructor(Z){super();this[0]=Z}isOk(){return!1}}function e(Z,W){let J=[Z,W];while(J.length){let X=J.pop(),Q=J.pop();if(X===Q)continue;if(!V8(X)||!V8(Q))return!1;if(!f0(X,Q)||E0(X,Q)||x0(X,Q)||k0(X,Q)||y0(X,Q)||b0(X,Q)||g0(X,Q))return!1;let G=Object.getPrototypeOf(X);if(G!==null&&typeof G.equals==="function")try{if(X.equals(Q))continue;else return!1}catch{}let[V,Y]=w0(X),H=V(X),M=V(Q);if(H.length!==M.length)return!1;for(let F of H)J.push(Y(X,F),Y(Q,F))}return!0}function w0(Z){if(Z instanceof Map)return[(W)=>W.keys(),(W,J)=>W.get(J)];else{let W=Z instanceof globalThis.Error?["message"]:[];return[(J)=>[...W,...Object.keys(J)],(J,X)=>J[X]]}}function E0(Z,W){return Z instanceof Date&&(Z>W||Z<W)}function x0(Z,W){return!(Z instanceof hW)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===W.byteLength&&Z.every((J,X)=>J===W[X]))}function k0(Z,W){return Array.isArray(Z)&&Z.length!==W.length}function y0(Z,W){return Z instanceof Map&&Z.size!==W.size}function b0(Z,W){return Z instanceof Set&&(Z.size!=W.size||[...Z].some((J)=>!W.has(J)))}function g0(Z,W){return Z instanceof RegExp&&(Z.source!==W.source||Z.flags!==W.flags)}function V8(Z){return typeof Z==="object"&&Z!==null}function f0(Z,W){if(typeof Z!=="object"&&typeof W!=="object"&&(!Z||!W))return!1;if([Promise,WeakSet,WeakMap,Function].some((X)=>Z instanceof X))return!1;return Z.constructor===W.constructor}function ZW(Z,W){return Math.trunc(v6(Z,W))}function v6(Z,W){if(W===0)return 0;else return Z/W}function m6(Z,W,J,X,Q,K,G){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=W,V.module=J,V.line=X,V.function=Q,V.fn=Q;for(let Y in G)V[Y]=G[Y];return V}class WZ extends z{constructor(Z){super();this[0]=Z}}class HZ extends z{}var H8=new WeakMap,$6=new DataView(new ArrayBuffer(8)),u6=0;function c6(Z){let W=H8.get(Z);if(W!==void 0)return W;let J=u6++;if(u6===2147483647)u6=0;return H8.set(Z,J),J}function p6(Z,W){return Z^W+2654435769+(Z<<6)+(Z>>2)|0}function s6(Z){let W=0,J=Z.length;for(let X=0;X<J;X++)W=Math.imul(31,W)+Z.charCodeAt(X)|0;return W}function F8(Z){$6.setFloat64(0,Z);let W=$6.getInt32(0),J=$6.getInt32(4);return Math.imul(73244475,W>>16^W)^J}function h0(Z){return s6(Z.toString())}function _0(Z){let W=Object.getPrototypeOf(Z);if(W!==null&&typeof W.hashCode==="function")try{let X=Z.hashCode(Z);if(typeof X==="number")return X}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return c6(Z);if(Z instanceof Date)return F8(Z.getTime());let J=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let X=0;X<Z.length;X++)J=Math.imul(31,J)+qZ(Z[X])|0;else if(Z instanceof Set)Z.forEach((X)=>{J=J+qZ(X)|0});else if(Z instanceof Map)Z.forEach((X,Q)=>{J=J+p6(qZ(X),qZ(Q))|0});else{let X=Object.keys(Z);for(let Q=0;Q<X.length;Q++){let K=X[Q],G=Z[K];J=J+p6(qZ(G),s6(K))|0}}return J}function qZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return F8(Z);case"string":return s6(Z);case"bigint":return h0(Z);case"object":return _0(Z);case"symbol":return c6(Z);case"function":return c6(Z);default:return 0}}var kZ=5,r6=Math.pow(2,kZ),v0=r6-1,m0=r6/2,$0=r6/4,XZ=0,xZ=1,MZ=2,JW=3,i6={type:MZ,bitmap:0,array:[]};function _W(Z,W){return Z>>>W&v0}function M6(Z,W){return 1<<_W(Z,W)}function u0(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function n6(Z,W){return u0(Z&W-1)}function zZ(Z,W,J){let X=Z.length,Q=Array(X);for(let K=0;K<X;++K)Q[K]=Z[K];return Q[W]=J,Q}function c0(Z,W,J){let X=Z.length,Q=Array(X+1),K=0,G=0;while(K<W)Q[G++]=Z[K++];Q[G++]=J;while(K<X)Q[G++]=Z[K++];return Q}function d6(Z,W){let J=Z.length,X=Array(J-1),Q=0,K=0;while(Q<W)X[K++]=Z[Q++];++Q;while(Q<J)X[K++]=Z[Q++];return X}function U8(Z,W,J,X,Q,K){let G=qZ(W);if(G===X)return{type:JW,hash:G,array:[{type:XZ,k:W,v:J},{type:XZ,k:Q,v:K}]};let V={val:!1};return vW(l6(i6,Z,G,W,J,V),Z,X,Q,K,V)}function vW(Z,W,J,X,Q,K){switch(Z.type){case xZ:return p0(Z,W,J,X,Q,K);case MZ:return l6(Z,W,J,X,Q,K);case JW:return d0(Z,W,J,X,Q,K)}}function p0(Z,W,J,X,Q,K){let G=_W(J,W),V=Z.array[G];if(V===void 0)return K.val=!0,{type:xZ,size:Z.size+1,array:zZ(Z.array,G,{type:XZ,k:X,v:Q})};if(V.type===XZ){if(e(X,V.k)){if(Q===V.v)return Z;return{type:xZ,size:Z.size,array:zZ(Z.array,G,{type:XZ,k:X,v:Q})}}return K.val=!0,{type:xZ,size:Z.size,array:zZ(Z.array,G,U8(W+kZ,V.k,V.v,J,X,Q))}}let Y=vW(V,W+kZ,J,X,Q,K);if(Y===V)return Z;return{type:xZ,size:Z.size,array:zZ(Z.array,G,Y)}}function l6(Z,W,J,X,Q,K){let G=M6(J,W),V=n6(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[V];if(Y.type!==XZ){let M=vW(Y,W+kZ,J,X,Q,K);if(M===Y)return Z;return{type:MZ,bitmap:Z.bitmap,array:zZ(Z.array,V,M)}}let H=Y.k;if(e(X,H)){if(Q===Y.v)return Z;return{type:MZ,bitmap:Z.bitmap,array:zZ(Z.array,V,{type:XZ,k:X,v:Q})}}return K.val=!0,{type:MZ,bitmap:Z.bitmap,array:zZ(Z.array,V,U8(W+kZ,H,Y.v,J,X,Q))}}else{let Y=Z.array.length;if(Y>=m0){let H=Array(32),M=_W(J,W);H[M]=l6(i6,W+kZ,J,X,Q,K);let F=0,R=Z.bitmap;for(let B=0;B<32;B++){if((R&1)!==0){let N=Z.array[F++];H[B]=N}R=R>>>1}return{type:xZ,size:Y+1,array:H}}else{let H=c0(Z.array,V,{type:XZ,k:X,v:Q});return K.val=!0,{type:MZ,bitmap:Z.bitmap|G,array:H}}}}function d0(Z,W,J,X,Q,K){if(J===Z.hash){let G=a6(Z,X);if(G!==-1){if(Z.array[G].v===Q)return Z;return{type:JW,hash:J,array:zZ(Z.array,G,{type:XZ,k:X,v:Q})}}let V=Z.array.length;return K.val=!0,{type:JW,hash:J,array:zZ(Z.array,V,{type:XZ,k:X,v:Q})}}return vW({type:MZ,bitmap:M6(Z.hash,W),array:[Z]},W,J,X,Q,K)}function a6(Z,W){let J=Z.array.length;for(let X=0;X<J;X++)if(e(W,Z.array[X].k))return X;return-1}function H6(Z,W,J,X){switch(Z.type){case xZ:return s0(Z,W,J,X);case MZ:return r0(Z,W,J,X);case JW:return i0(Z,X)}}function s0(Z,W,J,X){let Q=_W(J,W),K=Z.array[Q];if(K===void 0)return;if(K.type!==XZ)return H6(K,W+kZ,J,X);if(e(X,K.k))return K;return}function r0(Z,W,J,X){let Q=M6(J,W);if((Z.bitmap&Q)===0)return;let K=n6(Z.bitmap,Q),G=Z.array[K];if(G.type!==XZ)return H6(G,W+kZ,J,X);if(e(X,G.k))return G;return}function i0(Z,W){let J=a6(Z,W);if(J<0)return;return Z.array[J]}function o6(Z,W,J,X){switch(Z.type){case xZ:return n0(Z,W,J,X);case MZ:return l0(Z,W,J,X);case JW:return a0(Z,X)}}function n0(Z,W,J,X){let Q=_W(J,W),K=Z.array[Q];if(K===void 0)return Z;let G=void 0;if(K.type===XZ){if(!e(K.k,X))return Z}else if(G=o6(K,W+kZ,J,X),G===K)return Z;if(G===void 0){if(Z.size<=$0){let V=Z.array,Y=Array(Z.size-1),H=0,M=0,F=0;while(H<Q){let R=V[H];if(R!==void 0)Y[M]=R,F|=1<<H,++M;++H}++H;while(H<V.length){let R=V[H];if(R!==void 0)Y[M]=R,F|=1<<H,++M;++H}return{type:MZ,bitmap:F,array:Y}}return{type:xZ,size:Z.size-1,array:zZ(Z.array,Q,G)}}return{type:xZ,size:Z.size,array:zZ(Z.array,Q,G)}}function l0(Z,W,J,X){let Q=M6(J,W);if((Z.bitmap&Q)===0)return Z;let K=n6(Z.bitmap,Q),G=Z.array[K];if(G.type!==XZ){let V=o6(G,W+kZ,J,X);if(V===G)return Z;if(V!==void 0)return{type:MZ,bitmap:Z.bitmap,array:zZ(Z.array,K,V)};if(Z.bitmap===Q)return;return{type:MZ,bitmap:Z.bitmap^Q,array:d6(Z.array,K)}}if(e(X,G.k)){if(Z.bitmap===Q)return;return{type:MZ,bitmap:Z.bitmap^Q,array:d6(Z.array,K)}}return Z}function a0(Z,W){let J=a6(Z,W);if(J<0)return Z;if(Z.array.length===1)return;return{type:JW,hash:Z.hash,array:d6(Z.array,J)}}function q8(Z,W){if(Z===void 0)return;let J=Z.array,X=J.length;for(let Q=0;Q<X;Q++){let K=J[Q];if(K===void 0)continue;if(K.type===XZ){W(K.v,K.k);continue}q8(K,W)}}class JZ{static fromObject(Z){let W=Object.keys(Z),J=JZ.new();for(let X=0;X<W.length;X++){let Q=W[X];J=J.set(Q,Z[Q])}return J}static fromMap(Z){let W=JZ.new();return Z.forEach((J,X)=>{W=W.set(X,J)}),W}static new(){return new JZ(void 0,0)}constructor(Z,W){this.root=Z,this.size=W}get(Z,W){if(this.root===void 0)return W;let J=H6(this.root,0,qZ(Z),Z);if(J===void 0)return W;return J.v}set(Z,W){let J={val:!1},X=this.root===void 0?i6:this.root,Q=vW(X,0,qZ(Z),Z,W,J);if(Q===this.root)return this;return new JZ(Q,J.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let W=o6(this.root,0,qZ(Z),Z);if(W===this.root)return this;if(W===void 0)return JZ.new();return new JZ(W,this.size-1)}has(Z){if(this.root===void 0)return!1;return H6(this.root,0,qZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((W,J)=>Z.push([J,W])),Z}forEach(Z){q8(this.root,Z)}hashCode(){let Z=0;return this.forEach((W,J)=>{Z=Z+p6(qZ(W),qZ(J))|0}),Z}equals(Z){if(!(Z instanceof JZ)||this.size!==Z.size)return!1;try{return this.forEach((W,J)=>{if(!e(Z.get(J,!W),W))throw M8}),!0}catch(W){if(W===M8)return!1;throw W}}}var M8=Symbol();class l extends z{}class a extends z{}class rZ extends z{}class t extends z{}class DW extends z{}function WX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else Z=J.tail,W=X+1}}function $W(Z){return WX(Z,0)}function mW(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=U(Q,X)}}}function s(Z){return mW(Z,O([]))}function JX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return s(K);else{let G=X.head;Z=X.tail,W=Q,J=U(Q(G),K)}}}function KW(Z,W){return JX(Z,W,O([]))}function XX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=U(Q,X)}}}function iZ(Z,W){return XX(s(Z),W)}function F6(Z,W){return U(W,Z)}function o(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return Q;else{let G=X.head;Z=X.tail,W=K(Q,G),J=K}}}function QX(Z,W,J,X,Q,K){while(!0){let G=Z,V=W,Y=J,H=X,M=Q,F=K,R=U(M,Y);if(G instanceof I)if(H instanceof t)return U(s(R),F);else return U(R,F);else{let{head:B,tail:N}=G,A=V(M,B);if(H instanceof t)if(A instanceof l)Z=N,W=V,J=R,X=H,Q=B,K=F;else if(A instanceof a)Z=N,W=V,J=R,X=H,Q=B,K=F;else{let j;if(H instanceof t)j=U(s(R),F);else j=U(R,F);let P=j;if(N instanceof I)return U(O([B]),P);else{let{head:D,tail:S}=N,w,q=V(B,D);if(q instanceof l)w=new t;else if(q instanceof a)w=new t;else w=new DW;let T=w;Z=S,W=V,J=O([B]),X=T,Q=D,K=P}}else if(A instanceof l){let j;if(H instanceof t)j=U(s(R),F);else j=U(R,F);let P=j;if(N instanceof I)return U(O([B]),P);else{let{head:D,tail:S}=N,w,q=V(B,D);if(q instanceof l)w=new t;else if(q instanceof a)w=new t;else w=new DW;let T=w;Z=S,W=V,J=O([B]),X=T,Q=D,K=P}}else if(A instanceof a){let j;if(H instanceof t)j=U(s(R),F);else j=U(R,F);let P=j;if(N instanceof I)return U(O([B]),P);else{let{head:D,tail:S}=N,w,q=V(B,D);if(q instanceof l)w=new t;else if(q instanceof a)w=new t;else w=new DW;let T=w;Z=S,W=V,J=O([B]),X=T,Q=D,K=P}}else Z=N,W=V,J=R,X=H,Q=B,K=F}}}function KX(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(Q instanceof I)return mW(K,V);else if(K instanceof I)return mW(Q,V);else{let{head:Y,tail:H}=Q,M=K.head,F=K.tail,R=G(Y,M);if(R instanceof l)Z=H,W=K,J=G,X=U(Y,V);else if(R instanceof a)Z=Q,W=F,J=G,X=U(M,V);else Z=Q,W=F,J=G,X=U(M,V)}}}function GX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return s(K);else{let G=X.tail;if(G instanceof I){let V=X.head;return s(U(s(V),K))}else{let V=X.head,Y=G.head,H=G.tail,M=KX(V,Y,Q,O([]));Z=H,W=Q,J=U(M,K)}}}}function VX(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(Q instanceof I)return mW(K,V);else if(K instanceof I)return mW(Q,V);else{let{head:Y,tail:H}=Q,M=K.head,F=K.tail,R=G(Y,M);if(R instanceof l)Z=Q,W=F,J=G,X=U(M,V);else if(R instanceof a)Z=H,W=K,J=G,X=U(Y,V);else Z=H,W=K,J=G,X=U(Y,V)}}}function YX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return s(K);else{let G=X.tail;if(G instanceof I){let V=X.head;return s(U(s(V),K))}else{let V=X.head,Y=G.head,H=G.tail,M=VX(V,Y,Q,O([]));Z=H,W=Q,J=U(M,K)}}}}function HX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return X;else if(Q instanceof t)if(X.tail instanceof I)return X.head;else Z=GX(X,K,O([])),W=new DW,J=K;else if(X.tail instanceof I){let V=X.head;return s(V)}else Z=YX(X,K,O([])),W=new t,J=K}}function O8(Z,W){if(Z instanceof I)return Z;else{let J=Z.tail;if(J instanceof I)return Z;else{let X=Z.head,Q=J.head,K=J.tail,G,V=W(X,Q);if(V instanceof l)G=new t;else if(V instanceof a)G=new t;else G=new DW;let Y=G,H=QX(K,W,O([X]),Y,Q,O([]));return HX(H,new t,W)}}}function j8(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return;else{let{head:Q,tail:K}=J;X(Q),Z=K,W=X}}}function zX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=X+Q}}}function A8(Z){return zX(Z,"")}function RX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return K;else{let G=X.head;Z=X.tail,W=Q,J=K+Q+G}}}function U6(Z,W){if(Z instanceof I)return"";else{let{head:J,tail:X}=Z;return RX(X,W,J)}}function P8(Z,W){if(W==="")return GW(Z);else{let X=d(Z),Q=t6(X,W);return KW(Q,d)}}class BW extends z{constructor(Z,W,J){super();this.expected=Z,this.found=W,this.path=J}}class VW extends z{constructor(Z){super();this.function=Z}}function nZ(Z,W){let J=W.function(Z),X,Q;if(X=J[0],Q=J[1],Q instanceof I)return new C(X);else return new k(Q)}function q6(Z){return new VW((W)=>{return[Z,O([])]})}function cW(Z,W){return new VW((J)=>{let X=Z.function(J),Q,K;return Q=X[0],K=X[1],[W(Q),K]})}function DX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(K instanceof I)return Q;else{let{head:G,tail:V}=K,Y=G.function(X),H,M;if(H=Y,M=Y[1],M instanceof I)return H;else Z=X,W=Q,J=V}}}function T8(Z,W){return new VW((J)=>{let X=Z.function(J),Q,K;if(Q=X,K=X[1],K instanceof I)return Q;else return DX(J,Q,W)})}function L8(Z,W,J){let X=J(Z);if(X instanceof C)return[X[0],O([])];else return[X[0],O([new BW(W,jW(Z),O([]))])]}function BX(Z){return L8(Z,"Int",x8)}var C8=new VW(BX);function AX(Z){return L8(Z,"String",k8)}var z6=new VW(AX);function ZJ(Z,W){let J=T8(z6,O([(()=>{return cW(C8,_Z)})()])),X=KW(W,(K)=>{let G=d(K),V=nZ(G,J);if(V instanceof C)return V[0];else return"<"+jW(G)+">"}),Q=KW(Z[1],(K)=>{return new BW(K.expected,K.found,iZ(X,K.path))});return[Z[0],Q]}function PX(Z,W,J,X,Q){while(!0){let K=Z,G=W,V=J,Y=X,H=Q;if(K instanceof I){let F=V(Y);return ZJ(F,s(G))}else{let{head:M,tail:F}=K,R=E8(Y,M);if(R instanceof C){let B=R[0];if(B instanceof WZ){let N=B[0];Z=F,W=U(M,G),J=V,X=N,Q=H}else return H(Y,U(M,G))}else{let B=R[0],N=V(Y),A;A=N[0];let j=[A,O([new BW(B,jW(Y),O([]))])];return ZJ(j,s(G))}}}}function w8(Z,W,J){return new VW((X)=>{let Q=PX(Z,O([]),W.function,X,(M,F)=>{let R=W.function(M),B;B=R[0];let N=[B,O([new BW("Field","Nothing",O([]))])];return ZJ(N,s(F))}),K,G;K=Q[0],G=Q[1];let V=J(K).function(X),Y,H;return Y=V[0],H=V[1],[Y,iZ(G,H)]})}var SX=void 0,y8={};function d(Z){return Z}function _Z(Z){return Z.toString()}function GW(Z){let W=TX(Z);if(W)return GZ.fromArray(Array.from(W).map((J)=>J.segment));else return GZ.fromArray(Z.match(/./gsu))}var b8=void 0;function TX(Z){if(globalThis.Intl&&Intl.Segmenter)return b8||=new Intl.Segmenter,b8.segment(Z)[Symbol.iterator]()}function t6(Z,W){return GZ.fromArray(Z.split(W))}function e6(Z,W){return Z.startsWith(W)}var g8=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),CK=new RegExp(`^[${g8}]*`),wK=new RegExp(`[${g8}]*$`);function IZ(){return JZ.new()}function WJ(Z){return GZ.fromArray(Z.entries())}function f8(Z,W){return W.delete(Z)}function ZZ(Z,W){let J=Z.get(W,y8);if(J===y8)return new k(SX);return new C(J)}function h8(Z,W,J){return J.set(Z,W)}function jW(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof OW)return"Result";else if(Z instanceof GZ)return"List";else if(Z instanceof hW)return"BitArray";else if(Z instanceof JZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let W=typeof Z;return W.charAt(0).toUpperCase()+W.slice(1)}}function N8(Z){let W=Z.toString().replace("+","");if(W.indexOf(".")>=0)return W;else{let J=W.indexOf("e");if(J>=0)return W.slice(0,J)+".0"+W.slice(J);else return W+".0"}}class LX{#Z=new Set;inspect(Z){let W=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(W==="string")return this.#K(Z);if(W==="bigint"||Number.isInteger(Z))return Z.toString();if(W==="number")return N8(Z);if(Z instanceof _6)return this.#G(Z);if(Z instanceof hW)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let X=[];for(let Q of Array(Z.length).keys())X.push(String.fromCharCode(Q+97));return`//fn(${X.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let J;if(Array.isArray(Z))J=`#(${Z.map((X)=>this.inspect(X)).join(", ")})`;else if(Z instanceof GZ)J=this.#W(Z);else if(Z instanceof z)J=this.#X(Z);else if(Z instanceof JZ)J=this.#J(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((X)=>this.inspect(X)).join(", ")}))`;else J=this.#Q(Z);return this.#Z.delete(Z),J}#Q(Z){let W=Object.getPrototypeOf(Z)?.constructor?.name||"Object",J=[];for(let K of Object.keys(Z))J.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let X=J.length?" "+J.join(", ")+" ":"";return`//js(${W==="Object"?"":W+" "}{${X}})`}#J(Z){let W="dict.from_list([",J=!0;return Z.forEach((X,Q)=>{if(!J)W=W+", ";W=W+"#("+this.inspect(Q)+", "+this.inspect(X)+")",J=!1}),W+"])"}#X(Z){let W=Object.keys(Z).map((J)=>{let X=this.inspect(Z[J]);return isNaN(parseInt(J))?`${J}: ${X}`:X}).join(", ");return W?`${Z.constructor.name}(${W})`:Z.constructor.name}#W(Z){if(Z instanceof I)return"[]";let W='charlist.from_string("',J="[",X=Z;while(X instanceof DZ){let Q=X.head;if(X=X.tail,J!=="[")J+=", ";if(J+=this.inspect(Q),W)if(Number.isInteger(Q)&&Q>=32&&Q<=126)W+=String.fromCharCode(Q);else W=null}if(W)return W+'")';else return J+"]"}#K(Z){let W='"';for(let J=0;J<Z.length;J++){let X=Z[J];switch(X){case`
`:W+="\\n";break;case"\r":W+="\\r";break;case"\t":W+="\\t";break;case"\f":W+="\\f";break;case"\\":W+="\\\\";break;case'"':W+="\\\"";break;default:if(X<" "||X>"~"&&X<" ")W+="\\u{"+X.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else W+=X}}return W+='"',W}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let W="<<";for(let J=0;J<Z.byteSize-1;J++)W+=Z.byteAt(J).toString(),W+=", ";if(Z.byteSize*8===Z.bitSize)W+=Z.byteAt(Z.byteSize-1).toString();else{let J=Z.bitSize%8;W+=Z.byteAt(Z.byteSize-1)>>8-J,W+=`:size(${J})`}return W+=">>",W}}function E8(Z,W){if(Z instanceof JZ||Z instanceof WeakMap||Z instanceof Map){let X={},Q=Z.get(W,X);if(Q===X)return new C(new HZ);return new C(new WZ(Q))}let J=Number.isInteger(W);if(J&&W>=0&&W<8&&Z instanceof GZ){let X=0;for(let Q of Z){if(X===W)return new C(new WZ(Q));X++}return new k("Indexable")}if(J&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(W in Z)return new C(new WZ(Z[W]));return new C(new HZ)}return new k(J?"Indexable":"Dict")}function x8(Z){if(Number.isInteger(Z))return new C(Z);return new k(0)}function k8(Z){if(typeof Z==="string")return new C(Z);return new k("")}function NZ(Z,W,J){return h8(W,J,Z)}function CX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;Z=J.tail,W=U(Q,X)}}}function wX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return CX(X,O([]));else{let Q=J.tail,K=J.head[0];Z=Q,W=U(K,X)}}}function dW(Z){return wX(WJ(Z),O([]))}function R6(Z,W){return f8(W,Z)}function EX(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return Q;else{let G=X.tail,V=X.head[0],Y=X.head[1];Z=G,W=K(Q,V,Y),J=K}}}function pW(Z,W,J){return EX(WJ(Z),W,J)}function _8(Z){if(Z instanceof C)return!0;else return!1}class I6 extends z{constructor(Z){super();this.dict=Z}}function YW(){return new I6(IZ())}function JJ(Z,W){let J=Z.dict,X=ZZ(J,W);return _8(X)}function v8(Z,W){return new I6(R6(Z.dict,W))}var xX=void 0;function PW(Z,W){return new I6(NZ(Z.dict,W,xX))}function u8(Z,W,J){if(Z)return W;else return J()}function i(Z){return Z}function sW(Z){return Z}function rW(Z){return sW(Z)}var OZ=()=>globalThis?.document,O6="http://www.w3.org/1999/xhtml",j6=1,QJ=3;var p8=!!globalThis.HTMLElement?.prototype?.moveBefore;var x=O([]),D6=new HZ;var mX=new rZ,$X=new l,uX=new a;function B6(Z,W){if(Z.name===W.name)return uX;else if(Z.name<W.name)return $X;else return mX}class gZ extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class iW extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class VZ extends z{constructor(Z,W,J,X,Q,K,G,V){super();this.kind=Z,this.name=W,this.handler=J,this.include=X,this.prevent_default=Q,this.stop_propagation=K,this.debounce=G,this.throttle=V}}class nW extends z{constructor(Z,W,J){super();this.prevent_default=Z,this.stop_propagation=W,this.message=J}}class n8 extends z{constructor(Z){super();this.kind=Z}}function iX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head;if(Q instanceof gZ){let K=Q.name;if(K==="")Z=J.tail,W=X;else if(K==="class"){let G=Q.value;if(G==="")Z=J.tail,W=X;else{let V=J.tail;if(V instanceof I){let Y=Q;Z=V,W=U(Y,X)}else{let Y=V.head;if(Y instanceof gZ)if(Y.name==="class"){let M=Q.kind,F=G,R=V.tail,B=Y.value,N=F+" "+B,A=new gZ(M,"class",N);Z=U(A,R),W=X}else{let M=Q;Z=V,W=U(M,X)}else{let H=Q;Z=V,W=U(H,X)}}}}else if(K==="style"){let G=Q.value;if(G==="")Z=J.tail,W=X;else{let V=J.tail;if(V instanceof I){let Y=Q;Z=V,W=U(Y,X)}else{let Y=V.head;if(Y instanceof gZ)if(Y.name==="style"){let M=Q.kind,F=G,R=V.tail,B=Y.value,N=F+";"+B,A=new gZ(M,"style",N);Z=U(A,R),W=X}else{let M=Q;Z=V,W=U(M,X)}else{let H=Q;Z=V,W=U(H,X)}}}}else{let G=Q;Z=J.tail,W=U(G,X)}}else{let K=Q;Z=J.tail,W=U(K,X)}}}}function l8(Z){if(Z instanceof I)return Z;else if(Z.tail instanceof I)return Z;else{let X=O8(Z,(Q,K)=>{return B6(K,Q)});return iX(X,x)}}var GJ=0;function a8(Z,W){return new gZ(GJ,Z,W)}var VJ=1;function o8(Z,W){return new iW(VJ,Z,W)}var YJ=2;function t8(Z,W,J,X,Q,K,G){return new VZ(YJ,Z,W,J,X,Q,K,G)}var HJ=0;var MJ=new n8(HJ);var FJ=2;function lZ(Z,W){return a8(Z,W)}function Z9(Z,W){return o8(Z,W)}function e8(Z){return lZ("class",Z)}function W9(Z){return lZ("id",Z)}function KZ(Z,W){if(Z==="")return e8("");else if(W==="")return e8("");else return lZ("style",Z+":"+W+";")}function aX(Z,W){while(!0){let J=Z,X=W;if(J instanceof I)return X;else{let Q=J.head[0];if(Q==="")Z=J.tail,W=X;else{let K=J.head[1];if(K==="")Z=J.tail,W=X;else{let G=J.tail,V=Q,Y=K;Z=G,W=X+V+":"+Y+";"}}}}}function J9(Z){return lZ("style",aX(Z,""))}function A6(Z){return lZ("href",Z)}class S6 extends z{constructor(Z,W,J){super();this.synchronous=Z,this.before_paint=W,this.after_paint=J}}class X9 extends z{constructor(Z,W,J,X,Q){super();this.dispatch=Z,this.emit=W,this.select=J,this.root=X,this.provide=Q}}function Q9(Z,W,J,X,Q,K){let G=new X9(W,J,X,Q,K);return j8(Z.synchronous,(V)=>{return V(G)})}var P6=new S6(O([]),O([]),O([]));function CW(){return P6}function K9(Z){return new S6(O([(J)=>{let X=J.dispatch;return Z(X)}]),P6.before_paint,P6.after_paint)}function G9(Z){return o(Z,P6,(W,J)=>{return new S6(o(J.synchronous,W.synchronous,F6),o(J.before_paint,W.before_paint,F6),o(J.after_paint,W.after_paint,F6))})}function FZ(){return null}function lW(Z,W){let J=Z?.get(W);if(J!=null)return new C(J);else return new k(void 0)}function aW(Z,W){return Z&&Z.has(W)}function HW(Z,W,J){return Z??=new Map,Z.set(W,J),Z}function UJ(Z,W){return Z?.delete(W),Z}class qJ extends z{}class zJ extends z{constructor(Z,W){super();this.key=Z,this.parent=W}}class V9 extends z{constructor(Z,W){super();this.index=Z,this.parent=W}}function oX(Z,W){while(!0){let J=Z,X=W;if(X instanceof I)return!1;else{let{head:Q,tail:K}=X,G=e6(J,Q);if(G)return G;else Z=J,W=K}}}function PZ(Z,W,J){if(J==="")return new V9(W,Z);else return new zJ(J,Z)}var T6=new qJ,tW="\t";function Y9(Z,W){while(!0){let J=Z,X=W;if(J instanceof qJ)if(X instanceof I)return"";else{let Q=X.tail;return A8(Q)}else if(J instanceof zJ){let Q=J.key;Z=J.parent,W=U(tW,U(Q,X))}else{let Q=J.index;Z=J.parent,W=U(tW,U(_Z(Q),X))}}}function tX(Z){return Y9(Z,O([]))}function H9(Z,W){if(W instanceof I)return!1;else return oX(tX(Z),W)}var RJ=`
`;function IJ(Z,W){return Y9(Z,O([RJ,W]))}class SZ extends z{constructor(Z,W,J,X,Q){super();this.kind=Z,this.key=W,this.mapper=J,this.children=X,this.keyed_children=Q}}class TZ extends z{constructor(Z,W,J,X,Q,K,G,V,Y,H){super();this.kind=Z,this.key=W,this.mapper=J,this.namespace=X,this.tag=Q,this.attributes=K,this.children=G,this.keyed_children=V,this.self_closing=Y,this.void=H}}class LZ extends z{constructor(Z,W,J,X){super();this.kind=Z,this.key=W,this.mapper=J,this.content=X}}class EW extends z{constructor(Z,W,J,X,Q,K,G){super();this.kind=Z,this.key=W,this.mapper=J,this.namespace=X,this.tag=Q,this.attributes=K,this.inner_html=G}}function eW(Z,W){if(W==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function F9(Z,W){if(W instanceof SZ)return new SZ(W.kind,Z,W.mapper,W.children,W.keyed_children);else if(W instanceof TZ)return new TZ(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.children,W.keyed_children,W.self_closing,W.void);else if(W instanceof LZ)return new LZ(W.kind,Z,W.mapper,W.content);else return new EW(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.inner_html)}var CZ=0;function NJ(Z,W,J,X){return new SZ(CZ,Z,W,J,X)}var MW=1;function Z6(Z,W,J,X,Q,K,G,V,Y){return new TZ(MW,Z,W,J,X,l8(Q),K,G,V,Y)}var xW=2;function OJ(Z,W,J){return new LZ(xW,Z,W,J)}var U9=3;var jJ=(Z,W)=>Z===W,wZ=(Z,W)=>{if(Z===W)return!0;if(Z==null||W==null)return!1;let J=typeof Z;if(J!==typeof W)return!1;if(J!=="object")return!1;if(Z.constructor!==W.constructor)return!1;if(Array.isArray(Z))return WQ(Z,W);return JQ(Z,W)},WQ=(Z,W)=>{let J=Z.length;if(J!==W.length)return!1;while(J--)if(!wZ(Z[J],W[J]))return!1;return!0},JQ=(Z,W)=>{let J=Object.keys(Z),X=J.length;if(Object.keys(W).length!==X)return!1;while(X--){let Q=J[X];if(!Object.hasOwn(W,Q))return!1;if(!wZ(Z[Q],W[Q]))return!1}return!0};class mZ extends z{constructor(Z,W,J){super();this.handlers=Z,this.dispatched_paths=W,this.next_dispatched_paths=J}}class AJ extends z{constructor(Z,W){super();this.path=Z,this.handler=W}}class DJ extends z{constructor(Z){super();this.path=Z}}function PJ(){return new mZ(FZ(),x,x)}function I9(Z){return new mZ(Z.handlers,Z.next_dispatched_paths,x)}function N9(Z,W,J){return UJ(Z,IJ(W,J))}function L6(Z,W,J){let X=N9(Z.handlers,W,J);return new mZ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function q9(Z,W,J){return o(J,Z,(X,Q)=>{if(Q instanceof VZ){let K=Q.name;return N9(X,W,K)}else return X})}function SJ(Z,W,J,X){let Q=lW(Z.handlers,W+RJ+J);if(Q instanceof C){let K=Q[0],G=nZ(X,K);if(G instanceof C){let V=G[0];return new AJ(W,V)}else return new DJ(W)}else return new DJ(W)}function TJ(Z,W){let J=U(W.path,Z.next_dispatched_paths),X=new mZ(Z.handlers,Z.dispatched_paths,J);if(W instanceof AJ){let Q=W.handler;return[X,new C(Q)]}else return[X,new k(void 0)]}function LJ(Z,W,J,X){let Q=SJ(Z,W,J,X);return((K)=>{return TJ(Z,K)})(Q)}function C6(Z,W){return H9(W,Z.dispatched_paths)}function O9(Z,W,J,X,Q){return HW(Z,IJ(J,X),cW(Q,(K)=>{return new nW(K.prevent_default,K.stop_propagation,i(W)(K.message))}))}function kW(Z,W,J,X,Q){let K=O9(Z.handlers,W,J,X,Q);return new mZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function z9(Z,W,J,X){return o(X,Z,(Q,K)=>{if(K instanceof VZ){let{name:G,handler:V}=K;return O9(Q,W,J,G,V)}else return Q})}function aZ(Z,W){let J=jJ(Z,i);if(jJ(W,i))return Z;else if(J)return W;else return(Q)=>{return Z(W(Q))}}function R9(Z,W,J,X){while(!0){let Q=Z,K=W,G=J,V=X;if(V instanceof I)return Q;else{let{head:Y,tail:H}=V;Z=j9(Q,K,G,Y),W=K,J=G+1,X=H}}}function j9(Z,W,J,X){if(X instanceof SZ){let Q=X.children,K=PZ(W,J,X.key);return R9(Z,K,0,Q)}else if(X instanceof TZ){let{attributes:Q,children:K}=X,G=PZ(W,J,X.key),Y=q9(Z,G,Q);return R9(Y,G,0,K)}else if(X instanceof LZ)return Z;else{let Q=X.attributes,K=PZ(W,J,X.key);return q9(Z,K,Q)}}function $Z(Z,W,J,X){let Q=j9(Z.handlers,W,J,X);return new mZ(Q,Z.dispatched_paths,Z.next_dispatched_paths)}function BJ(Z,W,J,X,Q){while(!0){let K=Z,G=W,V=J,Y=X,H=Q;if(H instanceof I)return K;else{let{head:M,tail:F}=H;Z=D9(K,G,V,Y,M),W=G,J=V,X=Y+1,Q=F}}}function D9(Z,W,J,X,Q){if(Q instanceof SZ){let K=Q.children,G=PZ(J,X,Q.key),V=aZ(W,Q.mapper);return BJ(Z,V,G,0,K)}else if(Q instanceof TZ){let{attributes:K,children:G}=Q,V=PZ(J,X,Q.key),Y=aZ(W,Q.mapper),M=z9(Z,Y,V,K);return BJ(M,Y,V,0,G)}else if(Q instanceof LZ)return Z;else{let K=Q.attributes,G=PZ(J,X,Q.key),V=aZ(W,Q.mapper);return z9(Z,V,G,K)}}function uZ(Z,W,J,X,Q){let K=D9(Z.handlers,W,J,X,Q);return new mZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function B9(Z){return uZ(PJ(),i,T6,0,Z)}function A9(Z,W,J,X,Q){let K=BJ(Z.handlers,W,J,X,Q);return new mZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function fZ(Z,W,J){return Z6("",i,"",Z,W,J,FZ(),!1,eW(Z,""))}function W6(Z){return OJ("",i,Z)}function P9(){return OJ("",i,"")}function cZ(Z){return W6(Z)}function S9(Z,W){return fZ("article",Z,W)}function T9(Z,W){return fZ("h1",Z,W)}function CJ(Z,W){return fZ("div",Z,W)}function L9(Z,W){return fZ("p",Z,W)}function C9(Z,W){return fZ("pre",Z,W)}function w6(Z,W){return fZ("a",Z,W)}function wJ(Z,W){return fZ("button",Z,W)}function w9(Z,W){return fZ("textarea",U(Z9("value",rW(W)),Z),O([W6(W)]))}class X6 extends z{constructor(Z,W,J,X){super();this.index=Z,this.removed=W,this.changes=J,this.children=X}}class x9 extends z{constructor(Z,W){super();this.kind=Z,this.content=W}}class k9 extends z{constructor(Z,W){super();this.kind=Z,this.inner_html=W}}class y9 extends z{constructor(Z,W,J){super();this.kind=Z,this.added=W,this.removed=J}}class b9 extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.before=J}}class g9 extends z{constructor(Z,W,J){super();this.kind=Z,this.index=W,this.with=J}}class f9 extends z{constructor(Z,W){super();this.kind=Z,this.index=W}}class h9 extends z{constructor(Z,W,J){super();this.kind=Z,this.children=W,this.before=J}}function EJ(Z,W,J,X){return new X6(Z,W,J,X)}var xJ=0;function _9(Z){return new x9(xJ,Z)}var kJ=1;function v9(Z){return new k9(kJ,Z)}var yJ=2;function bJ(Z,W){return new y9(yJ,Z,W)}var gJ=3;function m9(Z,W){return new b9(gJ,Z,W)}var fJ=4;function $9(Z){return new f9(fJ,Z)}var hJ=5;function UW(Z,W){return new g9(hJ,Z,W)}var _J=6;function vJ(Z,W){return new h9(_J,Z,W)}class c9 extends z{constructor(Z,W,J,X,Q,K,G,V){super();this.kind=Z,this.open_shadow_root=W,this.will_adopt_styles=J,this.observed_attributes=X,this.observed_properties=Q,this.requested_contexts=K,this.provided_contexts=G,this.vdom=V}}class p9 extends z{constructor(Z,W){super();this.kind=Z,this.patch=W}}class d9 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.data=J}}class s9 extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.value=J}}class E6 extends z{constructor(Z,W){super();this.kind=Z,this.messages=W}}class x6 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class k6 extends z{constructor(Z,W,J){super();this.kind=Z,this.name=W,this.value=J}}class y6 extends z{constructor(Z,W,J,X){super();this.kind=Z,this.path=W,this.name=J,this.event=X}}class mJ extends z{constructor(Z,W,J){super();this.kind=Z,this.key=W,this.value=J}}var GQ=0;function r9(Z,W,J,X,Q,K,G){return new c9(GQ,Z,W,J,X,Q,K,G)}var VQ=1;function $J(Z){return new p9(VQ,Z)}var YQ=2;function i9(Z,W){return new d9(YQ,Z,W)}var HQ=3;function n9(Z,W){return new s9(HQ,Z,W)}class b6 extends z{constructor(Z,W){super();this.patch=Z,this.events=W}}class o9 extends z{constructor(Z,W,J){super();this.added=Z,this.removed=W,this.events=J}}function MQ(Z,W,J,X){if(J==="input"&&W==="")return C6(Z,X);else if(J==="select"&&W==="")return C6(Z,X);else if(J==="textarea"&&W==="")return C6(Z,X);else return!1}function a9(Z,W,J,X,Q,K,G,V){while(!0){let Y=Z,H=W,M=J,F=X,R=Q,B=K,N=G,A=V;if(R instanceof I)if(B instanceof I)return new o9(N,A,F);else{let j=B.head;if(j instanceof VZ){let P=j,D=B.tail,S=j.name,w=j.handler,q=U(P,N),T=kW(F,M,H,S,w);Z=Y,W=H,J=M,X=T,Q=R,K=D,G=q,V=A}else{let P=j,D=B.tail,S=U(P,N);Z=Y,W=H,J=M,X=F,Q=R,K=D,G=S,V=A}}else if(B instanceof I){let j=R.head;if(j instanceof VZ){let P=j,D=R.tail,S=j.name,w=U(P,A),q=L6(F,H,S);Z=Y,W=H,J=M,X=q,Q=D,K=B,G=N,V=w}else{let P=j,D=R.tail,S=U(P,A);Z=Y,W=H,J=M,X=F,Q=D,K=B,G=N,V=S}}else{let{head:j,tail:P}=R,D=B.head,S=B.tail,w=B6(j,D);if(w instanceof l)if(j instanceof VZ){let q=j.name,T=U(j,A),L=L6(F,H,q);Z=Y,W=H,J=M,X=L,Q=P,K=B,G=N,V=T}else{let q=U(j,A);Z=Y,W=H,J=M,X=F,Q=P,K=B,G=N,V=q}else if(w instanceof a)if(j instanceof gZ)if(D instanceof gZ){let q,T=D.name;if(T==="value")q=Y||j.value!==D.value;else if(T==="checked")q=Y||j.value!==D.value;else if(T==="selected")q=Y||j.value!==D.value;else q=j.value!==D.value;let L=q,E;if(L)E=U(D,N);else E=N;let b=E;Z=Y,W=H,J=M,X=F,Q=P,K=S,G=b,V=A}else if(D instanceof VZ){let{name:q,handler:T}=D,L=U(D,N),E=U(j,A),b=kW(F,M,H,q,T);Z=Y,W=H,J=M,X=b,Q=P,K=S,G=L,V=E}else{let q=U(D,N),T=U(j,A);Z=Y,W=H,J=M,X=F,Q=P,K=S,G=q,V=T}else if(j instanceof iW)if(D instanceof iW){let q,T=D.name;if(T==="scrollLeft")q=!0;else if(T==="scrollRight")q=!0;else if(T==="value")q=Y||!wZ(j.value,D.value);else if(T==="checked")q=Y||!wZ(j.value,D.value);else if(T==="selected")q=Y||!wZ(j.value,D.value);else q=!wZ(j.value,D.value);let L=q,E;if(L)E=U(D,N);else E=N;let b=E;Z=Y,W=H,J=M,X=F,Q=P,K=S,G=b,V=A}else if(D instanceof VZ){let{name:q,handler:T}=D,L=U(D,N),E=U(j,A),b=kW(F,M,H,q,T);Z=Y,W=H,J=M,X=b,Q=P,K=S,G=L,V=E}else{let q=U(D,N),T=U(j,A);Z=Y,W=H,J=M,X=F,Q=P,K=S,G=q,V=T}else if(D instanceof VZ){let{name:q,handler:T}=D,L=j.prevent_default.kind!==D.prevent_default.kind||j.stop_propagation.kind!==D.stop_propagation.kind||j.debounce!==D.debounce||j.throttle!==D.throttle,E;if(L)E=U(D,N);else E=N;let b=E,f=kW(F,M,H,q,T);Z=Y,W=H,J=M,X=f,Q=P,K=S,G=b,V=A}else{let q=j.name,T=U(D,N),L=U(j,A),E=L6(F,H,q);Z=Y,W=H,J=M,X=E,Q=P,K=S,G=T,V=L}else if(D instanceof VZ){let{name:q,handler:T}=D,L=U(D,N),E=kW(F,M,H,q,T);Z=Y,W=H,J=M,X=E,Q=R,K=S,G=L,V=A}else{let q=U(D,N);Z=Y,W=H,J=M,X=F,Q=R,K=S,G=q,V=A}}}}function uJ(Z,W,J,X,Q,K,G,V,Y,H,M,F,R,B){while(!0){let N=Z,A=W,j=J,P=X,D=Q,S=K,w=G,q=V,T=Y,L=H,E=M,b=F,f=R,n=B;if(N instanceof I)if(j instanceof I)return new b6(new X6(T,w,E,b),n);else{let jZ=A9(n,f,L,q,j),UZ=vJ(j,q-S),u=U(UZ,E);return new b6(new X6(T,w,u,b),jZ)}else if(j instanceof I){let{head:jZ,tail:UZ}=N,u;if(jZ.key===""||!aW(D,jZ.key))u=w+1;else u=w;let h=u,v=$Z(n,L,q,jZ);Z=UZ,W=A,J=j,X=P,Q=D,K=S,G=h,V=q,Y=T,H=L,M=E,F=b,R=f,B=v}else{let jZ=N.head,UZ=j.head;if(jZ.key!==UZ.key){let u=N.tail,c=j.tail,h=lW(A,UZ.key);if(aW(P,jZ.key))if(h instanceof C){let y=h[0];if(aW(D,jZ.key))Z=u,W=A,J=j,X=P,Q=D,K=S-1,G=w,V=q,Y=T,H=L,M=E,F=b,R=f,B=n;else{let m=q-S,g=U(m9(UZ.key,m),E),p=HW(D,UZ.key,void 0),$=S+1;Z=U(y,N),W=A,J=j,X=P,Q=p,K=$,G=w,V=q,Y=T,H=L,M=g,F=b,R=f,B=n}}else{let y=q-S,_=uZ(n,f,L,q,UZ),m=vJ(O([UZ]),y),g=U(m,E);Z=N,W=A,J=c,X=P,Q=D,K=S+1,G=w,V=q+1,Y=T,H=L,M=g,F=b,R=f,B=_}else if(h instanceof C){let y=q-S,_=U($9(y),E),m=$Z(n,L,q,jZ),g=S-1;Z=u,W=A,J=j,X=P,Q=D,K=g,G=w,V=q,Y=T,H=L,M=_,F=b,R=f,B=m}else{let y=UW(q-S,UZ),_,g=$Z(n,L,q,jZ);_=uZ(g,f,L,q,UZ);let p=_;Z=u,W=A,J=c,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=U(y,E),F=b,R=f,B=p}}else{let u=N.head;if(u instanceof SZ){let c=j.head;if(c instanceof SZ){let h=u,v=N.tail,y=c,_=j.tail,m=aZ(f,y.mapper),g=PZ(L,q,y.key),p=uJ(h.children,h.keyed_children,y.children,y.keyed_children,FZ(),0,0,0,q,g,x,x,m,n),$,r=p.patch;if(r.changes instanceof I)if(r.children instanceof I)if(r.removed===0)$=b;else $=U(p.patch,b);else $=U(p.patch,b);else $=U(p.patch,b);let EZ=$;Z=v,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=E,F=EZ,R=f,B=p.events}else{let h=u,v=N.tail,y=c,_=j.tail,m=UW(q-S,y),g,$=$Z(n,L,q,h);g=uZ($,f,L,q,y);let r=g;Z=v,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=U(m,E),F=b,R=f,B=r}}else if(u instanceof TZ){let c=j.head;if(c instanceof TZ){let h=u,v=c;if(h.namespace===v.namespace&&h.tag===v.tag){let y=N.tail,_=j.tail,m=aZ(f,v.mapper),g=PZ(L,q,v.key),p=MQ(n,v.namespace,v.tag,g),$=a9(p,g,m,n,h.attributes,v.attributes,x,x),r,hZ,EZ;r=$.added,hZ=$.removed,EZ=$.events;let tZ;if(r instanceof I&&hZ instanceof I)tZ=x;else tZ=O([bJ(r,hZ)]);let IW=tZ,NW=uJ(h.children,h.keyed_children,v.children,v.keyed_children,FZ(),0,0,0,q,g,IW,x,m,EZ),sZ,eZ=NW.patch;if(eZ.changes instanceof I)if(eZ.children instanceof I)if(eZ.removed===0)sZ=b;else sZ=U(NW.patch,b);else sZ=U(NW.patch,b);else sZ=U(NW.patch,b);let C0=sZ;Z=y,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=E,F=C0,R=f,B=NW.events}else{let y=u,_=N.tail,m=c,g=j.tail,p=UW(q-S,m),$,hZ=$Z(n,L,q,y);$=uZ(hZ,f,L,q,m);let EZ=$;Z=_,W=A,J=g,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=U(p,E),F=b,R=f,B=EZ}}else{let h=u,v=N.tail,y=c,_=j.tail,m=UW(q-S,y),g,$=$Z(n,L,q,h);g=uZ($,f,L,q,y);let r=g;Z=v,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=U(m,E),F=b,R=f,B=r}}else if(u instanceof LZ){let c=j.head;if(c instanceof LZ){let h=u,v=c;if(h.content===v.content){let y=N.tail,_=j.tail;Z=y,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=E,F=b,R=f,B=n}else{let y=N.tail,_=c,m=j.tail,g=EJ(q,0,O([_9(_.content)]),x);Z=y,W=A,J=m,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=E,F=U(g,b),R=f,B=n}}else{let h=u,v=N.tail,y=c,_=j.tail,m=UW(q-S,y),g,$=$Z(n,L,q,h);g=uZ($,f,L,q,y);let r=g;Z=v,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=U(m,E),F=b,R=f,B=r}}else{let c=j.head;if(c instanceof EW){let h=u,v=N.tail,y=c,_=j.tail,m=aZ(f,y.mapper),g=PZ(L,q,y.key),p=a9(!1,g,m,n,h.attributes,y.attributes,x,x),$,r,hZ;$=p.added,r=p.removed,hZ=p.events;let EZ;if($ instanceof I&&r instanceof I)EZ=x;else EZ=O([bJ($,r)]);let tZ=EZ,IW;if(h.inner_html===y.inner_html)IW=tZ;else IW=U(v9(y.inner_html),tZ);let sZ=IW,eZ;if(sZ instanceof I)eZ=b;else eZ=U(EJ(q,0,sZ,O([])),b);let Q8=eZ;Z=v,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=E,F=Q8,R=f,B=hZ}else{let h=u,v=N.tail,y=c,_=j.tail,m=UW(q-S,y),g,$=$Z(n,L,q,h);g=uZ($,f,L,q,y);let r=g;Z=v,W=A,J=_,X=P,Q=D,K=S,G=w,V=q+1,Y=T,H=L,M=U(m,E),F=b,R=f,B=r}}}}}}function bW(Z,W,J){return uJ(O([W]),FZ(),O([J]),FZ(),FZ(),0,0,0,0,T6,x,x,i,I9(Z))}var{setTimeout:FQ,clearTimeout:cJ}=globalThis,UQ=(Z,W)=>OZ().createElementNS(Z,W),qQ=(Z)=>OZ().createTextNode(Z),zQ=()=>OZ().createDocumentFragment(),gW=(Z,W,J)=>Z.insertBefore(W,J),e9=p8?(Z,W,J)=>Z.moveBefore(W,J):gW,RQ=(Z,W)=>Z.removeChild(W),IQ=(Z,W)=>Z.getAttribute(W),Z0=(Z,W,J)=>Z.setAttribute(W,J),NQ=(Z,W)=>Z.removeAttribute(W),OQ=(Z,W,J,X)=>Z.addEventListener(W,J,X),W0=(Z,W,J)=>Z.removeEventListener(W,J),jQ=(Z,W)=>Z.innerHTML=W,DQ=(Z,W)=>Z.data=W,pZ=Symbol("lustre");class Q0{constructor(Z,W,J,X){this.kind=Z,this.key=X,this.parent=W,this.children=[],this.node=J,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===CZ?this.node.parentNode:this.node}}var dZ=(Z,W,J,X,Q)=>{let K=new Q0(Z,W,J,Q);return J[pZ]=K,W?.children.splice(X,0,K),K},BQ=(Z)=>{let W="";for(let J=Z[pZ];J.parent;J=J.parent)if(J.key)W=`${tW}${J.key}${W}`;else{let X=J.parent.children.indexOf(J);W=`${tW}${X}${W}`}return W.slice(1)};class dJ{#Z=null;#Q;#J;#X=!1;constructor(Z,W,J,{exposeKeys:X=!1}={}){this.#Z=Z,this.#Q=W,this.#J=J,this.#X=X}mount(Z){dZ(MW,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[pZ],0,Z)}push(Z){this.#W.push({node:this.#Z[pZ],patch:Z}),this.#K()}#W=[];#K(){let Z=this.#W;while(Z.length){let{node:W,patch:J}=Z.pop(),{children:X}=W,{changes:Q,removed:K,children:G}=J;if(qW(Q,(V)=>this.#G(W,V)),K)this.#U(W,X.length-K,K);qW(G,(V)=>{let Y=X[V.index|0];this.#W.push({node:Y,patch:V})})}}#G(Z,W){switch(W.kind){case xJ:this.#P(Z,W);break;case kJ:this.#j(Z,W);break;case yJ:this.#z(Z,W);break;case gJ:this.#M(Z,W);break;case fJ:this.#I(Z,W);break;case hJ:this.#F(Z,W);break;case _J:this.#Y(Z,W);break}}#Y(Z,{children:W,before:J}){let X=zQ(),Q=this.#H(Z,J);this.#N(X,null,Z,J|0,W),gW(Z.parentNode,X,Q)}#F(Z,{index:W,with:J}){this.#U(Z,W|0,1);let X=this.#H(Z,W);this.#O(Z.parentNode,X,Z,W|0,J)}#H(Z,W){W=W|0;let{children:J}=Z,X=J.length;if(W<X)return J[W].node;let Q=J[X-1];if(!Q&&Z.kind!==CZ)return null;if(!Q)Q=Z;while(Q.kind===CZ&&Q.children.length)Q=Q.children[Q.children.length-1];return Q.node.nextSibling}#M(Z,{key:W,before:J}){J=J|0;let{children:X,parentNode:Q}=Z,K=X[J].node,G=X[J];for(let M=J+1;M<X.length;++M){let F=X[M];if(X[M]=G,G=F,F.key===W){X[J]=F;break}}let{kind:V,node:Y,children:H}=G;if(e9(Q,Y,K),V===CZ)this.#V(Q,H,K)}#V(Z,W,J){for(let X=0;X<W.length;++X){let{kind:Q,node:K,children:G}=W[X];if(e9(Z,K,J),Q===CZ)this.#V(Z,G,J)}}#I(Z,{index:W}){this.#U(Z,W,1)}#U(Z,W,J){let{children:X,parentNode:Q}=Z,K=X.splice(W,J);for(let G=0;G<K.length;++G){let{kind:V,node:Y,children:H}=K[G];if(RQ(Q,Y),this.#q(K[G]),V===CZ)K.push(...H)}}#q(Z){let{debouncers:W,children:J}=Z;for(let{timeout:X}of W.values())if(X)cJ(X);W.clear(),qW(J,(X)=>this.#q(X))}#z({node:Z,handlers:W,throttles:J,debouncers:X},{added:Q,removed:K}){qW(K,({name:G})=>{if(W.delete(G))W0(Z,G,pJ),this.#R(J,G,0),this.#R(X,G,0);else NQ(Z,G),X0[G]?.removed?.(Z,G)}),qW(Q,(G)=>this.#A(Z,G))}#P({node:Z},{content:W}){DQ(Z,W??"")}#j({node:Z},{inner_html:W}){jQ(Z,W??"")}#N(Z,W,J,X,Q){qW(Q,(K)=>this.#O(Z,W,J,X++,K))}#O(Z,W,J,X,Q){switch(Q.kind){case MW:{let K=this.#D(J,X,Q);this.#N(K,null,K[pZ],0,Q.children),gW(Z,K,W);break}case xW:{let K=this.#B(J,X,Q);gW(Z,K,W);break}case CZ:{let K=this.#B(J,X,Q);gW(Z,K,W),this.#N(Z,W,K[pZ],0,Q.children);break}case U9:{let K=this.#D(J,X,Q);this.#j({node:K},Q),gW(Z,K,W);break}}}#D(Z,W,{kind:J,key:X,tag:Q,namespace:K,attributes:G}){let V=UQ(K||O6,Q);if(dZ(J,Z,V,W,X),this.#X&&X)Z0(V,"data-lustre-key",X);return qW(G,(Y)=>this.#A(V,Y)),V}#B(Z,W,{kind:J,key:X,content:Q}){let K=qQ(Q??"");return dZ(J,Z,K,W,X),K}#A(Z,W){let{debouncers:J,handlers:X,throttles:Q}=Z[pZ],{kind:K,name:G,value:V,prevent_default:Y,debounce:H,throttle:M}=W;switch(K){case GJ:{let F=V??"";if(G==="virtual:defaultValue"){Z.defaultValue=F;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(F!==IQ(Z,G))Z0(Z,G,F);X0[G]?.added?.(Z,F);break}case VJ:Z[G]=V;break;case YJ:{if(X.has(G))W0(Z,G,pJ);let F=Y.kind===HJ;OQ(Z,G,pJ,{passive:F}),this.#R(Q,G,M),this.#R(J,G,H),X.set(G,(R)=>this.#S(W,R));break}}}#R(Z,W,J){let X=Z.get(W);if(J>0)if(X)X.delay=J;else Z.set(W,{delay:J});else if(X){let{timeout:Q}=X;if(Q)cJ(Q);Z.delete(W)}}#S(Z,W){let{currentTarget:J,type:X}=W,{debouncers:Q,throttles:K}=J[pZ],G=BQ(J),{prevent_default:V,stop_propagation:Y,include:H}=Z;if(V.kind===FJ)W.preventDefault();if(Y.kind===FJ)W.stopPropagation();if(X==="submit")W.detail??={},W.detail.formData=[...new FormData(W.target,W.submitter).entries()];let M=this.#Q(W,G,X,H),F=K.get(X);if(F){let B=Date.now(),N=F.last||0;if(B>N+F.delay)F.last=B,F.lastEvent=W,this.#J(W,M)}let R=Q.get(X);if(R)cJ(R.timeout),R.timeout=FQ(()=>{if(W===K.get(X)?.lastEvent)return;this.#J(W,M)},R.delay);if(!F&&!R)this.#J(W,M)}}var qW=(Z,W)=>{if(Array.isArray(Z))for(let J=0;J<Z.length;J++)W(Z[J]);else if(Z)for(Z;Z.head;Z=Z.tail)W(Z.head)},pJ=(Z)=>{let{currentTarget:W,type:J}=Z;W[pZ].handlers.get(J)(Z)},J0=(Z)=>{return{added(W){W[Z]=!0},removed(W){W[Z]=!1}}},AQ=(Z)=>{return{added(W,J){W[Z]=J}}},X0={checked:J0("checked"),selected:J0("selected"),value:AQ("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(W){console.error(W)}}}};function PQ(Z,W,J){while(!0){let X=Z,Q=W,K=J;if(X instanceof I)return[Q,s(K)];else{let G=X.tail,V=X.head[0],Y=X.head[1],H=F9(V,Y),M;if(V==="")M=Q;else M=HW(Q,V,H);let F=M,R=U(H,K);Z=G,W=F,J=R}}}function sJ(Z){return PQ(Z,FZ(),x)}function K0(Z,W,J){let X=sJ(J),Q,K;return Q=X[0],K=X[1],Z6("",i,"",Z,W,K,Q,!1,eW(Z,""))}function G0(Z,W,J,X){let Q=sJ(X),K,G;return K=Q[0],G=Q[1],Z6("",i,Z,W,J,G,K,!1,eW(W,Z))}function V0(Z){let W=sJ(Z),J,X;return J=W[0],X=W[1],NJ("",i,X,J)}var Y0=(Z)=>{let W=dZ(MW,null,Z,0,null),J=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(H0(G))J+=1;if(J===0){let G=OZ().createTextNode("");return dZ(xW,W,G,0,null),Z.replaceChildren(G),P9()}if(J===1)return rJ(W,Z).head[1];let X=OZ().createTextNode(""),Q=dZ(CZ,W,X,0,null),K=rJ(Q,Z);return Z.insertBefore(X,Z.firstChild),V0(K)},H0=(Z)=>{switch(Z.nodeType){case j6:return!0;case QJ:return!!Z.data;default:return!1}},SQ=(Z,W,J,X)=>{if(!H0(W))return null;switch(W.nodeType){case j6:{let Q=dZ(MW,Z,W,X,J),K=W.localName,G=W.namespaceURI,V=!G||G===O6;if(V&&TQ.includes(K))LQ(K,W);let Y=CQ(W),H=rJ(Q,W);return V?K0(K,Y,H):G0(G,K,Y,H)}case QJ:return dZ(xW,Z,W,X,null),W6(W.data);default:return null}},TQ=["input","select","textarea"],LQ=(Z,W)=>{let{value:J,checked:X}=W;if(Z==="input"&&W.type==="checkbox"&&!X)return;if(Z==="input"&&W.type==="radio"&&!X)return;if(W.type!=="checkbox"&&W.type!=="radio"&&!J)return;queueMicrotask(()=>{if(W.value=J,W.checked=X,W.dispatchEvent(new Event("input",{bubbles:!0})),W.dispatchEvent(new Event("change",{bubbles:!0})),OZ().activeElement!==W)W.dispatchEvent(new Event("blur",{bubbles:!0}))})},rJ=(Z,W)=>{let J=null,X=W.firstChild,Q=null,K=0;while(X){let G=X.nodeType===j6?X.getAttribute("data-lustre-key"):null;if(G!=null)X.removeAttribute("data-lustre-key");let V=SQ(Z,X,G,K),Y=X.nextSibling;if(V){let H=new DZ([G??"",V],null);if(Q)Q=Q.tail=H;else Q=J=H;K+=1}else W.removeChild(X);X=Y}if(!Q)return x;return Q.tail=x,J},CQ=(Z)=>{let W=Z.attributes.length,J=x;while(W-- >0){let X=Z.attributes[W];if(X.name==="xmlns")continue;J=new DZ(wQ(X),J)}return J},wQ=(Z)=>{let{localName:W,value:J}=Z;return lZ(W,J)};var Q6=()=>!!OZ();class g6{constructor(Z,[W,J],X,Q){this.root=Z,this.#Z=W,this.#Q=X,this.#J=Q,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#G.has(V.context))return;V.stopImmediatePropagation();let Y=this.#G.get(V.context);if(V.subscribe){let H=()=>{Y.subscribers=Y.subscribers.filter((M)=>M!==V.callback)};Y.subscribers.push([V.callback,H]),V.callback(Y.value,H)}else V.callback(Y.value)});let K=(V,Y,H)=>SJ(this.#W,Y,H,V),G=(V,Y)=>{let[H,M]=TJ(this.#W,Y);if(this.#W=H,M.isOk()){let F=M[0];if(F.stop_propagation)V.stopPropagation();if(F.prevent_default)V.preventDefault();this.dispatch(F.message,!1)}};this.#K=new dJ(this.root,K,G),this.#X=Y0(this.root),this.#W=PJ(),this.#q(J),this.#z()}root=null;dispatch(Z,W=!1){if(this.#Y)this.#F.push(Z);else{let[J,X]=this.#J(this.#Z,Z);this.#Z=J,this.#U(X,W)}}emit(Z,W){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:W,bubbles:!0,composed:!0}))}provide(Z,W){if(!this.#G.has(Z))this.#G.set(Z,{value:W,subscribers:[]});else{let J=this.#G.get(Z);if(wZ(J.value,W))return;J.value=W;for(let X=J.subscribers.length-1;X>=0;X--){let[Q,K]=J.subscribers[X];if(!Q){J.subscribers.splice(X,1);continue}Q(W,K)}}}#Z;#Q;#J;#X;#W;#K;#G=new Map;#Y=!1;#F=[];#H=x;#M=x;#V=null;#I={dispatch:(Z)=>this.dispatch(Z),emit:(Z,W)=>this.emit(Z,W),select:()=>{},root:()=>this.root,provide:(Z,W)=>this.provide(Z,W)};#U(Z,W=!1){if(this.#q(Z),!this.#V)if(W)this.#V="sync",queueMicrotask(()=>this.#z());else this.#V=requestAnimationFrame(()=>this.#z())}#q(Z){this.#Y=!0;while(!0){for(let J=Z.synchronous;J.tail;J=J.tail)J.head(this.#I);if(this.#H=F0(this.#H,Z.before_paint),this.#M=F0(this.#M,Z.after_paint),!this.#F.length)break;let W=this.#F.shift();[this.#Z,Z]=this.#J(this.#Z,W)}this.#Y=!1}#z(){this.#V=null;let Z=this.#Q(this.#Z),{patch:W,events:J}=bW(this.#W,this.#X,Z);if(this.#W=J,this.#X=Z,this.#K.push(W),this.#H instanceof DZ){let X=M0(this.#H);this.#H=x,queueMicrotask(()=>{this.#U(X,!0)})}if(this.#M instanceof DZ){let X=M0(this.#M);this.#M=x,requestAnimationFrame(()=>{this.#U(X,!0)})}}}function M0(Z){return{synchronous:Z,after_paint:x,before_paint:x}}function F0(Z,W){if(Z instanceof I)return W;else if(W instanceof I)return Z;else return iZ(Z,W)}class nJ extends z{constructor(Z){super();this.message=Z}}class lJ extends z{constructor(Z){super();this.callback=Z}}class aJ extends z{constructor(Z){super();this.callback=Z}}class oZ extends z{constructor(Z){super();this.message=Z}}class zW extends z{constructor(Z,W){super();this.name=Z,this.data=W}}class f6 extends z{constructor(Z,W){super();this.key=Z,this.value=W}}class RW extends z{}class q0 extends z{constructor(Z,W,J,X,Q,K,G,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=W,this.delegates_focus=J,this.attributes=X,this.properties=Q,this.contexts=K,this.is_form_associated=G,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function z0(Z){let W=new q0(!0,!0,!1,x,x,x,!1,D6,D6,D6);return o(Z,W,(J,X)=>{return X.apply(J)})}class I0{#Z;constructor(Z,[W,J],X,Q){this.#Z=new g6(Z,[W,J],Q,X)}send(Z){switch(Z.constructor){case oZ:{this.dispatch(Z.message,!1);break}case zW:{this.emit(Z.name,Z.data);break}case RW:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,W){this.#Z.emit(Z,W)}}var N0=({init:Z,update:W,view:J},X,Q)=>{if(!Q6())return new k(new K6);let K=X instanceof HTMLElement?X:OZ().querySelector(X);if(!K)return new k(new oJ(X));return new C(new I0(K,Z(Q),W,J))};class EQ{#Z;#Q;#J;#X;#W;#K;#G=IZ();#Y=new Set;constructor([Z,W],J,X,Q){this.#Z=Z,this.#Q=J,this.#J=X,this.#X=Q,this.#W=this.#J(this.#Z),this.#K=B9(this.#W),this.#V(W)}send(Z){switch(Z.constructor){case nJ:{let{message:W}=Z,J=this.#F(W),X=bW(this.#K,this.#W,J);this.#W=J,this.#K=X.events,this.broadcast($J(X.patch));return}case lJ:{let{callback:W}=Z;this.#Y.add(W),W(r9(this.#X.open_shadow_root,this.#X.adopt_styles,dW(this.#X.attributes),dW(this.#X.properties),dW(this.#X.contexts),this.#G,this.#W));return}case aJ:{let{callback:W}=Z;this.#Y.delete(W);return}case oZ:{let{message:W}=Z,[J,X]=this.#Q(this.#Z,W),Q=this.#J(J),K=bW(this.#K,this.#W,Q);this.#V(X),this.#Z=J,this.#W=Q,this.#K=K.events,this.broadcast($J(K.patch));return}case zW:{let{name:W,data:J}=Z;this.broadcast(i9(W,J));return}case f6:{let{key:W,value:J}=Z,X=ZZ(this.#G,W);if(X.isOk()&&wZ(X[0],J))return;this.#G=NZ(this.#G,W,J),this.broadcast(n9(W,J));return}case RW:{this.#Z=null,this.#Q=null,this.#J=null,this.#X=null,this.#W=null,this.#K=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let W of this.#Y)W(Z)}#F(Z){switch(Z.constructor){case E6:{let{messages:W}=Z,J=this.#Z,X=CW();for(let Q=W;Q.head;Q=Q.tail){let K=this.#F(Q.head);if(K instanceof C){J=K[0][0],X=G9(GZ.fromArray([X,K[0][1]]));break}}return this.#V(X),this.#Z=J,this.#J(this.#Z)}case x6:{let{name:W,value:J}=Z,X=this.#H(W,J);if(X instanceof k)return this.#W;else{let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}case k6:{let{name:W,value:J}=Z,X=this.#M(W,J);if(X instanceof k)return this.#W;else{let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}case y6:{let{path:W,name:J,event:X}=Z,[Q,K]=LJ(this.#K,W,J,X);if(this.#K=Q,K instanceof k)return this.#W;else{let[G,V]=this.#Q(this.#Z,K[0].message);return this.#V(V),this.#Z=G,this.#J(this.#Z)}}case mJ:{let{key:W,value:J}=Z,X=ZZ(this.#X.contexts,W);if(X instanceof k)return this.#W;if(X=nZ(J,X[0]),X instanceof k)return this.#W;let[Q,K]=this.#Q(this.#Z,X[0]);return this.#V(K),this.#Z=Q,this.#J(this.#Z)}}}#H(Z,W){let J=ZZ(this.#X.attributes,Z);switch(J.constructor){case C:return J[0](W);case k:return new k(void 0)}}#M(Z,W){let J=ZZ(this.#X.properties,Z);switch(J.constructor){case C:return J[0](W);case k:return new k(void 0)}}#V(Z){let W=(G)=>this.send(new oZ(G)),J=(G,V)=>this.send(new zW(G,V)),X=()=>{return},Q=()=>{return},K=(G,V)=>this.send(new f6(G,V));globalThis.queueMicrotask(()=>{Q9(Z,W,J,X,Q,K)})}}class O0 extends z{constructor(Z,W,J,X){super();this.init=Z,this.update=W,this.view=J,this.config=X}}class oJ extends z{constructor(Z){super();this.selector=Z}}class K6 extends z{}function j0(Z,W,J){return new O0(Z,W,J,z0(x))}function D0(Z,W,J){return u8(!Q6(),new k(new K6),()=>{return N0(Z,W,J)})}function B0(Z,W){return t8(Z,cW(W,(J)=>{return new nW(!1,!1,J)}),x,MJ,MJ,0,0)}function tJ(Z){return B0("click",q6(Z))}function A0(Z){return B0("input",w8(O(["target","value"]),z6,(W)=>{return q6(Z(W))}))}function P0(Z,W){window.setTimeout(W,Z)}var bQ="src/tachyon.gleam";class YZ extends z{constructor(Z){super();this[0]=Z}}class V6 extends z{constructor(Z){super();this[0]=Z}}class eJ extends z{constructor(Z,W,J,X,Q,K){super();this.in=Z,this.curr_b=W,this.lines_todo=J,this.lines_done=X,this.on_index=Q,this.count=K}}class Y6 extends z{constructor(Z,W){super();this.millisec=Z,this.index=W}}class Z8 extends z{constructor(Z){super();this[0]=Z}}class S0 extends z{constructor(Z){super();this[0]=Z}}class W8 extends z{constructor(Z){super();this[0]=Z}}class J8 extends z{constructor(Z){super();this[0]=Z}}class X8 extends z{}class T0 extends z{}function G6(Z){return K9((W)=>{return P0(Z.millisec,()=>{return W(new W8(Z))})})}function h6(Z,W,J){return new eJ(Z,J,(()=>{return P8(Z,`
`)})(),O([]),W,0)}function gQ(Z){let W=0,J=h6(Z,W,new YZ(YW())),X=ZW(3000,$W(J.lines_todo));return[J,G6(new Y6(X,W))]}function fQ(Z,W){if(W instanceof YZ){let J=W[0],X=o((()=>{return GW(Z)})(),[YW(),0,0],(Q,K)=>{let G=Q[1]+1,V=Q[0],Y=Q[2],H;if((()=>{return JJ(J,G)})())if(K==="^")H=[(()=>{let A=v8(V,G),j=PW(A,G+1);return PW(j,G-1)})(),Y+1];else H=[(()=>{return PW(V,G)})(),Y];else{let N;if(K==="S")N=PW(V,G);else if(K==="s")N=PW(V,G);else N=V;H=[N,Y]}let F=H,R,B;return R=F[0],B=F[1],[R,G,B]});return[new YZ(X[0]),new Z8(X[2])]}else{let J=W[0],X=o((()=>{return GW(Z)})(),[IZ(),0],(K,G)=>{let V=K[1]+1,Y=K[0],H,M=(()=>{return ZZ(J,V)})();if(M instanceof C){let R=M[0];if(G==="^"){let B=V-1,N,A=(()=>{return ZZ(Y,B)})();if(A instanceof C)N=A[0]+R;else N=R;let j=N,P=V+1,D,S=(()=>{return ZZ(Y,P)})();if(S instanceof C)D=S[0]+R;else D=R;let w=D,T=NZ(Y,B,j),L=NZ(T,P,w);H=R6(L,V)}else{let B,N=(()=>{return ZZ(Y,V)})();if(N instanceof C)B=N[0]+R;else B=R;H=NZ(Y,V,B)}}else if(G==="S")H=NZ(Y,V,1);else if(G==="s")H=NZ(Y,V,1);else H=Y;return[H,V]}),Q=pW(X[0],0,(K,G,V)=>{return K+V});return[new V6(X[0]),new S0(Q)]}}function hQ(Z,W){if(W instanceof W8){let J=W[0];if(J.index===Z.on_index){let Q=Z.lines_todo;if(Q instanceof I)return[Z,CW()];else{let{head:K,tail:G}=Q,V=fQ(K,Z.curr_b),Y,H;Y=V[0],H=V[1];let M=o((()=>{return GW(K)})(),["",0],(N,A)=>{let j=N[1]+1,P;if(A==="S")P=A;else if(A==="s")P=A;else if(Y instanceof YZ){let S=Y[0];if((()=>{return JJ(S,j)})())P="|";else P=A}else{let S=Y[0],w=(()=>{return ZZ(S,j)})();if(w instanceof C){let q=w[0];P="|"}else P=A}let D=P;return[N[0]+D,j]})[0],F,R=Z.lines_done;F=iZ(R,O([M]));let B=F;return[new eJ(Z.in,Y,G,B,Z.on_index,(()=>{if(H instanceof Z8){let N=H[0];return Z.count+N}else return H[0]})()),G6(J)]}}else return[Z,CW()]}else if(W instanceof J8){let J=W[0],X=Z.on_index+1,Q=h6(J,X,(()=>{if(Z.curr_b instanceof YZ)return new YZ(YW());else return new V6(IZ())})()),K=ZW(3000,$W(Q.lines_todo));return[Q,G6(new Y6(K,X))]}else if(W instanceof X8){let J=Z.on_index+1,X=h6(Z.in,J,(()=>{if(Z.curr_b instanceof YZ)return new V6(IZ());else return new YZ(YW())})()),Q=ZW(3000,$W(X.lines_todo));return[X,G6(new Y6(Q,J))]}else{let J=Z.on_index+1,X=h6(Z.in,J,(()=>{if(Z.curr_b instanceof YZ)return new YZ(YW());else return new V6(IZ())})()),Q=ZW(3000,$W(X.lines_todo));return[X,G6(new Y6(Q,J))]}}function _Q(Z){return S9(O([KZ("display","flex"),KZ("flex-direction","column"),KZ("gap","5px")]),O([T9(O([]),O([w6(O([A6("/")]),O([cZ("Correct Arity")]))])),L9(O([]),O([w6(O([A6("https://adventofcode.com/2025/day/7")]),O([cZ("Advent of Code day 7")])),cZ(" visualization: (quantum) particle splitting")])),cZ((()=>{if(Z.curr_b instanceof YZ)return"split count: ";else return"timeline count: "})()+(()=>{let W=Z.count;return _Z(W)})()),wJ(O([tJ(new X8),KZ("width","235px"),KZ("padding","3px")]),O([cZ((()=>{if(Z.curr_b instanceof YZ)return"Enable Quantum Tachyon Manifold";else return"Disable Quantum Tachyon Manifold"})())])),CJ(O([KZ("display","flex"),KZ("flex-wrap","wrap"),KZ("gap","8px")]),O([w9(O([W9("input"),KZ("height","260px"),KZ("width","130px"),A0((W)=>{return new J8(W)})]),Z.in),C9(O([KZ("margin-top","0px"),(()=>{if(Z.curr_b instanceof YZ)return KZ("border","1px solid #2f2f2f");else return J9(O([["border","1px solid #a6f0fc"],["box-shadow","0 0 50px #a6f0fc"]]))})()]),O([cZ((()=>{let W=Z.lines_done,J=iZ(W,Z.lines_todo);return U6(J,`
`)})())]))])),CJ(O([]),O([wJ(O([tJ(new T0),KZ("width","fit-content"),KZ("margin","5px")]),O([cZ("Replay")])),w6(O([A6("https://github.com/D-matz/day25tachyon/blob/main/src/tachyon.gleam")]),O([cZ("Source")]))]))]))}var vQ=`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;function L0(){let Z=j0(gQ,hQ,_Q),W=D0(Z,"#app",vQ);if(!(W instanceof C))throw m6("let_assert",bQ,"tachyon",19,"main","Pattern match failed, no pattern matched the value.",{value:W,start:514,end:570,pattern_start:525,pattern_end:530});return}L0();
