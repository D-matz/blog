class z{withFields(Z){let Q=Object.keys(this).map((W)=>(W in Z)?Z[W]:this[W]);return new this.constructor(...Q)}}class ZZ{static fromArray(Z,Q){let W=Q||new R;for(let J=Z.length-1;J>=0;--J)W=new GZ(Z[J],W);return W}[Symbol.iterator](){return new n6(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof R}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function F(Z,Q){return new GZ(Z,Q)}function j(Z,Q){return ZZ.fromArray(Z,Q)}class n6{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof R)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class R extends ZZ{}class GZ extends ZZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class lZ{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,W){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=W??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return yQ(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let W=this.bitSize%8;if(W){let J=8-W;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=yQ(this.rawBuffer,this.bitOffset,J),K=yQ(Z.rawBuffer,Z.bitOffset,J);if(X!==K)return!1}let W=this.bitSize%8;if(W){let J=yQ(this.rawBuffer,this.bitOffset,Q),X=yQ(Z.rawBuffer,Z.bitOffset,Q),K=8-W;if(J>>K!==X>>K)return!1}}return!0}get buffer(){if(r6("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(r6("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function yQ(Z,Q,W){if(Q===0)return Z[W]??0;else{let J=Z[W]<<Q&255,X=Z[W+1]>>8-Q;return J|X}}class bQ{constructor(Z){this.value=Z}}var s6={};function r6(Z,Q){if(s6[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),s6[Z]=!0}class qQ extends z{static isResult(Z){return Z instanceof qQ}}class C extends qQ{constructor(Z){super();this[0]=Z}isOk(){return!0}}class x extends qQ{constructor(Z){super();this[0]=Z}isOk(){return!1}}function QZ(Z,Q){let W=[Z,Q];while(W.length){let J=W.pop(),X=W.pop();if(J===X)continue;if(!i6(J)||!i6(X))return!1;if(!C9(J,X)||B9(J,X)||A9(J,X)||P9(J,X)||S9(J,X)||T9(J,X)||L9(J,X))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[V,Y]=D9(J),H=V(J),M=V(X);if(H.length!==M.length)return!1;for(let U of H)W.push(Y(J,U),Y(X,U))}return!0}function D9(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,W)=>Q.get(W)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(W)=>[...Q,...Object.keys(W)],(W,J)=>W[J]]}}function B9(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function A9(Z,Q){return!(Z instanceof lZ)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((W,J)=>W===Q[J]))}function P9(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function S9(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function T9(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((W)=>!Q.has(W)))}function L9(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function i6(Z){return typeof Z==="object"&&Z!==null}function C9(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function gQ(Z,Q){return Math.trunc(CW(Z,Q))}function CW(Z,Q){if(Q===0)return 0;else return Z/Q}function wW(Z,Q,W,J,X,K,G){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=Q,V.module=W,V.line=J,V.function=X,V.fn=X;for(let Y in G)V[Y]=G[Y];return V}var l6=new WeakMap,EW=new DataView(new ArrayBuffer(8)),xW=0;function kW(Z){let Q=l6.get(Z);if(Q!==void 0)return Q;let W=xW++;if(xW===2147483647)xW=0;return l6.set(Z,W),W}function yW(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function gW(Z){let Q=0,W=Z.length;for(let J=0;J<W;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function o6(Z){EW.setFloat64(0,Z);let Q=EW.getInt32(0),W=EW.getInt32(4);return Math.imul(73244475,Q>>16^Q)^W}function w9(Z){return gW(Z.toString())}function E9(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return kW(Z);if(Z instanceof Date)return o6(Z.getTime());let W=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)W=Math.imul(31,W)+UZ(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{W=W+UZ(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{W=W+yW(UZ(J),UZ(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let K=J[X],G=Z[K];W=W+yW(UZ(G),gW(K))|0}}return W}function UZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return o6(Z);case"string":return gW(Z);case"bigint":return w9(Z);case"object":return E9(Z);case"symbol":return kW(Z);case"function":return kW(Z);default:return 0}}var LZ=5,fW=Math.pow(2,LZ),x9=fW-1,k9=fW/2,y9=fW/4,WZ=0,TZ=1,VZ=2,aZ=3,hW={type:VZ,bitmap:0,array:[]};function fQ(Z,Q){return Z>>>Q&x9}function JW(Z,Q){return 1<<fQ(Z,Q)}function b9(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function _W(Z,Q){return b9(Z&Q-1)}function FZ(Z,Q,W){let J=Z.length,X=Array(J);for(let K=0;K<J;++K)X[K]=Z[K];return X[Q]=W,X}function g9(Z,Q,W){let J=Z.length,X=Array(J+1),K=0,G=0;while(K<Q)X[G++]=Z[K++];X[G++]=W;while(K<J)X[G++]=Z[K++];return X}function bW(Z,Q){let W=Z.length,J=Array(W-1),X=0,K=0;while(X<Q)J[K++]=Z[X++];++X;while(X<W)J[K++]=Z[X++];return J}function t6(Z,Q,W,J,X,K){let G=UZ(Q);if(G===J)return{type:aZ,hash:G,array:[{type:WZ,k:Q,v:W},{type:WZ,k:X,v:K}]};let V={val:!1};return hQ(vW(hW,Z,G,Q,W,V),Z,J,X,K,V)}function hQ(Z,Q,W,J,X,K){switch(Z.type){case TZ:return f9(Z,Q,W,J,X,K);case VZ:return vW(Z,Q,W,J,X,K);case aZ:return h9(Z,Q,W,J,X,K)}}function f9(Z,Q,W,J,X,K){let G=fQ(W,Q),V=Z.array[G];if(V===void 0)return K.val=!0,{type:TZ,size:Z.size+1,array:FZ(Z.array,G,{type:WZ,k:J,v:X})};if(V.type===WZ){if(QZ(J,V.k)){if(X===V.v)return Z;return{type:TZ,size:Z.size,array:FZ(Z.array,G,{type:WZ,k:J,v:X})}}return K.val=!0,{type:TZ,size:Z.size,array:FZ(Z.array,G,t6(Q+LZ,V.k,V.v,W,J,X))}}let Y=hQ(V,Q+LZ,W,J,X,K);if(Y===V)return Z;return{type:TZ,size:Z.size,array:FZ(Z.array,G,Y)}}function vW(Z,Q,W,J,X,K){let G=JW(W,Q),V=_W(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[V];if(Y.type!==WZ){let M=hQ(Y,Q+LZ,W,J,X,K);if(M===Y)return Z;return{type:VZ,bitmap:Z.bitmap,array:FZ(Z.array,V,M)}}let H=Y.k;if(QZ(J,H)){if(X===Y.v)return Z;return{type:VZ,bitmap:Z.bitmap,array:FZ(Z.array,V,{type:WZ,k:J,v:X})}}return K.val=!0,{type:VZ,bitmap:Z.bitmap,array:FZ(Z.array,V,t6(Q+LZ,H,Y.v,W,J,X))}}else{let Y=Z.array.length;if(Y>=k9){let H=Array(32),M=fQ(W,Q);H[M]=vW(hW,Q+LZ,W,J,X,K);let U=0,I=Z.bitmap;for(let D=0;D<32;D++){if((I&1)!==0){let B=Z.array[U++];H[D]=B}I=I>>>1}return{type:TZ,size:Y+1,array:H}}else{let H=g9(Z.array,V,{type:WZ,k:J,v:X});return K.val=!0,{type:VZ,bitmap:Z.bitmap|G,array:H}}}}function h9(Z,Q,W,J,X,K){if(W===Z.hash){let G=mW(Z,J);if(G!==-1){if(Z.array[G].v===X)return Z;return{type:aZ,hash:W,array:FZ(Z.array,G,{type:WZ,k:J,v:X})}}let V=Z.array.length;return K.val=!0,{type:aZ,hash:W,array:FZ(Z.array,V,{type:WZ,k:J,v:X})}}return hQ({type:VZ,bitmap:JW(Z.hash,Q),array:[Z]},Q,W,J,X,K)}function mW(Z,Q){let W=Z.array.length;for(let J=0;J<W;J++)if(QZ(Q,Z.array[J].k))return J;return-1}function WW(Z,Q,W,J){switch(Z.type){case TZ:return _9(Z,Q,W,J);case VZ:return v9(Z,Q,W,J);case aZ:return m9(Z,J)}}function _9(Z,Q,W,J){let X=fQ(W,Q),K=Z.array[X];if(K===void 0)return;if(K.type!==WZ)return WW(K,Q+LZ,W,J);if(QZ(J,K.k))return K;return}function v9(Z,Q,W,J){let X=JW(W,Q);if((Z.bitmap&X)===0)return;let K=_W(Z.bitmap,X),G=Z.array[K];if(G.type!==WZ)return WW(G,Q+LZ,W,J);if(QZ(J,G.k))return G;return}function m9(Z,Q){let W=mW(Z,Q);if(W<0)return;return Z.array[W]}function $W(Z,Q,W,J){switch(Z.type){case TZ:return $9(Z,Q,W,J);case VZ:return u9(Z,Q,W,J);case aZ:return c9(Z,J)}}function $9(Z,Q,W,J){let X=fQ(W,Q),K=Z.array[X];if(K===void 0)return Z;let G=void 0;if(K.type===WZ){if(!QZ(K.k,J))return Z}else if(G=$W(K,Q+LZ,W,J),G===K)return Z;if(G===void 0){if(Z.size<=y9){let V=Z.array,Y=Array(Z.size-1),H=0,M=0,U=0;while(H<X){let I=V[H];if(I!==void 0)Y[M]=I,U|=1<<H,++M;++H}++H;while(H<V.length){let I=V[H];if(I!==void 0)Y[M]=I,U|=1<<H,++M;++H}return{type:VZ,bitmap:U,array:Y}}return{type:TZ,size:Z.size-1,array:FZ(Z.array,X,G)}}return{type:TZ,size:Z.size,array:FZ(Z.array,X,G)}}function u9(Z,Q,W,J){let X=JW(W,Q);if((Z.bitmap&X)===0)return Z;let K=_W(Z.bitmap,X),G=Z.array[K];if(G.type!==WZ){let V=$W(G,Q+LZ,W,J);if(V===G)return Z;if(V!==void 0)return{type:VZ,bitmap:Z.bitmap,array:FZ(Z.array,K,V)};if(Z.bitmap===X)return;return{type:VZ,bitmap:Z.bitmap^X,array:bW(Z.array,K)}}if(QZ(J,G.k)){if(Z.bitmap===X)return;return{type:VZ,bitmap:Z.bitmap^X,array:bW(Z.array,K)}}return Z}function c9(Z,Q){let W=mW(Z,Q);if(W<0)return Z;if(Z.array.length===1)return;return{type:aZ,hash:Z.hash,array:bW(Z.array,W)}}function e6(Z,Q){if(Z===void 0)return;let W=Z.array,J=W.length;for(let X=0;X<J;X++){let K=W[X];if(K===void 0)continue;if(K.type===WZ){Q(K.v,K.k);continue}e6(K,Q)}}class o{static fromObject(Z){let Q=Object.keys(Z),W=o.new();for(let J=0;J<Q.length;J++){let X=Q[J];W=W.set(X,Z[X])}return W}static fromMap(Z){let Q=o.new();return Z.forEach((W,J)=>{Q=Q.set(J,W)}),Q}static new(){return new o(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let W=WW(this.root,0,UZ(Z),Z);if(W===void 0)return Q;return W.v}set(Z,Q){let W={val:!1},J=this.root===void 0?hW:this.root,X=hQ(J,0,UZ(Z),Z,Q,W);if(X===this.root)return this;return new o(X,W.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=$W(this.root,0,UZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return o.new();return new o(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return WW(this.root,0,UZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,W)=>Z.push([W,Q])),Z}forEach(Z){e6(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,W)=>{Z=Z+yW(UZ(Q),UZ(W))|0}),Z}equals(Z){if(!(Z instanceof o)||this.size!==Z.size)return!1;try{return this.forEach((Q,W)=>{if(!QZ(Z.get(W,!Q),Q))throw a6}),!0}catch(Q){if(Q===a6)return!1;throw Q}}}var a6=Symbol();class l extends z{}class a extends z{}class cZ extends z{}class JZ extends z{constructor(Z){super();this[0]=Z}}class YZ extends z{}function RQ(Z,Q,W){return XJ(Q,W,Z)}function d9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=F(X,J)}}}function s9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return d9(J,j([]));else{let X=W.tail,K=W.head[0];Z=X,Q=F(K,J)}}}function _Q(Z){return s9(WJ(Z),j([]))}function ZJ(Z,Q){return JJ(Q,Z)}class t extends z{}class IQ extends z{}function i9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else Z=W.tail,Q=J+1}}function uW(Z){return i9(Z,0)}function vQ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=F(X,J)}}}function s(Z){return vQ(Z,j([]))}function n9(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return s(K);else{let G=J.head;Z=J.tail,Q=X,W=F(X(G),K)}}}function ZQ(Z,Q){return n9(Z,Q,j([]))}function l9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=F(X,J)}}}function pZ(Z,Q){return l9(s(Z),Q)}function XW(Z,Q){return F(Q,Z)}function e(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return X;else{let G=J.head;Z=J.tail,Q=K(X,G),W=K}}}function a9(Z,Q,W,J,X,K){while(!0){let G=Z,V=Q,Y=W,H=J,M=X,U=K,I=F(M,Y);if(G instanceof R)if(H instanceof t)return F(s(I),U);else return F(I,U);else{let{head:D,tail:B}=G,A=V(M,D);if(H instanceof t)if(A instanceof l)Z=B,Q=V,W=I,J=H,X=D,K=U;else if(A instanceof a)Z=B,Q=V,W=I,J=H,X=D,K=U;else{let N;if(H instanceof t)N=F(s(I),U);else N=F(I,U);let T=N;if(B instanceof R)return F(j([D]),T);else{let{head:O,tail:P}=B,w,q=V(D,O);if(q instanceof l)w=new t;else if(q instanceof a)w=new t;else w=new IQ;let S=w;Z=P,Q=V,W=j([D]),J=S,X=O,K=T}}else if(A instanceof l){let N;if(H instanceof t)N=F(s(I),U);else N=F(I,U);let T=N;if(B instanceof R)return F(j([D]),T);else{let{head:O,tail:P}=B,w,q=V(D,O);if(q instanceof l)w=new t;else if(q instanceof a)w=new t;else w=new IQ;let S=w;Z=P,Q=V,W=j([D]),J=S,X=O,K=T}}else if(A instanceof a){let N;if(H instanceof t)N=F(s(I),U);else N=F(I,U);let T=N;if(B instanceof R)return F(j([D]),T);else{let{head:O,tail:P}=B,w,q=V(D,O);if(q instanceof l)w=new t;else if(q instanceof a)w=new t;else w=new IQ;let S=w;Z=P,Q=V,W=j([D]),J=S,X=O,K=T}}else Z=B,Q=V,W=I,J=H,X=D,K=U}}}function o9(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof R)return vQ(K,V);else if(K instanceof R)return vQ(X,V);else{let{head:Y,tail:H}=X,M=K.head,U=K.tail,I=G(Y,M);if(I instanceof l)Z=H,Q=K,W=G,J=F(Y,V);else if(I instanceof a)Z=X,Q=U,W=G,J=F(M,V);else Z=X,Q=U,W=G,J=F(M,V)}}}function t9(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return s(K);else{let G=J.tail;if(G instanceof R){let V=J.head;return s(F(s(V),K))}else{let V=J.head,Y=G.head,H=G.tail,M=o9(V,Y,X,j([]));Z=H,Q=X,W=F(M,K)}}}}function e9(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof R)return vQ(K,V);else if(K instanceof R)return vQ(X,V);else{let{head:Y,tail:H}=X,M=K.head,U=K.tail,I=G(Y,M);if(I instanceof l)Z=X,Q=U,W=G,J=F(M,V);else if(I instanceof a)Z=H,Q=K,W=G,J=F(Y,V);else Z=H,Q=K,W=G,J=F(Y,V)}}}function Z0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return s(K);else{let G=J.tail;if(G instanceof R){let V=J.head;return s(F(s(V),K))}else{let V=J.head,Y=G.head,H=G.tail,M=e9(V,Y,X,j([]));Z=H,Q=X,W=F(M,K)}}}}function Q0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return J;else if(X instanceof t)if(J.tail instanceof R)return J.head;else Z=t9(J,K,j([])),Q=new IQ,W=K;else if(J.tail instanceof R){let V=J.head;return s(V)}else Z=Z0(J,K,j([])),Q=new t,W=K}}function KJ(Z,Q){if(Z instanceof R)return Z;else{let W=Z.tail;if(W instanceof R)return Z;else{let J=Z.head,X=W.head,K=W.tail,G,V=Q(J,X);if(V instanceof l)G=new t;else if(V instanceof a)G=new t;else G=new IQ;let Y=G,H=a9(K,Q,j([J]),Y,X,j([]));return Q0(H,new t,Q)}}}function GJ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return;else{let{head:X,tail:K}=W;J(X),Z=K,Q=J}}}function H0(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=J+X}}}function UJ(Z){return H0(Z,"")}function M0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return K;else{let G=J.head;Z=J.tail,Q=X,W=K+X+G}}}function KW(Z,Q){if(Z instanceof R)return"";else{let{head:W,tail:J}=Z;return M0(J,Q,W)}}function FJ(Z,Q){if(Q==="")return NQ(Z);else{let J=d(Z),X=cW(J,Q);return ZQ(X,d)}}class OQ extends z{constructor(Z,Q,W){super();this.expected=Z,this.found=Q,this.path=W}}class WQ extends z{constructor(Z){super();this.function=Z}}function dZ(Z,Q){let W=Q.function(Z),J,X;if(J=W[0],X=W[1],X instanceof R)return new C(J);else return new x(X)}function sW(Z){return new WQ((Q)=>{return[Z,j([])]})}function $Q(Z,Q){return new WQ((W)=>{let J=Z.function(W),X,K;return X=J[0],K=J[1],[Q(X),K]})}function z0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(K instanceof R)return X;else{let{head:G,tail:V}=K,Y=G.function(J),H,M;if(H=Y,M=Y[1],M instanceof R)return H;else Z=J,Q=X,W=V}}}function IJ(Z,Q){return new WQ((W)=>{let J=Z.function(W),X,K;if(X=J,K=J[1],K instanceof R)return X;else return z0(W,X,Q)})}function NJ(Z,Q,W){let J=W(Z);if(J instanceof C)return[J[0],j([])];else return[J[0],j([new OQ(Q,zQ(Z),j([]))])]}function I0(Z){return NJ(Z,"Int",BJ)}var OJ=new WQ(I0);function N0(Z){return NJ(Z,"String",AJ)}var GW=new WQ(N0);function dW(Z,Q){let W=IJ(GW,j([(()=>{return $Q(OJ,bZ)})()])),J=ZQ(Q,(K)=>{let G=d(K),V=dZ(G,W);if(V instanceof C)return V[0];else return"<"+zQ(G)+">"}),X=ZQ(Z[1],(K)=>{return new OQ(K.expected,K.found,pZ(J,K.path))});return[Z[0],X]}function O0(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(K instanceof R){let U=V(Y);return dW(U,s(G))}else{let{head:M,tail:U}=K,I=DJ(Y,M);if(I instanceof C){let D=I[0];if(D instanceof JZ){let B=D[0];Z=U,Q=F(M,G),W=V,J=B,X=H}else return H(Y,F(M,G))}else{let D=I[0],B=V(Y),A;A=B[0];let N=[A,j([new OQ(D,zQ(Y),j([]))])];return dW(N,s(G))}}}}function jJ(Z,Q,W){return new WQ((J)=>{let X=O0(Z,j([]),Q.function,J,(M,U)=>{let I=Q.function(M),D;D=I[0];let B=[D,j([new OQ("Field","Nothing",j([]))])];return dW(B,s(U))}),K,G;K=X[0],G=X[1];let V=W(K).function(J),Y,H;return Y=V[0],H=V[1],[Y,pZ(G,H)]})}var j0=void 0,PJ={};function d(Z){return Z}function bZ(Z){return Z.toString()}function NQ(Z){let Q=D0(Z);if(Q)return ZZ.fromArray(Array.from(Q).map((W)=>W.segment));else return ZZ.fromArray(Z.match(/./gsu))}var SJ=void 0;function D0(Z){if(globalThis.Intl&&Intl.Segmenter)return SJ||=new Intl.Segmenter,SJ.segment(Z)[Symbol.iterator]()}function cW(Z,Q){return ZZ.fromArray(Z.split(Q))}function pW(Z,Q){return Z.startsWith(Q)}var TJ=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),e7=new RegExp(`^[${TJ}]*`),ZK=new RegExp(`[${TJ}]*$`);function eZ(){return o.new()}function WJ(Z){return ZZ.fromArray(Z.entries())}function JJ(Z,Q){return Q.delete(Z)}function wZ(Z,Q){let W=Z.get(Q,PJ);if(W===PJ)return new x(j0);return new C(W)}function XJ(Z,Q,W){return W.set(Z,Q)}function zQ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof qQ)return"Result";else if(Z instanceof ZZ)return"List";else if(Z instanceof lZ)return"BitArray";else if(Z instanceof o)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function LJ(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let W=Q.indexOf("e");if(W>=0)return Q.slice(0,W)+".0"+Q.slice(W);else return Q+".0"}}class B0{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#K(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return LJ(Z);if(Z instanceof bQ)return this.#G(Z);if(Z instanceof lZ)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let W;if(Array.isArray(Z))W=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof ZZ)W=this.#Q(Z);else if(Z instanceof z)W=this.#J(Z);else if(Z instanceof o)W=this.#W(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else W=this.#X(Z);return this.#Z.delete(Z),W}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",W=[];for(let K of Object.keys(Z))W.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let J=W.length?" "+W.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#W(Z){let Q="dict.from_list([",W=!0;return Z.forEach((J,X)=>{if(!W)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",W=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((W)=>{let J=this.inspect(Z[W]);return isNaN(parseInt(W))?`${W}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof R)return"[]";let Q='charlist.from_string("',W="[",J=Z;while(J instanceof GZ){let X=J.head;if(J=J.tail,W!=="[")W+=", ";if(W+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return W+"]"}#K(Z){let Q='"';for(let W=0;W<Z.length;W++){let J=Z[W];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let W=0;W<Z.byteSize-1;W++)Q+=Z.byteAt(W).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let W=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-W,Q+=`:size(${W})`}return Q+=">>",Q}}function DJ(Z,Q){if(Z instanceof o||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new C(new YZ);return new C(new JZ(X))}let W=Number.isInteger(Q);if(W&&Q>=0&&Q<8&&Z instanceof ZZ){let J=0;for(let X of Z){if(J===Q)return new C(new JZ(X));J++}return new x("Indexable")}if(W&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new C(new JZ(Z[Q]));return new C(new YZ)}return new x(W?"Indexable":"Dict")}function BJ(Z){if(Number.isInteger(Z))return new C(Z);return new x(0)}function AJ(Z){if(typeof Z==="string")return new C(Z);return new x("")}function CJ(Z){if(Z instanceof C)return!0;else return!1}class VW extends z{constructor(Z){super();this.dict=Z}}function YW(){return new VW(eZ())}function rW(Z,Q){let W=Z.dict,J=wZ(W,Q);return CJ(J)}function wJ(Z,Q){return new VW(ZJ(Z.dict,Q))}var A0=void 0;function DQ(Z,Q){return new VW(RQ(Z.dict,Q,A0))}function kJ(Z,Q,W){if(Z)return Q;else return W()}function i(Z){return Z}function uQ(Z){return Z}function cQ(Z){return uQ(Z)}var RZ=()=>globalThis?.document,MW="http://www.w3.org/1999/xhtml",UW=1,nW=3;var bJ=!!globalThis.HTMLElement?.prototype?.moveBefore;var E=j([]),FW=new YZ;var k0=new cZ,y0=new l,b0=new a;function qW(Z,Q){if(Z.name===Q.name)return b0;else if(Z.name<Q.name)return y0;else return k0}class kZ extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class pQ extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class KZ extends z{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.name=Q,this.handler=W,this.include=J,this.prevent_default=X,this.stop_propagation=K,this.debounce=G,this.throttle=V}}class dQ extends z{constructor(Z,Q,W){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=W}}class vJ extends z{constructor(Z){super();this.kind=Z}}function m0(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;if(X instanceof kZ){let K=X.name;if(K==="")Z=W.tail,Q=J;else if(K==="class"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof R){let Y=X;Z=V,Q=F(Y,J)}else{let Y=V.head;if(Y instanceof kZ)if(Y.name==="class"){let M=X.kind,U=G,I=V.tail,D=Y.value,B=U+" "+D,A=new kZ(M,"class",B);Z=F(A,I),Q=J}else{let M=X;Z=V,Q=F(M,J)}else{let H=X;Z=V,Q=F(H,J)}}}}else if(K==="style"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof R){let Y=X;Z=V,Q=F(Y,J)}else{let Y=V.head;if(Y instanceof kZ)if(Y.name==="style"){let M=X.kind,U=G,I=V.tail,D=Y.value,B=U+";"+D,A=new kZ(M,"style",B);Z=F(A,I),Q=J}else{let M=X;Z=V,Q=F(M,J)}else{let H=X;Z=V,Q=F(H,J)}}}}else{let G=X;Z=W.tail,Q=F(G,J)}}else{let K=X;Z=W.tail,Q=F(K,J)}}}}function mJ(Z){if(Z instanceof R)return Z;else if(Z.tail instanceof R)return Z;else{let J=KJ(Z,(X,K)=>{return qW(K,X)});return m0(J,E)}}var aW=0;function $J(Z,Q){return new kZ(aW,Z,Q)}var oW=1;function uJ(Z,Q){return new pQ(oW,Z,Q)}var tW=2;function cJ(Z,Q,W,J,X,K,G){return new KZ(tW,Z,Q,W,J,X,K,G)}var eW=0;var Z6=new vJ(eW);var Q6=2;function JQ(Z,Q){return $J(Z,Q)}function dJ(Z,Q){return uJ(Z,Q)}function pJ(Z){return JQ("class",Z)}function sJ(Z){return JQ("id",Z)}function zZ(Z,Q){if(Z==="")return pJ("");else if(Q==="")return pJ("");else return JQ("style",Z+":"+Q+";")}function rJ(Z){return JQ("href",Z)}class zW extends z{constructor(Z,Q,W){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=W}}class iJ extends z{constructor(Z,Q,W,J,X){super();this.dispatch=Z,this.emit=Q,this.select=W,this.root=J,this.provide=X}}function nJ(Z,Q,W,J,X,K){let G=new iJ(Q,W,J,X,K);return GJ(Z.synchronous,(V)=>{return V(G)})}var RW=new zW(j([]),j([]),j([]));function SQ(){return RW}function lJ(Z){return new zW(j([(W)=>{let J=W.dispatch;return Z(J)}]),RW.before_paint,RW.after_paint)}function aJ(Z){return e(Z,RW,(Q,W)=>{return new zW(e(W.synchronous,Q.synchronous,XW),e(W.before_paint,Q.before_paint,XW),e(W.after_paint,Q.after_paint,XW))})}function HZ(){return null}function sQ(Z,Q){let W=Z?.get(Q);if(W!=null)return new C(W);else return new x(void 0)}function rQ(Z,Q){return Z&&Z.has(Q)}function XQ(Z,Q,W){return Z??=new Map,Z.set(Q,W),Z}function W6(Z,Q){return Z?.delete(Q),Z}class J6 extends z{}class X6 extends z{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class oJ extends z{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function c0(Z,Q){while(!0){let W=Z,J=Q;if(J instanceof R)return!1;else{let{head:X,tail:K}=J,G=pW(W,X);if(G)return G;else Z=W,Q=K}}}function OZ(Z,Q,W){if(W==="")return new oJ(Q,Z);else return new X6(W,Z)}var IW=new J6,nQ="\t";function tJ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof J6)if(J instanceof R)return"";else{let X=J.tail;return UJ(X)}else if(W instanceof X6){let X=W.key;Z=W.parent,Q=F(nQ,F(X,J))}else{let X=W.index;Z=W.parent,Q=F(nQ,F(bZ(X),J))}}}function p0(Z){return tJ(Z,j([]))}function eJ(Z,Q){if(Q instanceof R)return!1;else return c0(p0(Z),Q)}var K6=`
`;function G6(Z,Q){return tJ(Z,j([K6,Q]))}class jZ extends z{constructor(Z,Q,W,J,X){super();this.kind=Z,this.key=Q,this.mapper=W,this.children=J,this.keyed_children=X}}class DZ extends z{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.children=G,this.keyed_children=V,this.self_closing=Y,this.void=H}}class BZ extends z{constructor(Z,Q,W,J){super();this.kind=Z,this.key=Q,this.mapper=W,this.content=J}}class LQ extends z{constructor(Z,Q,W,J,X,K,G){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.inner_html=G}}function lQ(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function Q8(Z,Q){if(Q instanceof jZ)return new jZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof DZ)return new DZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof BZ)return new BZ(Q.kind,Z,Q.mapper,Q.content);else return new LQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var AZ=0;function V6(Z,Q,W,J){return new jZ(AZ,Z,Q,W,J)}var KQ=1;function aQ(Z,Q,W,J,X,K,G,V,Y){return new DZ(KQ,Z,Q,W,J,mJ(X),K,G,V,Y)}var CQ=2;function Y6(Z,Q,W){return new BZ(CQ,Z,Q,W)}var W8=3;var H6=(Z,Q)=>Z===Q,PZ=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let W=typeof Z;if(W!==typeof Q)return!1;if(W!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return r0(Z,Q);return i0(Z,Q)},r0=(Z,Q)=>{let W=Z.length;if(W!==Q.length)return!1;while(W--)if(!PZ(Z[W],Q[W]))return!1;return!0},i0=(Z,Q)=>{let W=Object.keys(Z),J=W.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=W[J];if(!Object.hasOwn(Q,X))return!1;if(!PZ(Z[X],Q[X]))return!1}return!0};class fZ extends z{constructor(Z,Q,W){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=W}}class F6 extends z{constructor(Z,Q){super();this.path=Z,this.handler=Q}}class M6 extends z{constructor(Z){super();this.path=Z}}function q6(){return new fZ(HZ(),E,E)}function G8(Z){return new fZ(Z.handlers,Z.next_dispatched_paths,E)}function V8(Z,Q,W){return W6(Z,G6(Q,W))}function NW(Z,Q,W){let J=V8(Z.handlers,Q,W);return new fZ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function J8(Z,Q,W){return e(W,Z,(J,X)=>{if(X instanceof KZ){let K=X.name;return V8(J,Q,K)}else return J})}function R6(Z,Q,W,J){let X=sQ(Z.handlers,Q+K6+W);if(X instanceof C){let K=X[0],G=dZ(J,K);if(G instanceof C){let V=G[0];return new F6(Q,V)}else return new M6(Q)}else return new M6(Q)}function z6(Z,Q){let W=F(Q.path,Z.next_dispatched_paths),J=new fZ(Z.handlers,Z.dispatched_paths,W);if(Q instanceof F6){let X=Q.handler;return[J,new C(X)]}else return[J,new x(void 0)]}function I6(Z,Q,W,J){let X=R6(Z,Q,W,J);return((K)=>{return z6(Z,K)})(X)}function OW(Z,Q){return eJ(Q,Z.dispatched_paths)}function Y8(Z,Q,W,J,X){return XQ(Z,G6(W,J),$Q(X,(K)=>{return new dQ(K.prevent_default,K.stop_propagation,i(Q)(K.message))}))}function wQ(Z,Q,W,J,X){let K=Y8(Z.handlers,Q,W,J,X);return new fZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function X8(Z,Q,W,J){return e(J,Z,(X,K)=>{if(K instanceof KZ){let{name:G,handler:V}=K;return Y8(X,Q,W,G,V)}else return X})}function sZ(Z,Q){let W=H6(Z,i);if(H6(Q,i))return Z;else if(W)return Q;else return(X)=>{return Z(Q(X))}}function K8(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(V instanceof R)return X;else{let{head:Y,tail:H}=V;Z=H8(X,K,G,Y),Q=K,W=G+1,J=H}}}function H8(Z,Q,W,J){if(J instanceof jZ){let X=J.children,K=OZ(Q,W,J.key);return K8(Z,K,0,X)}else if(J instanceof DZ){let{attributes:X,children:K}=J,G=OZ(Q,W,J.key),Y=J8(Z,G,X);return K8(Y,G,0,K)}else if(J instanceof BZ)return Z;else{let X=J.attributes,K=OZ(Q,W,J.key);return J8(Z,K,X)}}function hZ(Z,Q,W,J){let X=H8(Z.handlers,Q,W,J);return new fZ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function U6(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(H instanceof R)return K;else{let{head:M,tail:U}=H;Z=M8(K,G,V,Y,M),Q=G,W=V,J=Y+1,X=U}}}function M8(Z,Q,W,J,X){if(X instanceof jZ){let K=X.children,G=OZ(W,J,X.key),V=sZ(Q,X.mapper);return U6(Z,V,G,0,K)}else if(X instanceof DZ){let{attributes:K,children:G}=X,V=OZ(W,J,X.key),Y=sZ(Q,X.mapper),M=X8(Z,Y,V,K);return U6(M,Y,V,0,G)}else if(X instanceof BZ)return Z;else{let K=X.attributes,G=OZ(W,J,X.key),V=sZ(Q,X.mapper);return X8(Z,V,G,K)}}function _Z(Z,Q,W,J,X){let K=M8(Z.handlers,Q,W,J,X);return new fZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function U8(Z){return _Z(q6(),i,IW,0,Z)}function F8(Z,Q,W,J,X){let K=U6(Z.handlers,Q,W,J,X);return new fZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function vZ(Z,Q,W){return aQ("",i,"",Z,Q,W,HZ(),!1,lQ(Z,""))}function oQ(Z){return Y6("",i,Z)}function q8(){return Y6("",i,"")}function jW(Z){return oQ(Z)}function R8(Z,Q){return vZ("body",Z,Q)}function z8(Z,Q){return vZ("h1",Z,Q)}function I8(Z,Q){return vZ("div",Z,Q)}function N8(Z,Q){return vZ("p",Z,Q)}function O8(Z,Q){return vZ("pre",Z,Q)}function j8(Z,Q){return vZ("a",Z,Q)}function D8(Z,Q){return vZ("textarea",F(dJ("value",cQ(Q)),Z),j([oQ(Q)]))}class eQ extends z{constructor(Z,Q,W,J){super();this.index=Z,this.removed=Q,this.changes=W,this.children=J}}class A8 extends z{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class P8 extends z{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class S8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.added=Q,this.removed=W}}class T8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.before=W}}class L8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.index=Q,this.with=W}}class C8 extends z{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class w8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.children=Q,this.before=W}}function N6(Z,Q,W,J){return new eQ(Z,Q,W,J)}var O6=0;function E8(Z){return new A8(O6,Z)}var j6=1;function x8(Z){return new P8(j6,Z)}var D6=2;function B6(Z,Q){return new S8(D6,Z,Q)}var A6=3;function k8(Z,Q){return new T8(A6,Z,Q)}var P6=4;function y8(Z){return new C8(P6,Z)}var S6=5;function VQ(Z,Q){return new L8(S6,Z,Q)}var T6=6;function L6(Z,Q){return new w8(T6,Z,Q)}class g8 extends z{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=W,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=K,this.provided_contexts=G,this.vdom=V}}class f8 extends z{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class h8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.data=W}}class _8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}class DW extends z{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class BW extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class AW extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class PW extends z{constructor(Z,Q,W,J){super();this.kind=Z,this.path=Q,this.name=W,this.event=J}}class C6 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}var o0=0;function v8(Z,Q,W,J,X,K,G){return new g8(o0,Z,Q,W,J,X,K,G)}var t0=1;function w6(Z){return new f8(t0,Z)}var e0=2;function m8(Z,Q){return new h8(e0,Z,Q)}var ZX=3;function $8(Z,Q){return new _8(ZX,Z,Q)}class SW extends z{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class p8 extends z{constructor(Z,Q,W){super();this.added=Z,this.removed=Q,this.events=W}}function QX(Z,Q,W,J){if(W==="input"&&Q==="")return OW(Z,J);else if(W==="select"&&Q==="")return OW(Z,J);else if(W==="textarea"&&Q==="")return OW(Z,J);else return!1}function c8(Z,Q,W,J,X,K,G,V){while(!0){let Y=Z,H=Q,M=W,U=J,I=X,D=K,B=G,A=V;if(I instanceof R)if(D instanceof R)return new p8(B,A,U);else{let N=D.head;if(N instanceof KZ){let T=N,O=D.tail,P=N.name,w=N.handler,q=F(T,B),S=wQ(U,M,H,P,w);Z=Y,Q=H,W=M,J=S,X=I,K=O,G=q,V=A}else{let T=N,O=D.tail,P=F(T,B);Z=Y,Q=H,W=M,J=U,X=I,K=O,G=P,V=A}}else if(D instanceof R){let N=I.head;if(N instanceof KZ){let T=N,O=I.tail,P=N.name,w=F(T,A),q=NW(U,H,P);Z=Y,Q=H,W=M,J=q,X=O,K=D,G=B,V=w}else{let T=N,O=I.tail,P=F(T,A);Z=Y,Q=H,W=M,J=U,X=O,K=D,G=B,V=P}}else{let{head:N,tail:T}=I,O=D.head,P=D.tail,w=qW(N,O);if(w instanceof l)if(N instanceof KZ){let q=N.name,S=F(N,A),L=NW(U,H,q);Z=Y,Q=H,W=M,J=L,X=T,K=D,G=B,V=S}else{let q=F(N,A);Z=Y,Q=H,W=M,J=U,X=T,K=D,G=B,V=q}else if(w instanceof a)if(N instanceof kZ)if(O instanceof kZ){let q,S=O.name;if(S==="value")q=Y||N.value!==O.value;else if(S==="checked")q=Y||N.value!==O.value;else if(S==="selected")q=Y||N.value!==O.value;else q=N.value!==O.value;let L=q,k;if(L)k=F(O,B);else k=B;let b=k;Z=Y,Q=H,W=M,J=U,X=T,K=P,G=b,V=A}else if(O instanceof KZ){let{name:q,handler:S}=O,L=F(O,B),k=F(N,A),b=wQ(U,M,H,q,S);Z=Y,Q=H,W=M,J=b,X=T,K=P,G=L,V=k}else{let q=F(O,B),S=F(N,A);Z=Y,Q=H,W=M,J=U,X=T,K=P,G=q,V=S}else if(N instanceof pQ)if(O instanceof pQ){let q,S=O.name;if(S==="scrollLeft")q=!0;else if(S==="scrollRight")q=!0;else if(S==="value")q=Y||!PZ(N.value,O.value);else if(S==="checked")q=Y||!PZ(N.value,O.value);else if(S==="selected")q=Y||!PZ(N.value,O.value);else q=!PZ(N.value,O.value);let L=q,k;if(L)k=F(O,B);else k=B;let b=k;Z=Y,Q=H,W=M,J=U,X=T,K=P,G=b,V=A}else if(O instanceof KZ){let{name:q,handler:S}=O,L=F(O,B),k=F(N,A),b=wQ(U,M,H,q,S);Z=Y,Q=H,W=M,J=b,X=T,K=P,G=L,V=k}else{let q=F(O,B),S=F(N,A);Z=Y,Q=H,W=M,J=U,X=T,K=P,G=q,V=S}else if(O instanceof KZ){let{name:q,handler:S}=O,L=N.prevent_default.kind!==O.prevent_default.kind||N.stop_propagation.kind!==O.stop_propagation.kind||N.debounce!==O.debounce||N.throttle!==O.throttle,k;if(L)k=F(O,B);else k=B;let b=k,f=wQ(U,M,H,q,S);Z=Y,Q=H,W=M,J=f,X=T,K=P,G=b,V=A}else{let q=N.name,S=F(O,B),L=F(N,A),k=NW(U,H,q);Z=Y,Q=H,W=M,J=k,X=T,K=P,G=S,V=L}else if(O instanceof KZ){let{name:q,handler:S}=O,L=F(O,B),k=wQ(U,M,H,q,S);Z=Y,Q=H,W=M,J=k,X=I,K=P,G=L,V=A}else{let q=F(O,B);Z=Y,Q=H,W=M,J=U,X=I,K=P,G=q,V=A}}}}function E6(Z,Q,W,J,X,K,G,V,Y,H,M,U,I,D){while(!0){let B=Z,A=Q,N=W,T=J,O=X,P=K,w=G,q=V,S=Y,L=H,k=M,b=U,f=I,n=D;if(B instanceof R)if(N instanceof R)return new SW(new eQ(S,w,k,b),n);else{let IZ=F8(n,f,L,q,N),MZ=L6(N,q-P),u=F(MZ,k);return new SW(new eQ(S,w,u,b),IZ)}else if(N instanceof R){let{head:IZ,tail:MZ}=B,u;if(IZ.key===""||!rQ(O,IZ.key))u=w+1;else u=w;let h=u,v=hZ(n,L,q,IZ);Z=MZ,Q=A,W=N,J=T,X=O,K=P,G=h,V=q,Y=S,H=L,M=k,U=b,I=f,D=v}else{let IZ=B.head,MZ=N.head;if(IZ.key!==MZ.key){let u=B.tail,c=N.tail,h=sQ(A,MZ.key);if(rQ(T,IZ.key))if(h instanceof C){let y=h[0];if(rQ(O,IZ.key))Z=u,Q=A,W=N,J=T,X=O,K=P-1,G=w,V=q,Y=S,H=L,M=k,U=b,I=f,D=n;else{let m=q-P,g=F(k8(MZ.key,m),k),p=XQ(O,MZ.key,void 0),$=P+1;Z=F(y,B),Q=A,W=N,J=T,X=p,K=$,G=w,V=q,Y=S,H=L,M=g,U=b,I=f,D=n}}else{let y=q-P,_=_Z(n,f,L,q,MZ),m=L6(j([MZ]),y),g=F(m,k);Z=B,Q=A,W=c,J=T,X=O,K=P+1,G=w,V=q+1,Y=S,H=L,M=g,U=b,I=f,D=_}else if(h instanceof C){let y=q-P,_=F(y8(y),k),m=hZ(n,L,q,IZ),g=P-1;Z=u,Q=A,W=N,J=T,X=O,K=g,G=w,V=q,Y=S,H=L,M=_,U=b,I=f,D=m}else{let y=VQ(q-P,MZ),_,g=hZ(n,L,q,IZ);_=_Z(g,f,L,q,MZ);let p=_;Z=u,Q=A,W=c,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=F(y,k),U=b,I=f,D=p}}else{let u=B.head;if(u instanceof jZ){let c=N.head;if(c instanceof jZ){let h=u,v=B.tail,y=c,_=N.tail,m=sZ(f,y.mapper),g=OZ(L,q,y.key),p=E6(h.children,h.keyed_children,y.children,y.keyed_children,HZ(),0,0,0,q,g,E,E,m,n),$,r=p.patch;if(r.changes instanceof R)if(r.children instanceof R)if(r.removed===0)$=b;else $=F(p.patch,b);else $=F(p.patch,b);else $=F(p.patch,b);let SZ=$;Z=v,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=k,U=SZ,I=f,D=p.events}else{let h=u,v=B.tail,y=c,_=N.tail,m=VQ(q-P,y),g,$=hZ(n,L,q,h);g=_Z($,f,L,q,y);let r=g;Z=v,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,k),U=b,I=f,D=r}}else if(u instanceof DZ){let c=N.head;if(c instanceof DZ){let h=u,v=c;if(h.namespace===v.namespace&&h.tag===v.tag){let y=B.tail,_=N.tail,m=sZ(f,v.mapper),g=OZ(L,q,v.key),p=QX(n,v.namespace,v.tag,g),$=c8(p,g,m,n,h.attributes,v.attributes,E,E),r,yZ,SZ;r=$.added,yZ=$.removed,SZ=$.events;let iZ;if(r instanceof R&&yZ instanceof R)iZ=E;else iZ=j([B6(r,yZ)]);let UQ=iZ,FQ=E6(h.children,h.keyed_children,v.children,v.keyed_children,HZ(),0,0,0,q,g,UQ,E,m,SZ),uZ,nZ=FQ.patch;if(nZ.changes instanceof R)if(nZ.children instanceof R)if(nZ.removed===0)uZ=b;else uZ=F(FQ.patch,b);else uZ=F(FQ.patch,b);else uZ=F(FQ.patch,b);let j9=uZ;Z=y,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=k,U=j9,I=f,D=FQ.events}else{let y=u,_=B.tail,m=c,g=N.tail,p=VQ(q-P,m),$,yZ=hZ(n,L,q,y);$=_Z(yZ,f,L,q,m);let SZ=$;Z=_,Q=A,W=g,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=F(p,k),U=b,I=f,D=SZ}}else{let h=u,v=B.tail,y=c,_=N.tail,m=VQ(q-P,y),g,$=hZ(n,L,q,h);g=_Z($,f,L,q,y);let r=g;Z=v,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,k),U=b,I=f,D=r}}else if(u instanceof BZ){let c=N.head;if(c instanceof BZ){let h=u,v=c;if(h.content===v.content){let y=B.tail,_=N.tail;Z=y,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=k,U=b,I=f,D=n}else{let y=B.tail,_=c,m=N.tail,g=N6(q,0,j([E8(_.content)]),E);Z=y,Q=A,W=m,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=k,U=F(g,b),I=f,D=n}}else{let h=u,v=B.tail,y=c,_=N.tail,m=VQ(q-P,y),g,$=hZ(n,L,q,h);g=_Z($,f,L,q,y);let r=g;Z=v,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,k),U=b,I=f,D=r}}else{let c=N.head;if(c instanceof LQ){let h=u,v=B.tail,y=c,_=N.tail,m=sZ(f,y.mapper),g=OZ(L,q,y.key),p=c8(!1,g,m,n,h.attributes,y.attributes,E,E),$,r,yZ;$=p.added,r=p.removed,yZ=p.events;let SZ;if($ instanceof R&&r instanceof R)SZ=E;else SZ=j([B6($,r)]);let iZ=SZ,UQ;if(h.inner_html===y.inner_html)UQ=iZ;else UQ=F(x8(y.inner_html),iZ);let uZ=UQ,nZ;if(uZ instanceof R)nZ=b;else nZ=F(N6(q,0,uZ,j([])),b);let d6=nZ;Z=v,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=k,U=d6,I=f,D=yZ}else{let h=u,v=B.tail,y=c,_=N.tail,m=VQ(q-P,y),g,$=hZ(n,L,q,h);g=_Z($,f,L,q,y);let r=g;Z=v,Q=A,W=_,J=T,X=O,K=P,G=w,V=q+1,Y=S,H=L,M=F(m,k),U=b,I=f,D=r}}}}}}function xQ(Z,Q,W){return E6(j([Q]),HZ(),j([W]),HZ(),HZ(),0,0,0,0,IW,E,E,i,G8(Z))}var{setTimeout:WX,clearTimeout:x6}=globalThis,JX=(Z,Q)=>RZ().createElementNS(Z,Q),XX=(Z)=>RZ().createTextNode(Z),KX=()=>RZ().createDocumentFragment(),kQ=(Z,Q,W)=>Z.insertBefore(Q,W),s8=bJ?(Z,Q,W)=>Z.moveBefore(Q,W):kQ,GX=(Z,Q)=>Z.removeChild(Q),VX=(Z,Q)=>Z.getAttribute(Q),r8=(Z,Q,W)=>Z.setAttribute(Q,W),YX=(Z,Q)=>Z.removeAttribute(Q),HX=(Z,Q,W,J)=>Z.addEventListener(Q,W,J),i8=(Z,Q,W)=>Z.removeEventListener(Q,W),MX=(Z,Q)=>Z.innerHTML=Q,UX=(Z,Q)=>Z.data=Q,mZ=Symbol("lustre");class a8{constructor(Z,Q,W,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=W,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===AZ?this.node.parentNode:this.node}}var $Z=(Z,Q,W,J,X)=>{let K=new a8(Z,Q,W,X);return W[mZ]=K,Q?.children.splice(J,0,K),K},FX=(Z)=>{let Q="";for(let W=Z[mZ];W.parent;W=W.parent)if(W.key)Q=`${nQ}${W.key}${Q}`;else{let J=W.parent.children.indexOf(W);Q=`${nQ}${J}${Q}`}return Q.slice(1)};class y6{#Z=null;#X;#W;#J=!1;constructor(Z,Q,W,{exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#W=W,this.#J=J}mount(Z){$Z(KQ,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[mZ],0,Z)}push(Z){this.#Q.push({node:this.#Z[mZ],patch:Z}),this.#K()}#Q=[];#K(){let Z=this.#Q;while(Z.length){let{node:Q,patch:W}=Z.pop(),{children:J}=Q,{changes:X,removed:K,children:G}=W;if(YQ(X,(V)=>this.#G(Q,V)),K)this.#F(Q,J.length-K,K);YQ(G,(V)=>{let Y=J[V.index|0];this.#Q.push({node:Y,patch:V})})}}#G(Z,Q){switch(Q.kind){case O6:this.#P(Z,Q);break;case j6:this.#j(Z,Q);break;case D6:this.#R(Z,Q);break;case A6:this.#U(Z,Q);break;case P6:this.#I(Z,Q);break;case S6:this.#M(Z,Q);break;case T6:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:W}){let J=KX(),X=this.#H(Z,W);this.#N(J,null,Z,W|0,Q),kQ(Z.parentNode,J,X)}#M(Z,{index:Q,with:W}){this.#F(Z,Q|0,1);let J=this.#H(Z,Q);this.#O(Z.parentNode,J,Z,Q|0,W)}#H(Z,Q){Q=Q|0;let{children:W}=Z,J=W.length;if(Q<J)return W[Q].node;let X=W[J-1];if(!X&&Z.kind!==AZ)return null;if(!X)X=Z;while(X.kind===AZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#U(Z,{key:Q,before:W}){W=W|0;let{children:J,parentNode:X}=Z,K=J[W].node,G=J[W];for(let M=W+1;M<J.length;++M){let U=J[M];if(J[M]=G,G=U,U.key===Q){J[W]=U;break}}let{kind:V,node:Y,children:H}=G;if(s8(X,Y,K),V===AZ)this.#V(X,H,K)}#V(Z,Q,W){for(let J=0;J<Q.length;++J){let{kind:X,node:K,children:G}=Q[J];if(s8(Z,K,W),X===AZ)this.#V(Z,G,W)}}#I(Z,{index:Q}){this.#F(Z,Q,1)}#F(Z,Q,W){let{children:J,parentNode:X}=Z,K=J.splice(Q,W);for(let G=0;G<K.length;++G){let{kind:V,node:Y,children:H}=K[G];if(GX(X,Y),this.#q(K[G]),V===AZ)K.push(...H)}}#q(Z){let{debouncers:Q,children:W}=Z;for(let{timeout:J}of Q.values())if(J)x6(J);Q.clear(),YQ(W,(J)=>this.#q(J))}#R({node:Z,handlers:Q,throttles:W,debouncers:J},{added:X,removed:K}){YQ(K,({name:G})=>{if(Q.delete(G))i8(Z,G,k6),this.#z(W,G,0),this.#z(J,G,0);else YX(Z,G),l8[G]?.removed?.(Z,G)}),YQ(X,(G)=>this.#A(Z,G))}#P({node:Z},{content:Q}){UX(Z,Q??"")}#j({node:Z},{inner_html:Q}){MX(Z,Q??"")}#N(Z,Q,W,J,X){YQ(X,(K)=>this.#O(Z,Q,W,J++,K))}#O(Z,Q,W,J,X){switch(X.kind){case KQ:{let K=this.#D(W,J,X);this.#N(K,null,K[mZ],0,X.children),kQ(Z,K,Q);break}case CQ:{let K=this.#B(W,J,X);kQ(Z,K,Q);break}case AZ:{let K=this.#B(W,J,X);kQ(Z,K,Q),this.#N(Z,Q,K[mZ],0,X.children);break}case W8:{let K=this.#D(W,J,X);this.#j({node:K},X),kQ(Z,K,Q);break}}}#D(Z,Q,{kind:W,key:J,tag:X,namespace:K,attributes:G}){let V=JX(K||MW,X);if($Z(W,Z,V,Q,J),this.#J&&J)r8(V,"data-lustre-key",J);return YQ(G,(Y)=>this.#A(V,Y)),V}#B(Z,Q,{kind:W,key:J,content:X}){let K=XX(X??"");return $Z(W,Z,K,Q,J),K}#A(Z,Q){let{debouncers:W,handlers:J,throttles:X}=Z[mZ],{kind:K,name:G,value:V,prevent_default:Y,debounce:H,throttle:M}=Q;switch(K){case aW:{let U=V??"";if(G==="virtual:defaultValue"){Z.defaultValue=U;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(U!==VX(Z,G))r8(Z,G,U);l8[G]?.added?.(Z,U);break}case oW:Z[G]=V;break;case tW:{if(J.has(G))i8(Z,G,k6);let U=Y.kind===eW;HX(Z,G,k6,{passive:U}),this.#z(X,G,M),this.#z(W,G,H),J.set(G,(I)=>this.#S(Q,I));break}}}#z(Z,Q,W){let J=Z.get(Q);if(W>0)if(J)J.delay=W;else Z.set(Q,{delay:W});else if(J){let{timeout:X}=J;if(X)x6(X);Z.delete(Q)}}#S(Z,Q){let{currentTarget:W,type:J}=Q,{debouncers:X,throttles:K}=W[mZ],G=FX(W),{prevent_default:V,stop_propagation:Y,include:H}=Z;if(V.kind===Q6)Q.preventDefault();if(Y.kind===Q6)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let M=this.#X(Q,G,J,H),U=K.get(J);if(U){let D=Date.now(),B=U.last||0;if(D>B+U.delay)U.last=D,U.lastEvent=Q,this.#W(Q,M)}let I=X.get(J);if(I)x6(I.timeout),I.timeout=WX(()=>{if(Q===K.get(J)?.lastEvent)return;this.#W(Q,M)},I.delay);if(!U&&!I)this.#W(Q,M)}}var YQ=(Z,Q)=>{if(Array.isArray(Z))for(let W=0;W<Z.length;W++)Q(Z[W]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},k6=(Z)=>{let{currentTarget:Q,type:W}=Z;Q[mZ].handlers.get(W)(Z)},n8=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},qX=(Z)=>{return{added(Q,W){Q[Z]=W}}},l8={checked:n8("checked"),selected:n8("selected"),value:qX("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function RX(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return[X,s(K)];else{let G=J.tail,V=J.head[0],Y=J.head[1],H=Q8(V,Y),M;if(V==="")M=X;else M=XQ(X,V,H);let U=M,I=F(H,K);Z=G,Q=U,W=I}}}function b6(Z){return RX(Z,HZ(),E)}function o8(Z,Q,W){let J=b6(W),X,K;return X=J[0],K=J[1],aQ("",i,"",Z,Q,K,X,!1,lQ(Z,""))}function t8(Z,Q,W,J){let X=b6(J),K,G;return K=X[0],G=X[1],aQ("",i,Z,Q,W,G,K,!1,lQ(Q,Z))}function e8(Z){let Q=b6(Z),W,J;return W=Q[0],J=Q[1],V6("",i,J,W)}var Z9=(Z)=>{let Q=$Z(KQ,null,Z,0,null),W=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(Q9(G))W+=1;if(W===0){let G=RZ().createTextNode("");return $Z(CQ,Q,G,0,null),Z.replaceChildren(G),q8()}if(W===1)return g6(Q,Z).head[1];let J=RZ().createTextNode(""),X=$Z(AZ,Q,J,0,null),K=g6(X,Z);return Z.insertBefore(J,Z.firstChild),e8(K)},Q9=(Z)=>{switch(Z.nodeType){case UW:return!0;case nW:return!!Z.data;default:return!1}},zX=(Z,Q,W,J)=>{if(!Q9(Q))return null;switch(Q.nodeType){case UW:{let X=$Z(KQ,Z,Q,J,W),K=Q.localName,G=Q.namespaceURI,V=!G||G===MW;if(V&&IX.includes(K))NX(K,Q);let Y=OX(Q),H=g6(X,Q);return V?o8(K,Y,H):t8(G,K,Y,H)}case nW:return $Z(CQ,Z,Q,J,null),oQ(Q.data);default:return null}},IX=["input","select","textarea"],NX=(Z,Q)=>{let{value:W,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!W)return;queueMicrotask(()=>{if(Q.value=W,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),RZ().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},g6=(Z,Q)=>{let W=null,J=Q.firstChild,X=null,K=0;while(J){let G=J.nodeType===UW?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let V=zX(Z,J,G,K),Y=J.nextSibling;if(V){let H=new GZ([G??"",V],null);if(X)X=X.tail=H;else X=W=H;K+=1}else Q.removeChild(J);J=Y}if(!X)return E;return X.tail=E,W},OX=(Z)=>{let Q=Z.attributes.length,W=E;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;W=new GZ(jX(J),W)}return W},jX=(Z)=>{let{localName:Q,value:W}=Z;return JQ(Q,W)};var ZW=()=>!!RZ();class TW{constructor(Z,[Q,W],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#W=X,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#G.has(V.context))return;V.stopImmediatePropagation();let Y=this.#G.get(V.context);if(V.subscribe){let H=()=>{Y.subscribers=Y.subscribers.filter((M)=>M!==V.callback)};Y.subscribers.push([V.callback,H]),V.callback(Y.value,H)}else V.callback(Y.value)});let K=(V,Y,H)=>R6(this.#Q,Y,H,V),G=(V,Y)=>{let[H,M]=z6(this.#Q,Y);if(this.#Q=H,M.isOk()){let U=M[0];if(U.stop_propagation)V.stopPropagation();if(U.prevent_default)V.preventDefault();this.dispatch(U.message,!1)}};this.#K=new y6(this.root,K,G),this.#J=Z9(this.root),this.#Q=q6(),this.#q(W),this.#R()}root=null;dispatch(Z,Q=!1){if(this.#Y)this.#M.push(Z);else{let[W,J]=this.#W(this.#Z,Z);this.#Z=W,this.#F(J,Q)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#G.has(Z))this.#G.set(Z,{value:Q,subscribers:[]});else{let W=this.#G.get(Z);if(PZ(W.value,Q))return;W.value=Q;for(let J=W.subscribers.length-1;J>=0;J--){let[X,K]=W.subscribers[J];if(!X){W.subscribers.splice(J,1);continue}X(Q,K)}}}#Z;#X;#W;#J;#Q;#K;#G=new Map;#Y=!1;#M=[];#H=E;#U=E;#V=null;#I={dispatch:(Z)=>this.dispatch(Z),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#F(Z,Q=!1){if(this.#q(Z),!this.#V)if(Q)this.#V="sync",queueMicrotask(()=>this.#R());else this.#V=requestAnimationFrame(()=>this.#R())}#q(Z){this.#Y=!0;while(!0){for(let W=Z.synchronous;W.tail;W=W.tail)W.head(this.#I);if(this.#H=J9(this.#H,Z.before_paint),this.#U=J9(this.#U,Z.after_paint),!this.#M.length)break;let Q=this.#M.shift();[this.#Z,Z]=this.#W(this.#Z,Q)}this.#Y=!1}#R(){this.#V=null;let Z=this.#X(this.#Z),{patch:Q,events:W}=xQ(this.#Q,this.#J,Z);if(this.#Q=W,this.#J=Z,this.#K.push(Q),this.#H instanceof GZ){let J=W9(this.#H);this.#H=E,queueMicrotask(()=>{this.#F(J,!0)})}if(this.#U instanceof GZ){let J=W9(this.#U);this.#U=E,requestAnimationFrame(()=>{this.#F(J,!0)})}}}function W9(Z){return{synchronous:Z,after_paint:E,before_paint:E}}function J9(Z,Q){if(Z instanceof R)return Q;else if(Q instanceof R)return Z;else return pZ(Z,Q)}class h6 extends z{constructor(Z){super();this.message=Z}}class _6 extends z{constructor(Z){super();this.callback=Z}}class v6 extends z{constructor(Z){super();this.callback=Z}}class rZ extends z{constructor(Z){super();this.message=Z}}class HQ extends z{constructor(Z,Q){super();this.name=Z,this.data=Q}}class LW extends z{constructor(Z,Q){super();this.key=Z,this.value=Q}}class MQ extends z{}class K9 extends z{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=W,this.attributes=J,this.properties=X,this.contexts=K,this.is_form_associated=G,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function G9(Z){let Q=new K9(!0,!0,!1,E,E,E,!1,FW,FW,FW);return e(Z,Q,(W,J)=>{return J.apply(W)})}class Y9{#Z;constructor(Z,[Q,W],J,X){this.#Z=new TW(Z,[Q,W],X,J)}send(Z){switch(Z.constructor){case rZ:{this.dispatch(Z.message,!1);break}case HQ:{this.emit(Z.name,Z.data);break}case MQ:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,Q){this.#Z.emit(Z,Q)}}var H9=({init:Z,update:Q,view:W},J,X)=>{if(!ZW())return new x(new QW);let K=J instanceof HTMLElement?J:RZ().querySelector(J);if(!K)return new x(new m6(J));return new C(new Y9(K,Z(X),Q,W))};class DX{#Z;#X;#W;#J;#Q;#K;#G=eZ();#Y=new Set;constructor([Z,Q],W,J,X){this.#Z=Z,this.#X=W,this.#W=J,this.#J=X,this.#Q=this.#W(this.#Z),this.#K=U8(this.#Q),this.#V(Q)}send(Z){switch(Z.constructor){case h6:{let{message:Q}=Z,W=this.#M(Q),J=xQ(this.#K,this.#Q,W);this.#Q=W,this.#K=J.events,this.broadcast(w6(J.patch));return}case _6:{let{callback:Q}=Z;this.#Y.add(Q),Q(v8(this.#J.open_shadow_root,this.#J.adopt_styles,_Q(this.#J.attributes),_Q(this.#J.properties),_Q(this.#J.contexts),this.#G,this.#Q));return}case v6:{let{callback:Q}=Z;this.#Y.delete(Q);return}case rZ:{let{message:Q}=Z,[W,J]=this.#X(this.#Z,Q),X=this.#W(W),K=xQ(this.#K,this.#Q,X);this.#V(J),this.#Z=W,this.#Q=X,this.#K=K.events,this.broadcast(w6(K.patch));return}case HQ:{let{name:Q,data:W}=Z;this.broadcast(m8(Q,W));return}case LW:{let{key:Q,value:W}=Z,J=wZ(this.#G,Q);if(J.isOk()&&PZ(J[0],W))return;this.#G=RQ(this.#G,Q,W),this.broadcast($8(Q,W));return}case MQ:{this.#Z=null,this.#X=null,this.#W=null,this.#J=null,this.#Q=null,this.#K=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#M(Z){switch(Z.constructor){case DW:{let{messages:Q}=Z,W=this.#Z,J=SQ();for(let X=Q;X.head;X=X.tail){let K=this.#M(X.head);if(K instanceof C){W=K[0][0],J=aJ(ZZ.fromArray([J,K[0][1]]));break}}return this.#V(J),this.#Z=W,this.#W(this.#Z)}case BW:{let{name:Q,value:W}=Z,J=this.#H(Q,W);if(J instanceof x)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case AW:{let{name:Q,value:W}=Z,J=this.#U(Q,W);if(J instanceof x)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case PW:{let{path:Q,name:W,event:J}=Z,[X,K]=I6(this.#K,Q,W,J);if(this.#K=X,K instanceof x)return this.#Q;else{let[G,V]=this.#X(this.#Z,K[0].message);return this.#V(V),this.#Z=G,this.#W(this.#Z)}}case C6:{let{key:Q,value:W}=Z,J=wZ(this.#J.contexts,Q);if(J instanceof x)return this.#Q;if(J=dZ(W,J[0]),J instanceof x)return this.#Q;let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}}#H(Z,Q){let W=wZ(this.#J.attributes,Z);switch(W.constructor){case C:return W[0](Q);case x:return new x(void 0)}}#U(Z,Q){let W=wZ(this.#J.properties,Z);switch(W.constructor){case C:return W[0](Q);case x:return new x(void 0)}}#V(Z){let Q=(G)=>this.send(new rZ(G)),W=(G,V)=>this.send(new HQ(G,V)),J=()=>{return},X=()=>{return},K=(G,V)=>this.send(new LW(G,V));globalThis.queueMicrotask(()=>{nJ(Z,Q,W,J,X,K)})}}class M9 extends z{constructor(Z,Q,W,J){super();this.init=Z,this.update=Q,this.view=W,this.config=J}}class m6 extends z{constructor(Z){super();this.selector=Z}}class QW extends z{}function U9(Z,Q,W){return new M9(Z,Q,W,G9(E))}function F9(Z,Q,W){return kJ(!ZW(),new x(new QW),()=>{return H9(Z,Q,W)})}function PX(Z,Q){return cJ(Z,$Q(Q,(W)=>{return new dQ(!1,!1,W)}),E,Z6,Z6,0,0)}function q9(Z){return PX("input",jJ(j(["target","value"]),GW,(Q)=>{return sW(Z(Q))}))}function R9(Z,Q){window.setTimeout(Q,Z)}var TX="src/tachyon.gleam";class u6 extends z{constructor(Z,Q,W,J,X,K){super();this.in=Z,this.curr_beams=Q,this.lines_todo=W,this.lines_done=J,this.on_index=X,this.num_splits=K}}class c6 extends z{constructor(Z,Q){super();this.millisec=Z,this.index=Q}}class p6 extends z{constructor(Z){super();this[0]=Z}}class z9 extends z{constructor(Z){super();this[0]=Z}}function $6(Z){return lJ((Q)=>{return R9(Z.millisec,()=>{return Q(new p6(Z))})})}function I9(Z,Q){return new u6(Z,YW(),(()=>{return FJ(Z,`
`)})(),j([]),Q,0)}function LX(Z){let Q=0,W=I9(Z,Q),J=gQ(3000,uW(W.lines_todo));return[W,$6(new c6(J,Q))]}function CX(Z,Q){let W=e((()=>{return NQ(Z)})(),[YW(),0,0],(J,X)=>{let K=J[1]+1,G=J[0],V=J[2],Y;if((()=>{return rW(Q,K)})())if(X==="^")Y=[(()=>{let B=wJ(G,K),A=DQ(B,K+1);return DQ(A,K-1)})(),V+1];else Y=[(()=>{return DQ(G,K)})(),V];else{let D;if(X==="S")D=DQ(G,K);else if(X==="s")D=DQ(G,K);else D=G;Y=[D,V]}let M=Y,U,I;return U=M[0],I=M[1],[U,K,I]});return[W[0],W[2]]}function wX(Z,Q){if(Q instanceof p6){let W=Q[0];if(W.index===Z.on_index){let X=Z.lines_todo;if(X instanceof R)return[Z,SQ()];else{let{head:K,tail:G}=X,V=CX(K,Z.curr_beams),Y,H;Y=V[0],H=V[1],kX(H,void 0,"src/tachyon.gleam",82);let M=e((()=>{return NQ(K)})(),["",0],(B,A)=>{let N=B[1]+1,T;if(A==="S")T=A;else if(A==="s")T=A;else if((()=>{return rW(Y,N)})())T="|";else T=A;let O=T;return[B[0]+O,N]})[0],U,I=Z.lines_done;U=pZ(I,j([M]));let D=U;return[new u6(Z.in,Y,G,D,Z.on_index,Z.num_splits+H),$6(W)]}}else return[Z,SQ()]}else{let W=Q[0],J=Z.on_index+1,X=I9(W,J),K=gQ(3000,uW(X.lines_todo));return[X,$6(new c6(K,J))]}}function EX(Z){return R8(j([zZ("background","#0f0f23"),zZ("color","#cccccc"),zZ("font-family","Source Code Pro, monospace"),zZ("font-weight","300"),zZ("font-size","14pt")]),j([z8(j([]),j([j8(j([rJ("/")]),j([jW("Correct Arity")]))])),N8(j([]),j([jW("split count "+(()=>{let Q=Z.num_splits;return bZ(Q)})())])),I8(j([zZ("display","flex"),zZ("flex-wrap","wrap"),zZ("gap","8px")]),j([D8(j([sJ("input"),zZ("height","300px"),zZ("width","130px"),q9((Q)=>{return new z9(Q)})]),Z.in),O8(j([zZ("margin-top","0px")]),j([jW((()=>{let Q=Z.lines_done,W=pZ(Q,Z.lines_todo);return KW(W,`
`)})())]))]))]))}var xX=`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;function N9(){let Z=U9(LX,wX,EX),Q=F9(Z,"#app",xX);if(!(Q instanceof C))throw wW("let_assert",TX,"tachyon",18,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:484,end:540,pattern_start:495,pattern_end:500});return}function kX(Z,Q,W,J){let G=`${W}:${J}`,Y=new O9().inspect(Z),H=Q===void 0?"":" "+Q;if(globalThis.process?.stderr?.write){let M=`\x1B[90m${G}\x1B[39m${H}
${Y}
`;globalThis.process.stderr.write(M)}else if(globalThis.Deno){let M=`\x1B[90m${G}\x1B[39m${H}
${Y}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(M))}else{let M=`${G}${H}
${Y}`;globalThis.console.log(M)}return Z}class O9{#Z=new globalThis.Set;#X(Z){try{return Z instanceof o}catch{return!1}}#W(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let W=Q.indexOf("e");if(W>=0)return Q.slice(0,W)+".0"+Q.slice(W);else return Q+".0"}}inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#Y(Z);if(Q==="bigint"||globalThis.Number.isInteger(Z))return Z.toString();if(Q==="number")return this.#W(Z);if(Z instanceof bQ)return this.#M(Z);if(Z instanceof lZ)return this.#H(Z);if(Z instanceof globalThis.RegExp)return`//js(${Z})`;if(Z instanceof globalThis.Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof globalThis.Function){let J=[];for(let X of globalThis.Array(Z.length).keys())J.push(globalThis.String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let W;if(globalThis.Array.isArray(Z))W=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof ZZ)W=this.#G(Z);else if(Z instanceof z)W=this.#K(Z);else if(this.#X(Z))W=this.#Q(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else W=this.#J(Z);return this.#Z.delete(Z),W}#J(Z){let Q=globalThis.Object.getPrototypeOf(Z)?.constructor?.name||"Object",W=[];for(let K of globalThis.Object.keys(Z))W.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let J=W.length?" "+W.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#Q(Z){let Q="dict.from_list([",W=!0,J=[];return Z.forEach((X,K)=>{J.push([K,X])}),J.sort(),J.forEach(([X,K])=>{if(!W)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(K)+")",W=!1}),Q+"])"}#K(Z){let Q=globalThis.Object.keys(Z).map((W)=>{let J=this.inspect(Z[W]);return isNaN(parseInt(W))?`${W}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#G(Z){if(Z instanceof R)return"[]";let Q='charlist.from_string("',W="[",J=Z;while(J instanceof GZ){let X=J.head;if(J=J.tail,W!=="[")W+=", ";if(W+=this.inspect(X),Q)if(globalThis.Number.isInteger(X)&&X>=32&&X<=126)Q+=globalThis.String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return W+"]"}#Y(Z){let Q='"';for(let W=0;W<Z.length;W++){let J=Z[W];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#M(Z){return`//utfcodepoint(${globalThis.String.fromCodePoint(Z.value)})`}#H(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let W=0;W<Z.byteSize-1;W++)Q+=Z.byteAt(W).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let W=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-W,Q+=`:size(${W})`}return Q+=">>",Q}}N9();
